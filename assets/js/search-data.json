{
  
    
        "post0": {
            "title": "From REST API to GraphQL",
            "content": "Setting up a basic Rest API . Let us start by creating our own Rest API with python. We will use Flask as our framework. Flask is highly recommended since it is a simpler setup than other frameworks like Django and Ruby. However, any other framework will do the job. Flask runs on localhost:5000. We are going to install the dependencies that we need to be able to work with the framework in our preferred environment. As a side note, working in a virtual environment is highly recommended as it isolates the installations. I will assume that you already know how to setup a virtual environment and will dive straight into the development of the flask app. Write the following in the terminal to install the dependencies: . # pip install flask-sqlalchemy # pip intall requests . Create a file and name it RestApp.py in which we can write our initial code. Start by initializing the flask app. For now, we will return a simple string. This will give an HTTP response message of 200 OK, meaning the server is running without any problems. To familiarize yourself with more response codes, you can have a look at this Wikipedia Article. . from flask import Flask app = Flask(__name__) @app.route(&#39;/&#39;) def index(): return &quot;Music Genres!&quot; if __name__ == &quot;__main__&quot;: app.run() . * Serving Flask app &#39;__main__&#39; (lazy loading) * Environment: production WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead. * Debug mode: off . * Running on http://127.0.0.1:5000 (Press CTRL+C to quit) . . In the terminal, we would like to export the flask app to be able to run it. We have to do the following every time we want to run our flask app. . # SET FLASK_ENV=development # flask run . Now we will create a class to store music genres inherited from an SQLAlchemy database model. The attribute unique here is used if we want every name to be different, and the attribute nullable is used if we do not want any columns in our table to be empty. The __repr__ method represents the class&#39;s object as a readable string. . class Music(db.Model): id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String, unique=True, nullable=False) description = db.Column(db.String(120)) def __repr__(self): return f&quot;{self.name} - {self.description}&quot; . Link the database (SQLAlchemy) . SQLAlchemy is a library that allows communication between python programs and relational databases. It is used as a tool to convert python classes to data tables. If we go back to the terminal and try to import the database, we will find that the database has not yet been defined. So, we need to connect to the database using a Database URI. Thus, The database will be an instance of SQLite in the same directory. . from flask_sqlalchemy import SQLAlchemy app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:///music.db&#39; db = SQLAlchemy(app) . The next step is to import the database from our application to create our desired data tables in the terminal. This will create a music.db file in our repository. We will create our first entry in the database. Each piece of data is treated as an object of the class that we created. Thus, creating data is creating instances of the class Music and assigning it parameters to describe the data. Because we used the __repr__ method, we can type music, and the list of music genres will be listed in a string format. Note that it is important to import the class in the fourth line, or else the instance Music will not be defined. To test that we added a data row successfully, we can type in music into the terminal, and it will give us the data that we entered. . # from RestApp import db # db.create_all() # from RestApp import Music # db.session.add(music) # db.session.commit() . To add another music genre to the database, type the following: . # db.session.commit() # Music.query.all() . If we want to use our data with the server, we must go back to the route(/music). Here we will implement a JSON list and iterate through the music genres. This way, the output will be in the form of a list of dictionaries containing the data. This way, we can go back to the website and reload it; the data will be displayed with one key, which is music and a pair of a list of dictionaries (i.e. name, description). . @app.route(&quot;/music&quot;) def get_music(): music = Music.query.all() output = [] for music in Music: music_info = {&#39;name&#39;: music.name, &#39;description&#39;: music.description} output.append(music_info) . If we want to grab a specific genre, an effortless way would be fetching it by its id. So to do this, we develop a new route. In this route, we will implement a new function and pass the id of a specific music genre because we are using dictionaries to store the data. . . @app.route(&#39;/music/&lt;id&gt;&#39;) def get_music_id(id): music = Music.query.get_or_404(id) # this will either fetch the drink with a specific id or return a 404 error return {&quot;name&quot;: music.name, &quot;description&quot;:music.description} . Let&#39;s test this out by going back to the browser and typing localhost5000/music/1. . . Now try to fetch a music genre with id 3. The result would be a &#39;Not Found&#39; error as we have not yet entered the third genre into our database. . . Additional HTTP Methods . When working with REST APIs, HTTP methods are usually used to manipulate our database. The most well-known HTTP methods are: . POST: create new resources in the database | GET: retrieve a representation of an existing resource in the database | PUT: updates a resource in the database | DELETE: remove a resource from the database | These methods are known as &quot;CRUD&quot; which stands for create, read, update and delete respectively. . Introduction to GraphQL . We introduced the query language GraphQL, but the question is, what makes GraphQL more unique, and how does it differ from a REST API? GraphQL was developed internally by Facebook in 2012 before being publicly released in 2015. Facebook developed that language to solve a problem that REST APIs do not address; the need for APIs to be able to adapt to the rapid changes required by the frontend. . . REST APIs are modelled as resources. We provide various endpoints to access particular data and define which HTTP methods are used at each endpoint. On the other hand, GraphQL models the API as a graph. While the backend is still responsible for access controls and deals with how data gets passed between the frontend and the database, GtaphQL removes the backend requirement of needing to create specific endpoints for each type of data needed and generates only one endpoint across all objects. It lets developers construct requests that pull data from multiple data resources in a single API call. The GraphQL special Schema Definition Language (SDL) allows for defining the types and fields of each type of data. The types defined in a GraphQL schema are treated as nodes. The client can then make queries at a specific endpoint to access data at that particular node of interest to get the specific data it wants. For more information, look at the official GraphQL documentaion. The main advantages of querying data with GraphQL are: . Reduces web-app development efforts. | Reduces bandwidth: querying only what we need and only what we need | Reduces the number of requests | . Requirements . As mentioned previously, flask is just a framework that makes it easier to build and configure web applications, and Flask_SQLAlchemy is an extension used for flask that allows us to interact with our SQL database using SQLAlchemy. Introducing Graphene, it is a library that helps us implement and integrate GraphQL APIs in python. Several other libraries can be used to integrate GraphQL APIs (for example, Ariadne). However, for this project, we will work with Graphene. . What is the difference between Ariadne and Graphene? The main difference between the two is that Ariadne uses a schema-first approach while Graphene uses a code-first approach. What does this mean? A schema-first approach is about writing the schema first and then implementing the code to satisfy the definitions of the schema. In a code_first approach, we start by coding the resolvers which are functions connecting the schema types to the backend. As a result, the schema is generated based on our code. According to Prisma&#39;s Nikolas Burk, developers usually prefer Graphene over Ariadne because there are no features supported by a schema-first approach that are not supported by a code-first approach. . Developing our GraphQL Alternative . In a different module which we will call graphQL_App.py, we will start adding to the code and integrate the graphQL method step by step. First of all, we need to install the library Graphene. Graphene comes with built-in support for SQLAlchemy. We will also need the GraphQL extension for Flask to be able to view the schema through HTTP. Note that we already installed flask and flask-sqlalchemy, so there is no need to redo the installation. Thus, we will go ahead and write the following commands in the terminal to install the remaining dependencies: . # pip install graphene-sqlalchemy # pip install flask_graphql . Now that we have installed the dependencies to work with GraphQL, we will take the code in RestApp.py and adjust it. To recap, the full code should look like this: . from flask import Flask from flask_sqlalchemy import SQLAlchemy app = Flask(__name__) app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:///music.db&#39; db = SQLAlchemy(app) class Music(db.Model): id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String, unique=True, nullable=False) description = db.Column(db.String(120)) def __repr__(self): return f&quot;{self.name} - {self.description}&quot; @app.route(&#39;/&#39;) def index(): return &quot;&lt;h1&gt;Music Genres!&lt;/h&gt;&quot; @app.route(&quot;/music&quot;) def get_music(): music = Music.query.all() output = [] for genre in music : music_info = {&#39;name&#39;: genre.name, &#39;description&#39;: genre.description} output.append(music_info) return {&quot;music&quot;: output} @app.route(&#39;/music/&lt;id&gt;&#39;) def get_music_id(id): music = Music.query.get_or_404(id) # this will either fetch the drink with a specific id or return a 404 error return {&quot;name&quot;: music.name, &quot;description&quot;:music.description} if __name__ == &quot;__main__&quot;: app.run() . Let&#39;s start doing the required imports in our code: . from flask import Flask from flask_sqlalchemy import SQLAlchemy import graphene from graphene_sqlalchemy import SQLAlchemyObjectType, SQLAlchemyConnectionField from flask_graphql import GraphQLView . Proceed with creating the flask application, creating a database model, and configuring the model with Graphene. In our case, we already created a database model music.db, so there is no need to create another one. . app = Flask(__name__) app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:///music.db&#39; db = SQLAlchemy(app) class Music(db.Model): id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String, unique=True, nullable=False) description = db.Column(db.String(120)) def __repr__(self): return f&quot;{self.name} - {self.description}&quot; #################################################### class MusicObject(SQLAlchemyObjectType): class Meta: model = Music interfaces = (graphene.relay.Node, ) #################################################### @app.route(&#39;/&#39;) def index(): return &quot;&lt;h1&gt;Music Genres!&lt;/h&gt;&quot; if __name__ == &quot;__main__&quot;: app.run() . Query and Mutation Classes . A Query class: . class Query(graphene.ObjectType): node = graphene.relay.Node.Field() all_music = SQLAlchemyConnectionField(MusicObject) . A Mutation class: . class CreateMusic(graphene.Mutation): class Arguments: name = graphene.String(required=True) description = graphene.String(required=True) music = graphene.Field(lambda: MusicObject) def mutate(self, info, name, description): # method to be called when writing data music = Music( name = name, description = description ) if music: db.session.add(music) db.session.commit() return CreateMusic(music=music) # Mutation class class Mutation(graphene.ObjectType): create_music = CreateMusic.Field() . After writing our code, we can go ahead and define our schema: . schema = graphene.Schema(query=Query, mutation=Mutation) . The final part is exposing the GraphQL view using the function view_func. . app.add_url_rule( &#39;/graphql&#39;, view_func=GraphQLView.as_view( &#39;graphql&#39;, schema=schema, graphiql=True ) ) . If we run our code by typing python graphQL_App.py in the terminal and then go back to the browser to type localhost:5000/graphql in the search bar, the following view will appear: . . Querying the database . Now we can make queries to our database through the GraphiQL integrated developement environment (IDE). A Query is the equivalent to a GET request when working with REST APIs. We can request data in a Query and receive data in a Response containing only the requested data. Looking at the example below, the response on the right has the same shape as the query itself, making it easier to identify the fields that are returned. . . We can even be more specific and request only the names of the genres. . Modifying the database . GraphQL Queries can be implemented in a sense to cause modifications to the data in the server. By convention, any operation that causes a data write in GraphQL is called a mutation. Mutations are the equivalent of the POST, PUT, and DELETE methods. In this example, the mutation class will refer to another class, CreateMusic. Refer to the code under A mutation class. Let&#39;s test our mutation class by creating a new entry. . mutation{ createMusic(name:&quot;Jazz&quot;, description:&quot;propulsive syncopated rhythms&quot;){ music{ name description } } } . Conclusion . Congratulations on reaching this far! This mini-tutorial introduced some basic concepts about GraphQL and how it compares to REST APIs. We demonstrated how to build a simple web application, and allowing the client to provide custom data using URL parameters and interactivity with databases using SQLAlchemy. As a next step, a good recommendation would be to work on projects involving multiple relational databases and discover how to query them using GraphQL. . References . Using GraphQL with python – A complete guide. Apollo GraphQL Blog. (n.d.). Retrieved July 1, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.apollographql.com/blog/graphql/python/complete-api-guide/ . Gwalugano, K. (2021, December 6). Build a graphql API with Python, Flask, and Ariadne. LogRocket Blog. Retrieved July 1, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://blog.logrocket.com/build-graphql-api-python-flask-ariadne/ . Turning a rest API into graphql using StepZen: Stepzen Blog. StepZen. (n.d.). Retrieved July 1, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://stepzen.com/blog/rest-to-graphql . Ansurkar, A. (2020, June 4). Getting started with graphql and Flask. Medium. Retrieved July 1, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://python.plainenglish.io/getting-started-with-graphql-and-flask-13a99513e764 . Dyouri, A. (2020, April 16). How to make a web application using flask in python 3. DigitalOcean. Retrieved July 1, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.digitalocean.com/community/tutorials/how-to-make-a-web-application-using-flask-in-python-3 . Getting started. Graphene. (n.d.). Retrieved July 1, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://docs.graphene-python.org/en/latest/quickstart/ . Bruno KrebsR&amp;D Content ArchitectI am passionate about developing highly scalable. (2017, November 9). SQLAlchemy orm tutorial for python developers. Auth0. Retrieved July 3, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://auth0.com/blog/sqlalchemy-orm-tutorial-for-python-developers/ . Queries and mutations. GraphQL. (n.d.). Retrieved July 3, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://graphql.org/learn/queries/ . Dechalert, A. (2020). What&#39;s the difference between REST and GraphQl . Retrieved July 4, 2022, from &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.tabnine.com/blog/rest-api-vs-graphql/. .",
            "url": "https://de-fellows.github.io/RexCoding/2022/06/29/Rest-GraphQL.html",
            "relUrl": "/2022/06/29/Rest-GraphQL.html",
            "date": " • Jun 29, 2022"
        }
        
    
  
    
        ,"post1": {
            "title": "SOLID principles in Java",
            "content": "SOLID principles code translation in Java . Published by Saman Pordanesh . Introduction . SOLID is an acronym for the first five object-oriented design (OOD) principles. These principles establish practices that lend to developing software with considerations for maintaining and extending as the project grows. Adopting these practices can also contribute to avoiding code smells, refactoring code, and Agile or Adaptive software development. SOLID stands for: S - Single-responsiblity Principle O - Open-closed Principle L - Liskov Substitution Principle I - Interface Segregation Principle D - Dependency Inversion Principle | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better. | This translation is based on the final code source of Solid Principles lessons in python programming languages (dependency-inversion-after.py) | We need a separate class with the main function to run the program, despite Python, which you can each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on java is different. You can find more information here. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project with an exact directory with all dependencies can be good practice for OOP designing. | We defined a package name for this project as edu.def.solid (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. | However, packages are not necessary, you could use a default package, or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . SOLID Principles - Code progression . First, please consider the original code OrderOriginal.java and see how the code looks like, before implementing SOLID Principles. | Applying the S (Single Responsibility Principle) order has too many responsibilities, such as adding a new class PaymentProcessor and separating out two different pay() methods. | By applying O (Open/Closed Principle), we added an extra payment method which would require changing PaymentProcessor class. Making an interfaces from PaymentProcessor is one of them, which gives us the ability to specialize inherited classes in terms of payment methods; Like adding PaypalProcessor class which is inheriting PaymentProcessor interfaces. | Applying L (Liskov Substitution Principle) on PaypalProcessor, securityCode will be substituted by emailAddress as a class parameter, not a function’s argument anymore. Also, it will be valued at the class’s constructor and not on the pay() method. | By refactoring because of I (Interface segregation), we added SMS authentication to PaymentProcessor. Before that there was a problem (Liskov violation) with credit payment, that was no SMS authorization. | Applying I (Interface segregation) with inheritance. Create two interfaces: PaymentProcessor with pay () method and PaymentProcessorSMS interface which inherits from PaymentProcessor, as well as adding authSMS() method. | Applying I (Interface segregation) with composition. Create two interfaces: PaymentProcessor with pay() , and create a SMSAuthorizer class which is passed to all class’s constructors that need a kind of SMS authentication (aggregation). | Applying D (Dependency inversion). Desire to add another type of authorizer. Some processor classes depend on SMSAuthorizer. We created an interface Authorizer to have a more general interface for authorizing by SMS, Google or NotRobot. Also, a new NotARobotAuthorizer was added. | Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/solid/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.solid.Main . If your main function is in a different class, put the name of that class instead of Main at the end of the command . | You can find more about compiling instruction here | . Classes changes . Order . Python version . class Order: def __init__(self): self.items = [] self.quantities = [] self.prices = [] self.status = &quot;open&quot; def add_item(self, name, quantity, price): self.items.append(name) self.quantities.append(quantity) self.prices.append(price) def total_price(self): total = 0 for i in range(len(self.prices)): total += self.quantities[i] * self.prices[i] return total . Java version . package edu.def.solid; public class Order { private String[] items; private int[] quantities; private int[] prices; private String status = &quot;open&quot;; int numberOfItems = 0; Order(int numberOfItems){ items = new String[numberOfItems]; quantities = new int[numberOfItems]; prices = new int[numberOfItems]; } public void addItem(String name, int quantity, int price){ this.items[numberOfItems] = name; this.quantities[numberOfItems] = quantity; this.prices[numberOfItems] = price; numberOfItems++; } public int totalPrice(){ int total = 0; for (int i = 0; i &lt; numberOfItems; i++){ total += this.quantities[i] * this.prices[i]; } return total; } public void setStatus(String status) { this.status = status; } public String getStatus() { return status; } } . In this class, we need to clarify each array’s size as a Java programming rule. We can do it at the initializer by passing the number of items on the class constructor. | We implemented all variables (items, quantities, …) as class attributes on Java with private visibility to protect them from direct access out of the class. Also, status has a default value of “open”. | A variable like numberOfItems is needed to keep track of the arrays and access them later, as Java doesn’t automatically detect where should add a new item in the array (nothing like append in python). In addition, we should keep updating this variable by adding every single item (in the addItem function). | getters and setters for each private parameter, are not required; You can access fields directly by making parameters public in Java as well, but it’s (private parameters) frequently done in Java as an OOP principle. We followed that principle here and as we will need to access status in other classes, we defined getter and setter for this class’s parameter. | Authorizer . Python version . class Authorizer(ABC): @abstractmethod def is_authorized(self) -&gt; bool: pass . Java version . package edu.def.solid; public interface Authorizer { public boolean isAuthorized(); } . This class was an abstract class on the python version. Abstracts are usually used when we want to implement a specific function with all its functionalities that all children will use in the future. But when we need only the prototype (function naming, return type and arguments only), which will be implemented by each child later, we use interfaces in Java programming. As a result, we implement the Authorizer class as an interface class containing the isAuthotized function prototype. . | A class in Java can inherit an interface by the “implements” keyword after the class name. . | public class AuthorizerSMS implements Authorizer{ ... . Also, all interface methods should be overridden in this child class (implement them completely) . @Override public boolean isAuthorized() { return this.authorized; } . AuthorizerSMS . Python version . class Authorizer_SMS(Authorizer): def __init__(self): self.authorized = False def verify_code(self, code): print(f&quot;Verifying SMS code {code}&quot;) self.authorized = True def is_authorized(self) -&gt; bool: return self.authorized . Java version . package edu.def.solid; public class AuthorizerSMS implements Authorizer{ private boolean authorized = false; public void verifyCode(int code){ System.out.print(&quot;Verifying SMS code &quot; + code); this.authorized = true; } @Override public boolean isAuthorized() { return this.authorized; } } . We defined the variable authorized as a private class attribute. | The isAuthorized method was overridden based on its interface, inheriting that (Authorizer). . | At the verifyCode method, we appended the variable to the printed text by the “+**” sign, although in python, a formatting printing method was used (the **f char at the start of the string) | AuthorizerGoogle . Python version . class Authorizer_Google(Authorizer): def __init__(self): self.authorized = False def verify_code(self, code): print(f&quot;Verifying Google auth code {code}&quot;) self.authorized = True def is_authorized(self) -&gt; bool: return self.authorized . Java version . package edu.def.solid; public class AuthorizerGoogle implements Authorizer { private boolean authorized = false; public void verifyCode(int code){ System.out.print(&quot;Verifying Google code &quot; + code); this.authorized = true; } @Override public boolean isAuthorized() { return this.authorized; } } . The same points as AuthorizerSMS . AuthorizerRobot . Python version . class Authorizer_Robot(Authorizer): def __init__(self): self.authorized = False def not_a_robot(self): self.authorized = True def is_authorized(self) -&gt; bool: return self.authorized . Java version . package edu.def.solid; public class AuthorizerRobot implements Authorizer { private boolean authorized = false; public void notARobot(){ this.authorized = true; } @Override public boolean isAuthorized() { return this.authorized; } } . The same points as AuthorizerSMS . PaymentProcessor . Python version . class PaymentProcessor(ABC): @abstractmethod def pay(self, order): pass . Java version . package edu.def.solid; public interface PaymentProcessor { public void pay(Order order) throws Exception; } . this class is an interface and acts the same as the Authorizer class. This is an interface which imposes the implementation of a specific method on each child, which will be inherent in this interface. | In addition, be careful that the order argument in the payment method is in the type of Order class. (We call it non-primitive data type) | We have an Exception method under a specific condition in the python. In Java, we must specify the “throws Exception” keyword on the function’s prototype and interface. | DebitPaymentProcessor . Python version . class DebitPaymentProcessor(PaymentProcessor): def __init__(self, security_code, authorizer: Authorizer): self.security_code = security_code self.authorizer = authorizer def pay(self, order): if not self.authorizer.is_authorized(): raise Exception(&quot;Not authorized&quot;) print(&quot;Processing debit payment type&quot;) print(f&quot;Verifying security code: {self.security_code}&quot;) order.status = &quot;paid&quot; . Java version . package edu.def.solid; public class DebitPaymentProcessor implements PaymentProcessor{ private int securityCode; private Authorizer authorizer; DebitPaymentProcessor(int securityCode, Authorizer authorizer){ this.securityCode = securityCode; this.authorizer = authorizer; } @Override public void pay(Order order) throws Exception { if (!authorizer.isAuthorized()){ throw new Exception(&quot;Not authorized&quot;); } System.out.println(&quot;Processing debit payment type&quot;); System.out.println(&quot;Verifying security code: &quot; + this.securityCode); order.setStatus(&quot;paid&quot;); } } . We have a constructor to specify two-class parameter values, securitycode and authorizer. Notice that authorizer is a non-primitive data type in the type of Authorizer. | We specified all parameters as private because of the Java OOP rules and without getter and setter, as they are being used only for internal purposes. | The pay method is an overridden method from the PaymentProcessor interface. It shows us that this class inherits the PaymentProcessor interface. | The pay method in this class throws an exception, so we need “throws Exception” keyword at the method’s prototype. | CreditPaymentProcessor . Python version . class CreditPaymentProcessor(PaymentProcessor): def __init__(self, security_code): self.security_code = security_code def pay(self, order): print(&quot;Processing credit payment type&quot;) print(f&quot;Verifying security code: {self.security_code}&quot;) order.status = &quot;paid&quot; . Java version . package edu.def.solid; public class CreditPaymentProcessor implements PaymentProcessor { private int securityCode; CreditPaymentProcessor(int securityCode){ this.securityCode = securityCode; } @Override public void pay(Order order){ System.out.println(&quot;Processing credit payment type&quot;); System.out.println(&quot;Verifying security code: &quot; + this.securityCode); order.setStatus(&quot;paid&quot;); } } . The same points of debitPaymentProcessor will apply for this class, except we don’t have the authorizer parameter and any exceptions for the pay method. . PaypalPaymentProcessor . Python version . class PaypalPaymentProcessor(PaymentProcessor): def __init__(self, email_address, authorizer: Authorizer): self.email_address = email_address self.authorizer = authorizer def pay(self, order): if not self.authorizer.is_authorized(): raise Exception(&quot;Not authorized&quot;) print(&quot;Processing paypal payment type&quot;) print(f&quot;Using email address: {self.email_address}&quot;) order.status = &quot;paid&quot; . Java version . package edu.def.solid; public class PaypalPaymentProcessor implements PaymentProcessor{ private String emailAddress; private Authorizer authorizer; PaypalPaymentProcessor(String emailAddress, Authorizer authorizer){ this.emailAddress = emailAddress; this.authorizer = authorizer; } @Override public void pay(Order order) throws Exception { if (!authorizer.isAuthorized()){ throw new Exception(&quot;Not authorized&quot;); } System.out.println(&quot;Processing paypal payment type&quot;); System.out.println(&quot;Using email address: &quot; + this.emailAddress); order.setStatus(&quot;paid&quot;); } } . The same points of debitPaymentProcessor will apply to this class. Only some changes about authentication and change from security code to email verification. .",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/27/9-SolidPrinciples.html",
            "relUrl": "/python/java/oop/2022/06/27/9-SolidPrinciples.html",
            "date": " • Jun 27, 2022"
        }
        
    
  
    
        ,"post2": {
            "title": "Object Pool code translation in Java",
            "content": "Object Pool code translation in Java . Published by Saman Pordanesh . General Instructions . Object pool pattern is a software creational design pattern which is used in situations where the cost of initializing a class instance is very high. | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better. | This translation is based on the final code source of the Object Creation lessons in python programming languages (object-pool.py). We skipped Object Pool Context and Singleton lessons in this translation for just focusing on Object Pool. | We need a separate class with the main function to run the program, despite Python, in which you can run each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on Java is different. You can find more information here. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project with the same directory with all dependencies can be good practice for OOP designing. | We defined a package name for this project as edu.def.op (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. | However, packages are unnecessary; you could use a default package or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . Implementational Instruction . this lesson will be an easy one in terms of translation. We recommend focusing on Object Pool definition and principles more. You can find good resources on the internet. In addition, these two articles may help 1, 2. | We will create one .java file per class under edu.def.op package. They can be interfaces and child classes or simple classes. | Main.java contains our main () method to run the program. | Note that all steps here are entirely for the best OOP practice in Java programming; They can be done more straightforwardly, but not the best OOP ways. | Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/op/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.op.Main . | If your main function is in a different class, but the name of that class instead of Main at the end of the command | You can find more about compiling instructions here. | . Classes changes . Reusable . Python version . class Reusable: def test(self): print(f&quot;Using object {id(self)}&quot;) . Java version . package edu.def.op; public class Reusable { public void test(){ System.out.println(&quot;Using object &quot; + System.identityHashCode(this)); } } . Not any notable differences. | Controller . Python version . class ReusablePool: def __init__(self, size): self.size = size self.free: List[Reusable] = [] self.in_use: List[Reusable] = [] for _ in range(0, size): self.free.append(Reusable()) def acquire(self) -&gt; Reusable: assert len(self.free) &gt; 0 r = self.free[0] self.free.remove(r) self.in_use.append(r) return r def release(self, r: Reusable): self.in_use.remove(r) self.free.append(r) . Java version . package edu.def.op; import java.util.ArrayList; public class ReusablePool { private int size; private ArrayList&lt;Reusable&gt; free; private ArrayList&lt;Reusable&gt; inUse; ReusablePool(int size){ this.size = size; this.free = new ArrayList&lt;&gt;(); this.inUse = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; size; i++){ this.free.add(new Reusable()); } } public Reusable acquire(){ assert this.free.size() &gt; 0; Reusable r = this.free.get(0); this.free.remove(r); this.inUse.add(r); return r; } public void release(Reusable r){ this.inUse.remove(r); this.free.add(r); } } . In this class, we define all our parameters in the constructor. We just passed a value for size; the two ArrayLists will be designated empty arrays. |",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/24/10-ObjectPool.html",
            "relUrl": "/python/java/oop/2022/06/24/10-ObjectPool.html",
            "date": " • Jun 24, 2022"
        }
        
    
  
    
        ,"post3": {
            "title": "MVC in Java",
            "content": "MVC (Model-View-Controller) code translation in Java . Published by Saman Pordanesh . General Introduction . MVC (Model-View-Controller) is a pattern in software design commonly used to implement user interfaces, data, and controlling logic. It emphasizes the separation between the software’s business logic and display. For more, click here. | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better | This translation is based on the final code source of the MVC lessons in python programming languages (mvc-after-strategy.py). | Point: This translation is much more different from the original Python version’s structure, libraries, and functionalities in this Java version. It’s caused as we have two different libraries for UI (user interface) in Python and Java, which follow different structures. | We need a separate class with the main function to run the program, despite Python, in which you can run each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on Java is different. You can find more information here. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project with the same directory with all dependencies can be good practice for OOP designing. | We defined a package name for this project as edu.def.mvc (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. In addition, we have a sub package edu.def.mvc.uuid for the UUID interface and its children, as far as the strategy is concerned. (Have different strategies for generating different UUIDs) | However, packages are unnecessary; you could use a default package or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . Implementational Instruction . We will create one .java file per class under edu.def.mvc package. They can be interfaces and child classes or simple classes. In addition, in this lesson, we have a sub-package “edu.def.mvc.uuid” in a separate folder on the main package directory to hold a class category that behaves similarly. Learn more about sub-packages here. | In this project, we use Java GUI libraries AWT and Swing, which have a different structure and functionality than Python’s Tkinter library for the same purpose. E.g., we don’t need a loop in the Java version to run the UI, although we need it in the Python version. Complete tutorial about Java GUI with Swing here. | We have three MVC classes: Model.java, Controller.java and View.java**. In addition, we have a class called **SwingView.java, which implements View.java and handle all user interface codes. From that class, we combine all MVC principles to run an application. Finally, the interface GenerateUuid.java and its children Uuid.java, Uuid4.java and UuidString.java are classes to generate different UUIDs, depending on which one we choose on the main () method. | Main.java contains our main () method to run the program. | Note that all steps here are entirely for the best OOP practice in Java programming; They can be done more straightforwardly, but not the best OOP ways. | Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/mvc/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.mvc.Main . | If your main function is in a different class, but the name of that class instead of Main at the end of the command | You can find more about compiling instructions here. | . Classes changes . Model . Python version . class Model: def __init__(self): self.uuid = [] . Java version . package edu.def.mvc; import java.util.ArrayList; import java.util.UUID; /** @author Saman Pordanesh &lt;a href=&quot;mailto:sina.pordanesh@yahoo.com&quot;&gt; sina.pordanesh@yahoo.com&lt;/a&gt; @version 1.0 @since 1.0 */ /** * This is the Model class which should act as a database in this program. * This model is pretty simple, and we can hold the whole data on a simple ArrayList. * In complicated versions, Model class should connect with an external database. */ public class Model { private ArrayList&lt;UUID&gt; uuids; Model(){ uuids = new ArrayList&lt;&gt;(); } public void setUuids(ArrayList&lt;UUID&gt; uuids) { this.uuids = uuids; } public ArrayList&lt;UUID&gt; getUuids() { return uuids; } public void addUuid(UUID uuid){ this.uuids.add(uuid); } public void clearModel(){ this.uuids.clear(); } } . This class required an ArrayList to act as a data holder. We will keep all generated UUIDs in this ArrayList and use them through the program. | As the ArrayList is a private parameter and we need access to it in other classes, we have getter and setter methods for this purpose. In addition, addUuid () is used to add a generated UUID to the model and clearModel () is used to clear the whole model when needed. However, by making the ArrayList a public parameter, we won’t need getter, setter, add and clean functions, but all of them are for best OOP practices. | Controller . Python version . class Controller: def __init__(self, model, view, generate_uuid): self.model = model self.view = view self.generate_uuid = generate_uuid def start(self): self.view.setup(self) self.view.start_main_loop() def handle_click_generate_uuid(self): # generate a uuid and add it to the list self.model.uuid.append(self.generate_uuid()) self.view.append_to_list(self.model.uuid[-1]) def handle_click_clear_list(self): # clear the uuid list in the model and the view self.model.uuid = [] self.view.clear_list() . Java version . /** @author Saman Pordanesh &lt;a href=&quot;mailto:sina.pordanesh@yahoo.com&quot;&gt; sina.pordanesh@yahoo.com&lt;/a&gt; @version 1.0 @since 1.0 */ package edu.def.mvc; import edu.def.mvc.uuid.GenerateUuid; import java.util.UUID; /** * Controller class */ public class Controller { private Model model; private View view; private GenerateUuid generateUuid; Controller(Model model, View view, GenerateUuid uuid){ this.model = model; this.view = view; this.generateUuid = uuid; } //start the initial UI public void start(){ this.view.setup(this); } //handle &quot;Generate UUID&quot; button and public void handleClickGenerateUuid(){ this.model.addUuid(this.generateUuid.generateUuid()); } //handle &quot;Clear list&quot; button and public void handleClickClearList(){ this.model.clearModel(); this.view.clearList(); } //getting the Model object to use its data public Model getModel() { return model; } } . This class controls all actions in the program and acts as a connector between View and Model as well (as you can see, we have both View and Model objects as parameters of this class). | We have a parameter of the GeneratedUuid interface. We pass the GeneratedUuid children to the Controller class by its constructor to define which kind of UUID we want to generate in the application. | In the start () method, we call the setup () method of the View object to start GUI’s engine. | The following method is handleClickGenerateUuid () when the user clicks on the “Generate UUID” button. This method should generate a UUID by generateUuid object and adding it to the model. | The method handleClickClearList () handles the functionality of the “Clear List” button and clears the model entirely. | View . Python version . class View(ABC): @abstractmethod def setup(self, controller): pass @abstractmethod def append_to_list(self, item): pass @abstractmethod def clear_list(self): pass @abstractmethod def start_main_loop(self): pass . Java version . /** @author Saman Pordanesh &lt;a href=&quot;mailto:sina.pordanesh@yahoo.com&quot;&gt; sina.pordanesh@yahoo.com&lt;/a&gt; @version 1.0 @since 1.0 */ package edu.def.mvc; import javax.swing.*; import java.util.UUID; public abstract class View { public abstract void setup(Controller controller); public abstract void appendToList(UUID item); public abstract void clearList(); public abstract void startMainLoop(); } . This class is an abstract with four methods to handle the view of the application. | The setup () method will use to contain and start a GUI engine. | The method appendToList () is a method to run and handle the “Generate UUID” button view on the application. | Also, the method clearList () is a method to run and handle the “Clear List” button view on the application. | Finally, startMainLoop() contains a method to make the frame visible. Unlike Python, in the Java version of GUI, we don’t need a loop to run the application. | SwingView (as TkView in the Python version) . Python version . class TkView(View): def setup(self, controller): # setup tkinter self.root = tk.Tk() self.root.geometry(&quot;400x400&quot;) self.root.title(&quot;UUIDGen&quot;) # create the gui self.frame = tk.Frame(self.root) self.frame.pack(fill=tk.BOTH, expand=1) self.label = tk.Label(self.frame, text=&quot;Result:&quot;) self.label.pack() self.list = tk.Listbox(self.frame) self.list.pack(fill=tk.BOTH, expand=1) self.generate_uuid_button = tk.Button(self.frame, text=&quot;Generate UUID&quot;, command=controller.handle_click_generate_uuid) self.generate_uuid_button.pack() self.clear_button = tk.Button(self.frame, text=&quot;Clear list&quot;, command=controller.handle_click_clear_list) self.clear_button.pack() def append_to_list(self, item): self.list.insert(tk.END, item) def clear_list(self): self.list.delete(0, tk.END) def start_main_loop(self): # start the loop self.root.mainloop() . Java version . /** @author Saman Pordanesh &lt;a href=&quot;mailto:sina.pordanesh@yahoo.com&quot;&gt; sina.pordanesh@yahoo.com&lt;/a&gt; @version 1.0 @since 1.0 */ package edu.def.mvc; import javax.swing.*; import java.awt.*; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.util.UUID; /** * this class handles all three MVC classes to generate a UI application. * It uses Swing &amp; AWT libraries for generating GUI. */ class SwingView extends View implements ActionListener { JFrame frame; TextArea display; JButton createButton; JButton clearButton; Controller controller; @Override public void setup(Controller controller) { // A controller object to control all principles in the program // from a unique class. this.controller = controller; this.frame = new JFrame(); // Create a list for holding all generated uuids // responsive to add and clear by two &quot;generateButton&quot; and // &quot;clearButton&quot; buttons. this.display = new TextArea(&quot;&quot;, 20, 80); this.display.setEditable(false); this.startMainLoop(); // Create two button for generating uuid and append to the list (generateButton) // and clear the least (clearButton) this.createButton = new JButton(&quot;Generate UUID&quot;); this.createButton.addActionListener(this); this.clearButton = new JButton(&quot;Clear List&quot;); this.clearButton.addActionListener(this); JPanel buttonPanel = new JPanel(); buttonPanel.setLayout(new GridLayout(0,2)); buttonPanel.add(this.createButton); buttonPanel.add(this.clearButton); Container content = this.frame.getContentPane(); content.setLayout(new BorderLayout()); content.add(&quot;Center&quot;, this.display); content.add(&quot;South&quot;, buttonPanel); this.frame.setPreferredSize(new Dimension(300, 200)); this.frame.setTitle(&quot;UUID generator&quot;); this.frame.pack(); } @Override public void appendToList(UUID item) { this.display.append(item.toString() + &quot; n&quot;); } @Override public void clearList() { this.display.setText(&quot;&quot;); } @Override public void startMainLoop() { this.frame.setVisible(true); } @Override public void actionPerformed(ActionEvent e) { if(e.getSource() == this.createButton) { this.controller.handleClickGenerateUuid(); Model model = controller.getModel(); this.appendToList(model.getUuids().get(model.getUuids().size()-1)); }else if (e.getSource() == this.clearButton) { this.controller.handleClickClearList(); this.clearList(); } } } . Java’s GUI and Swing library principles are out of this course’s scope. We recommend reading more about Swing library. Also, this and this video may help you to understand better. | As we said, this class inherits the View abstract. As a result, we need to override all methods of that abstract in this child class. | GenerateUuid (plus all three children who are inheriting this interface) . Python version . # functional strategy def generate_uuid1(): return uuid.uuid1() def generate_uuid4(): return uuid.uuid4() def generate_simple_id(): return &#39;&#39;.join(random.choices(string.ascii_lowercase, k=30)) class Model: def __init__(self): self.uuid = [] . Java version . /** @author Saman Pordanesh &lt;a href=&quot;mailto:sina.pordanesh@yahoo.com&quot;&gt; sina.pordanesh@yahoo.com&lt;/a&gt; @version 1.0 @since 1.0 */ package edu.def.mvc.uuid; import java.util.UUID; /** * Interface for all UUIDs generators classes. * Only contains one method for generating a kind of UUIDs. */ public interface GenerateUuid { public UUID generateUuid(); } . //For UUID1 public class Uuid1 implements GenerateUuid{ @Override public UUID generateUuid() { byte[] byteName = { 50, 40, 30, 20, 10 }; return UUID.nameUUIDFromBytes(byteName); } } . //For UUID4 public class Uuid4 implements GenerateUuid{ @Override public UUID generateUuid() { return UUID.randomUUID(); } } . //For UUIDString public class UuidString implements GenerateUuid{ @Override public UUID generateUuid() { return UUID.fromString(&quot;38400000-8cf0-11bd-b23e-10b96e4ef00d&quot;); } } . This interface and its children under a sub package were substituted for three functions in Python language, which are responsible for generating different UUIDs. While this structure could be much simpler without any interface, inheritance, or sub-package, we are following OOP principles for the best practice. | This interface has one method that will be overridden through different child classes. | The generateUuid () method generates different kinds of UUID, which the Java programming language allows us to generate. | We created three other classes based on this interface which are Uuid1.java, Uuid4.java and UuidString.java**, and each of them will generate a different **UUID string. | To generate those UUIDs, we used a native Java library called “java.util.UUID”. We highly recommend reading about it here. |",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/19/8-MVC.html",
            "relUrl": "/python/java/oop/2022/06/19/8-MVC.html",
            "date": " • Jun 19, 2022"
        }
        
    
  
    
        ,"post4": {
            "title": "Template Method & Bridge in Java",
            "content": "Template Method &amp; Bridge code translation in Java . Published by Saman Pordanesh . General Introduction . The Template Method design pattern is to define an algorithm as a skeleton of operations and leave the details to be implemented by the child classes. The parent class preserves the overall structure and sequence of the algorithm. Also, In computer science, bridging describes systems that map the runtime behaviour of different programming languages so they can share common resources. | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better | This translation is based on the final code source of the Template method and Bridge lessons in python programming languages (with-bridge.py). That is the complete file, which contains all principles such as Abstraction, Inheritance, etc. | We need a separate class with the main function to run the program, despite Python, in which you can run each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on Java is different. You can find more information here. | There is a UML.png file in this repository’s folder, which shows relationships between different classes. Please check it as a good reference for understanding this code. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project with the same directory with all dependencies can be good practice for OOP designing. | We defined a package name for this project as edu.def.tmab (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. | However, packages are unnecessary; you could use a default package or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . Implementational Instruction . We will create one .java file per class under edu.def.tmab package. They can be interfaces, abstractions, child classes or simple classes. | After that, we will translate all classes to their belonging files based on the Python source. We will compare them with the original version in the following section. | This article will introduce the Abstract class and method. The abstract is a kind of parent class with both methods and parameters. Methods can be in two different categories; Abstract methods are those that we implement in the abstract class, and all children will inherit them the same as the parent. The other kind of method is just a prototype that shows the return type, name and arguments needed. Still, we will implement the content of the method on each child individually using the override keyword. We implement an abstract class by using the “abstract” keyword at the start of the class definition. | Main.java contains our main() method to run the program. | Note that all steps here are entirely for the best OOP practice in Java programming; They can be done more straightforwardly, but not the best OOP ways. | Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/tmab/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.tmab.Main . | If your main function is in a different class, but the name of that class instead of Main at the end of the command | You can find more about compiling instructions here. | . Classes changes . Exchange . Python version . class Exchange(ABC): @abstractmethod def connect(self): pass @abstractmethod def get_market_data(self, coin: str) -&gt; List[float]: pass . Java version . package edu.def.tmab; import java.util.ArrayList; public interface Exchange { public void connect(); public ArrayList&lt;Float&gt; getMarketData(String coin); } . This class is defined as an interface class, although it was described as an abstract one on the Python version. The reason is that we don’t have an interface class specifically on Python programming languages. Please read about the differences between interface and abstract class. | In this class, we define the prototype of each method that a child will inherit. Then, we will override it at the child class later. | Binance . Python version . class Binance(Exchange): def connect(self): print(f&quot;Connecting to Binance exchange...&quot;) def get_market_data(self, coin: str) -&gt; List[float]: return [10, 12, 18, 14] . Java version . package edu.def.tmab; import java.util.ArrayList; public class Binance implements Exchange{ @Override public void connect() { System.out.println(&quot;Connecting to Binance exchange...&quot;); } @Override public ArrayList&lt;Float&gt; getMarketData(String coin) { return new ArrayList&lt;&gt;(); } } . This is a child class which inherits the interface Exchange. As you can see, we override both interface methods in this class. Also, we don’t have any limitations to adding more parameters and methods in this class beyond the inherited interface. | In the getMarketData() method, we initialized the ArrayList by some numbers differently from Python. This is the proper way to do that In Java. You can find more here. (“f” in front of each number means “float” data type) | Coinbase . Python version . class Coinbase(Exchange): def connect(self): print(f&quot;Connecting to Coinbase exchange...&quot;) def get_market_data(self, coin: str) -&gt; List[float]: return [10, 12, 18, 20] . Java version . package edu.def.tmab; import java.util.ArrayList; public class Coinbase implements Exchange{ @Override public void connect() { System.out.println(&quot;Connecting to Binance exchange...&quot;); } @Override public ArrayList&lt;Float&gt; getMarketData(String coin) { return new ArrayList&lt;&gt;(); } } . The same point as the Binance class. . TradingBot . Python version . class TradingBot(ABC): def __init__(self, exchange: Exchange): self.exchange = exchange def check_prices(self, coin: str): self.exchange.connect() prices = self.exchange.get_market_data(coin) should_buy = self.should_buy(prices) should_sell = self.should_sell(prices) if should_buy: print(f&quot;You should buy {coin}!&quot;) elif should_sell: print(f&quot;You should sell {coin}!&quot;) else: print(f&quot;No action needed for {coin}.&quot;) @abstractmethod def should_buy(self, prices: List[float]) -&gt; bool: pass @abstractmethod def should_sell(self, prices: List[float]) -&gt; bool: pass . Java version . package edu.def.tmab; import java.util.ArrayList; public abstract class TradingBot { private Exchange exchange; TradingBot(Exchange exchange){ this.exchange = exchange; } public void checkPrices(String coin){ this.exchange.connect(); ArrayList&lt;Float&gt; prices = this.exchange.getMarketData(coin); boolean shouldBuy = this.shouldBuy(prices); boolean shouldSell = this.shouldSell(prices); if (shouldBuy){ System.out.println(&quot;You should buy &quot; + coin + &quot;!&quot;); } else if (shouldSell) { System.out.println(&quot;You should sell &quot; + coin + &quot;!&quot;); } else { System.out.println(&quot;No action needed for &quot; + coin + &quot;.&quot;); } } public abstract boolean shouldBuy(ArrayList&lt;Float&gt; prices); public abstract boolean shouldSell(ArrayList&lt;Float&gt; prices); } . This class is an Abstract class, as we discussed at Implementation Instruction. You can see the “abstract” keyword in the class implementation, which is necessary for implementation. | As you can see, we have both implemented method and abstract method (only prototype) methods in this class. We will override all abstract methods for the children who will inherit from. In terms of the implemented method, all children will inherit them precisely with the same functionality we defined for the method in the abstraction class. We won’t override them later. | checkPrices() is a local method, but shouldBuy() and shouldSell() are abstract methods. | As we said before, an abstract class acts like a regular class and can have local methods, parameters, a constructor, and abstract methods. | AverageTrader . Python version . class AverageTrader(TradingBot): def list_average(self, l: List[float]) -&gt; float: return sum(l) / len(l) def should_buy(self, prices: List[float]) -&gt; bool: return prices[-1] &lt; self.list_average(prices) def should_sell(self, prices: List[float]) -&gt; bool: return prices[-1] &gt; self.list_average(prices) . Java version . package edu.def.tmab; import java.util.ArrayList; public class AverageTrader extends TradingBot{ /** * in java, when a class inherits an abstraction parent, we should have the constructor for the parent on the child class as well. The keyword for it is &quot;super&quot;. * @param exchange */ AverageTrader(Exchange exchange) { super(exchange); } public float listAverage(ArrayList&lt;Float&gt; list){ //we don&#39;t have any function to calculate sum of the // item on a list automatically. float sum = 0; for (float item: list){ sum += item; } return sum/list.size(); } @Override public boolean shouldBuy(ArrayList&lt;Float&gt; prices) { // &quot;(prices.size() - 1)&quot; on get() method means getting the last item of the list. return prices.get(prices.size() - 1) &lt; this.listAverage(prices); } @Override public boolean shouldSell(ArrayList&lt;Float&gt; prices) { // &quot;(prices.size() - 1)&quot; on get() method means getting the last item of the list. return prices.get(prices.size() - 1) &gt; this.listAverage(prices); } } . This child inherits the TradingBot abstraction class through the “extends” keyword. | The critical point is that we should first feed the parent’s constructor from this class’s constructor. It can be done by a super() method which takes arguments if the parent’s constructor needs any. You can find out more here. Also, we can initialize more parameters in this constructor if the class has any local ones. | As it is clear, we have two overridden methods, shouldBuy() and shouldSell() , which are abstract methods that belong to the abstract parent. In addition, we have a local method listAverage() . | MinMaxTrader . Python version . class MinMaxTrader(TradingBot): def should_buy(self, prices: List[float]) -&gt; bool: return prices[-1] == min(prices) def should_sell(self, prices: List[float]) -&gt; bool: return prices[-1] == max(prices) . Java version . package edu.def.tmab; import java.util.ArrayList; import java.util.Collections; import java.util.Objects; public class MinMaxTrader extends TradingBot{ /** * in java, when a class inherits an abstraction parent, we should have the constructor for the parent on the child class as well. The keyword for it is &quot;super&quot;. * @param exchange */ MinMaxTrader(Exchange exchange) { super(exchange); } @Override public boolean shouldBuy(ArrayList&lt;Float&gt; prices) { // &quot;(prices.size() - 1)&quot; on get() method means getting the last item of the list. //Also, Collections.min() will find the maximum item in a list return Objects.equals(prices.get(prices.size() - 1), Collections.min(prices)); } @Override public boolean shouldSell(ArrayList&lt;Float&gt; prices) { // &quot;(prices.size() - 1)&quot; on get() method means getting the last item of the list. //Also, Collections.max() will find the maximum item in a list. return prices.get(prices.size() - 1) == Collections.max(prices); } } . The same points as AverageTrader class. .",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/19/6-TemplateMethodAndBridge.html",
            "relUrl": "/python/java/oop/2022/06/19/6-TemplateMethodAndBridge.html",
            "date": " • Jun 19, 2022"
        }
        
    
  
    
        ,"post5": {
            "title": "The Strategy Pattern in Java",
            "content": "The Strategy Pattern code translation in Java . Published by Saman Pordanesh . General Introduction . Strategy is a behavioral design pattern that lets you define a family of algorithms, put each of them into a separate class, and make their objects interchangeable. | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better | This translation is based on the final code source of Strategy Pattern lessons in python programming languages (strategy-after.py) Point: This part was done in two different (oop &amp; functional) methods. This translation is based on the oop method, and we didn’t translate the functional one, as that method doesn’t work in Java very well, although in Python may work well. | We need a separate class with the main function to run the program, despite Python, in which you can run each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on java is different. You can find more information here. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project by an exact directory with all dependencies can be a good practce OOP designing. | We defined a package name for this project as edu.def.sp (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. | However, packages are not necessary, you could use a default package, or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . Implementational Instruction . We will create one .java file per class under edu.def.sp package. | As we have different ordering methods, we’ll define one class per each ordering way. They all inherit an interface (TicketOrderingStrategy.java) that contains only one ordering method (createOrdering.java). | As mentioned, one class for each ordering method is needed, which will be: FIFOOrderingStrategy.java – FILOOrderingStrategy.java - RandomOrderingStrategy.java – BlackHoleStrategy.java . | When creating other classes (SuportTicket.java &amp; CustomSupport.java), we need Main.java to contain our main function to run the program. | After that, we will translate all classes to their belonging files based on the Python source. We will compare them with the original version in the following section. | Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/sp/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.sp.Main . If your main function is in a different class, put the name of that class instead of Main at the end of the command . | You can find more about compiling instruction here | . Classes changes . SupportTicket . Python version . class SupportTicket: def __init__(self, customer, issue): self.id = generate_id() self.customer = customer self.issue = issue def generate_id(length=8): # helper function for generating an id return &#39;&#39;.join(random.choices(string.ascii_uppercase, k=length)) . Java version . package edu.def.sp; import java.util.Random; public class SupportTicket { private String id; private String customer; private String issue; SupportTicket(String customer, String issue){ this.id = getSaltString(&quot;uppercase&quot;, 8); this.customer = customer; this.issue = issue; } public String getId() { return id; } public String getCustomer() { return customer; } public String getIssue() { return issue; } /** * As we dont have a simple function to arrange a random string on Java, we are implementing * this helper method to help us create one. * It acts like &quot;random.choices&quot; in Python * @param ascii * @return */ private String getSaltString(String ascii, int length) { //char sets based on the incoming argument String SALTCHARS; switch (ascii){ case &quot;uppercase&quot;: SALTCHARS = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;; break; case &quot;lowercase&quot;: SALTCHARS = &quot;abcdefghijklmnopqrstuvwxyz&quot;; break; case &quot;digits&quot;: SALTCHARS = &quot;1234567890&quot;; break; default: SALTCHARS = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890&quot;; } StringBuilder salt = new StringBuilder(); Random rnd = new Random(); while (salt.length() &lt; length) { // length of the random string. int index = (int) (rnd.nextFloat() * SALTCHARS.length()); salt.append(SALTCHARS.charAt(index)); } return salt.toString(); } } . This is a class for creating tickets with three parameters id, customer, issue, and three getters for each parameter. As we are defining the parameter values on the constructor and won’t need to change them separately later, we don’t have a setter method for any parameter. Aslo, we can access parameters directly by making them public, but we use private parameters as an OOP designing principle. | The constructor received two arguments for customer and issue, but Id will be valued by generating a random string generator. | The only private method used to generate a random string with a specified size (we need to define this function as we don’t have any predefined method to do that in Java, although Python has). | TicketOrderingStrategy . Python version . class TicketOrderingStrategy(ABC): @abstractmethod def create_ordering(self, list: List[SupportTicket]) -&gt; List[SupportTicket]: pass . Java version . package edu.def.sp; import java.util.ArrayList; public interface TicketOrderingStrategy { /** * A function which receives a list and return another list based on the ordering type. * @param list: an argument of ArrayList data type which contains SupportTicket objects * @return: the same data type of incoming argument, but with different ordering */ public ArrayList&lt;SupportTicket&gt; createOrdering(ArrayList&lt;SupportTicket&gt; list); } . This is the interface we discussed at instruction, which all other ordering classes will inherit. We will override this interface’s createOrdering() method in all those classes. | As we can see, the creatingOrdering() method’s prototype defines which arguments are needed for this method and what will be its return value data type. | FIFOOrderingStrategy . Python version . class FIFOOrderingStrategy(TicketOrderingStrategy): def create_ordering(self, list: List[SupportTicket]) -&gt; List[SupportTicket]: return list.copy() . Java version . package edu.def.sp; import java.util.ArrayList; public class FIFOOrderingStrategy implements TicketOrderingStrategy{ @Override public ArrayList&lt;SupportTicket&gt; createOrdering(ArrayList&lt;SupportTicket&gt; list) { return (ArrayList&lt;SupportTicket&gt;) list.clone(); } } . This class is one of the ordering ways classes implemented(inherited) from the TicketSupportingStrategy interface. | We have overridden the interface’s method as our desire for this class of ordering. | The list is already in order in this ordering method (first in, first out) der. You need to return it by creating a copy through the clone method. | Clone: clone() is a method to deeply copy an object in Java programming languages. When we use the “=” sign to copy an object, we are putting the address of the source (obj1) object to the destination (obj2); this means that if we change the boj1’s value, obj2’s value will be adjusted consequently. But with the clone() method, we can create an independent copy of obj1 and assign it to the obj2, although still, we can do more about making a completely separate copy, which is out of the scope of this article. Please click here for more. | FILOOrderingStrategy . Python version . class FILOOrderingStrategy(TicketOrderingStrategy): def create_ordering(self, list: List[SupportTicket]) -&gt; List[SupportTicket]: list_copy = list.copy() list_copy.reverse() return list_copy . Java version . package edu.def.sp; import java.util.ArrayList; import java.util.Collection; import java.util.Collections; public class FILOOrderingStrategy implements TicketOrderingStrategy{ @Override public ArrayList&lt;SupportTicket&gt; createOrdering(ArrayList&lt;SupportTicket&gt; list) { //clone() reates a partial deep copy of the object ArrayList&lt;SupportTicket&gt; listCopy = (ArrayList&lt;SupportTicket&gt;) list.clone(); //a function to reverse an ArrayList Collections.reverse(listCopy); return listCopy; } } . Most of the FIFOOrderingStrategy’s points are applicable here. . In this ordering class, after making a copy of the list by clone, we should reverse the list because of our ordering way (first in, last out). We did it using the Collection class and its method reverse(), which reversed the list and returned it. | RandomOrderingStrategy . Python version . class RandomOrderingStrategy(TicketOrderingStrategy): def create_ordering(self, list: List[SupportTicket]) -&gt; List[SupportTicket]: list_copy = list.copy() random.shuffle(list_copy) return list_copy . Java version . package edu.def.sp; import java.util.ArrayList; import java.util.Collections; public class RandomOrderingStrategy implements TicketOrderingStrategy{ @Override public ArrayList&lt;SupportTicket&gt; createOrdering(ArrayList&lt;SupportTicket&gt; list) { ArrayList&lt;SupportTicket&gt; listCopy = (ArrayList&lt;SupportTicket&gt;) list.clone(); //shuffle the list randomly Collections.shuffle(listCopy); return listCopy; } } . Most of the FIFOOrderingStrategy’s points are applicable here. . In this ordering class, after making a copy of the list by clone, we should shuffle the list because of our ordering way (random). We did it using a class called Collection and its method shuffle(), which shuffled the list and returned it. | BlackHoleStrategy . Python version . class BlackHoleStrategy(TicketOrderingStrategy): def create_ordering(self, list: List[SupportTicket]) -&gt; List[SupportTicket]: return [] . Java version . package edu.def.sp; import java.util.ArrayList; public class BlackHoleStrategy implements TicketOrderingStrategy{ @Override public ArrayList&lt;SupportTicket&gt; createOrdering(ArrayList&lt;SupportTicket&gt; list) { //just return an empty ArrayList return new ArrayList&lt;&gt;(); } } . Most of the FIFOOrderingStrategy’s points are applicable here. . This class returns an empty ArrayList&lt;&gt;() when we’ll need it for any reason. | CustomerSupport . Python version . class CustomerSupport: def __init__(self, processing_strategy: TicketOrderingStrategy): self.tickets = [] self.processing_strategy = processing_strategy def create_ticket(self, customer, issue): self.tickets.append(SupportTicket(customer, issue)) def process_tickets(self): # create the ordered list ticket_list = self.processing_strategy.create_ordering(self.tickets) # if it&#39;s empty, don&#39;t do anything if len(ticket_list) == 0: print(&quot;There are no tickets to process. Well done!&quot;) return # go through the tickets in the list for ticket in ticket_list: self.process_ticket(ticket) def process_ticket(self, ticket: SupportTicket): print(&quot;==================================&quot;) print(f&quot;Processing ticket id: {ticket.id}&quot;) print(f&quot;Customer: {ticket.customer}&quot;) print(f&quot;Issue: {ticket.issue}&quot;) print(&quot;==================================&quot;) . Java version . package edu.def.sp; import java.util.ArrayList; public class CustomerSupport { private ArrayList&lt;SupportTicket&gt; tickets; private TicketOrderingStrategy processingStrategy; CustomerSupport(TicketOrderingStrategy processingStrategy){ tickets = new ArrayList&lt;&gt;(); this.processingStrategy = processingStrategy; } public void createTicket(String customer, String issue){ tickets.add(new SupportTicket(customer, issue)); } public void processTickets(){ ArrayList&lt;SupportTicket&gt; ticketList = this.processingStrategy.createOrdering(this.tickets); if (ticketList.size() == 0){ System.out.println(&quot;There are no tickets to process. Well done!&quot;); return; } for (SupportTicket ticket: ticketList){ this.processTicket(ticket); } } /** * As it has only internal usage, we can define this function as a private one. * @param ticket */ private void processTicket(SupportTicket ticket){ System.out.println(&quot;==================================&quot;); System.out.println(&quot;Processing ticket id: &quot; + ticket.getId()); System.out.println(&quot;Customer: &quot; + ticket.getCustomer()); System.out.println(&quot;Issue: &quot; + ticket.getIssue()); System.out.println(&quot;==================================&quot;); } } . This class is the heart of the application; create customers ArrayList, add tickets to it, process tickets and show them to the user by any request. | We have two private parameters whose value will be assigned to them in the class’s constructor. | In the constructor, we pass an object of the TicketOrderingStrategy interface, which is a non-primitive data type. This object will define the ordering in this class. Also, we are creating a new ArrayList object in this constructor. | In the createTickets () public method, we create a SupportTicket object and add it to the tickets ArrayList. | In the proccessTicket() method, we are ordering the ticket ArrayList by passing this list to the processingStrategy object’s method (createOrdering()). This will return the desired ordered list, and the ticket - ArrayList will be replaced. Then, we will start to print each list entry by passing them to the processTicket() method. |",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/19/3-StrategyPattern.html",
            "relUrl": "/python/java/oop/2022/06/19/3-StrategyPattern.html",
            "date": " • Jun 19, 2022"
        }
        
    
  
    
        ,"post6": {
            "title": "Dependency Inversion in Java",
            "content": "Dependency Inversion principles code translation in Java . Published by Saman Pordanesh . General Introduction . This topic discusses how we can implement some object-oriented definitions like Abstraction or Interfaces in a language like a python which doesn’t have these definitions locally. As Java is a strong OOP language, we already have these definitions for it. We will implement the translation of the video’s code here to understand how these principles work on Java. | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better | This translation is based on the final code source of Dependency Inversion lessons in python programming languages (dependency-inversion-after.py) | We need a separate class with the main function to run the program, despite Python, in which you can run each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on java is different. You can find more information here. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project with an exact directory with all dependencies can be good practice for OOP designing. | We defined a package name for this project as edu.def.di (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. | However, packages are not necessary, you could use a default package, or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . Implementational Instruction . we create one .java file per each class under edu.def.di package. | We are going to discuss Switchable class more here. This class is an interface class and we use the “interface” keyword instead of “class”. But why this is an interface? The answer is that this class just contains the prototypes of methods without any implementation. It is an index which shows a specific structure but can have different functionality when we override it on the child class. Please read about the interface on OOP and interface on java. | When we created other classes (LightBulb.java, Fan.java, ElectricPowerSwitch.java), we need Main.java to contain our main function to run the program. | After that, we will start to translate all classes to their belonging files based on the Python source. We will compare all of them with the original version in the following section. | Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/di/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.di.Main . If your main function is in a different class, put the name of that class instead of Main at the end of the command . | You can find more about compiling instruction here | . Classes changes . Switchable . Python version . class Switchable(ABC): @abstractmethod def turn_on(self): pass @abstractmethod def turn_off(self): pass . Java version . package edu.def.di; public interface Switchable { void turnOn(); void turnOff(); } . This class is the main lesson for this session, as we are talking about interface and Switchable is an interface class. As we can see, we implemented it with “interface” keyword and it just contains prototype of each method, without any implementation or parameter. | As we don’t have interface in python, this class needs to inherit ABC class to act like an abstract class, although in Java we already have abstract and interface definitions locally. (in python version he used “@abstractmethod” keyword to show that they are abstract methods. Also, there are differences between abstract and interface which recommend learning about them.) | Its child classes will inherit all methods from it, and we will implement all methods at child classes under the “@Override” keyword. | As we talked about it before, we don’t need any implementation for both turnOn and turnOff methods at the interface. | LightBulb . Python version . class LightBulb(Switchable): def turn_on(self): print(&quot;LightBulb: turned on...&quot;) def turn_off(self): print(&quot;LightBulb: turned off...&quot;) . Java version . package edu.def.di; public class LightBulb implements Switchable{ @Override public void turnOn() { System.out.println(&quot;LightBulb: turned on...&quot;); } @Override public void turnOff() { System.out.println(&quot;LightBulb: turned off...&quot;); } } . This is one of the Switchable children which is inheriting all methods from its parent class. | “Implements Switchable” is the keyword for inheritance. | As its obvious, all methods from interface parent are being overriding in this class, although we can have more methods and parameters in this class which don’t have any connection whith the parent class. | Notice that in python version we simply use general inheritance implementation and redefine all methods without any keyword. | Fan . Python version . class Fan(Switchable): def turn_on(self): print(&quot;Fan: turned on...&quot;) def turn_off(self): print(&quot;Fan: turned off...&quot;) . Java version . package edu.def.di; public class Fan implements Switchable{ @Override public void turnOn() { System.out.println(&quot;Fan: turned on...&quot;); } @Override public void turnOff() { System.out.println(&quot;Fan: turned off...&quot;); } } . The same points as LightBulb class. . ElectricPowerSwitch . Python version . class ElectricPowerSwitch: def __init__(self, c: Switchable): self.client = c self.on = False def press(self): if self.on: self.client.turn_off() self.on = False else: self.client.turn_on() self.on = True . Java version . package edu.def.di; public class ElectricPowerSwitch { private Switchable client; private boolean on = false; ElectricPowerSwitch(Switchable client){ this.client = client; } public void press(){ if (on){ client.turnOff(); on = false; } else { client.turnOn(); on = true; } } } . This is a general class with specific functionality to act as an electric device. We will define the kind of device by passing related object to this class (this is an Aggregation relationship. More here). | We have two parameters. The first one (client) is a non-primary data type with type of Switchable and we will define its value on the class constructor. The second one (on) is a primary data type Boolean with a default value of false. In addition a public method press. |",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/19/2-DependencyInversion.html",
            "relUrl": "/python/java/oop/2022/06/19/2-DependencyInversion.html",
            "date": " • Jun 19, 2022"
        }
        
    
  
    
        ,"post7": {
            "title": "Cohesion and Coupling in Java",
            "content": "Cohesion and Coupling principles code translation in Java . Published by Saman Pordanesh . Introduction . Cohesion is used to indicate the degree to which a class has a single, well-focused purpose. Coupling is all about how classes interact with each other; on the other hand, cohesion focuses on how the single class is designed. Higher the cohesiveness of the class, the better is the OO design. Benefits of Higher Cohesion: Highly cohesive classes are much easier to maintain and less frequently changed. | Such classes are more usable than others as they are designed with a well-focused purpose. | . | You need to watch the video first, understand all principles, and then look at the translation codes in Java. This documentation will help you to understand the translation better | This translation is based on the final code source of Cohesion and Coupling lessons in python programming languages (coupling-cohesion-after.py) | We need a separate class with the main function to run the program, despite Python, in which you can run each .py file individually. Main.java is the file with the main function for that purpose. | Standard naming on java is different. You can find more information here. | . Directories changes . This is one of the most significant changes we made to our translation. A Java project with an exact directory with all dependencies can be good practice for OOP designing. | We defined a package name for this project as edu.def.cac (package naming standards) and its specific directory under the src folder. This package name keeps all project components connected to gather when we implement them on different .java files. | However, packages are not necessary, you could use a default package, or even have all classes in the same file; this is more Java best practice. | More information about Java’s project directory standards is here. | . Compiling Instruction . Run the command prompt inside the src folder. | Run the following command to compile all .java files: javac edu/def/cac/*.java . | To execute the program, we should run the Main.java file from the command prompt. To do this, from the same directory, run the following command on the command prompt: java edu.def.cac.Main . If your main function is in a different class, put the name of that class instead of Main at the end of the command . | You can find more about compiling instruction here | . Classes changes . VehicleInfo . Python version . class VehicleInfo: def __init__(self, brand, electric, catalogue_price): self.brand = brand self.electric = electric self.catalogue_price = catalogue_price def compute_tax(self): tax_percentage = 0.05 if self.electric: tax_percentage = 0.02 return tax_percentage * self.catalogue_price def print(self): print(f&quot;Brand: {self.brand}&quot;) print(f&quot;Payable tax: {self.compute_tax()}&quot;) . Java version . package edu.def.cac; /** * A class with 3 private parameters and two public * methods. Also, a constructor with 3 arguments. */ public class VehicleInfo { private String brand; private boolean electric; private int cataloguePrice; VehicleInfo(String brand, boolean electric, int cataloguePrice){ this.brand = brand; this.electric = electric; this.cataloguePrice = cataloguePrice; } /** * * @return a double which is the computed tax. */ public double computeTax(){ double taxPercentage = 0.05; if (electric){ taxPercentage = 0.02; } return taxPercentage * cataloguePrice; } /** * */ public void print(){ System.out.println(&quot;Brand: &quot; + this.brand); System.out.println(&quot;Payable tax: &quot; + this.computeTax()); } } . we defined three private parameters in this class, and their values will be determined by the class instructor when we initialize the class. getters and setters for each private parameter, are not required, you can access fields directly by making parameters public in Java as well, but it’s (private parameters) frequently done in Java as an OOP principle. Still, as we won’t need direct access to any parameters in future, we do not implement them here (it’s acceptable). | Be careful that we specify all data types when we initialize them, although it’s unnecessary for python. | We can add strings together for printing by the “+” sign, although we used formatted string to do that on python. | Vehicle . Python version . class Vehicle: def __init__(self, id, license_plate, info): self.id = id self.license_plate = license_plate self.info = info def print(self): print(f&quot;Id: {self.id}&quot;) print(f&quot;License plate: {self.license_plate}&quot;) self.info.print() . Java version . package edu.def.cac; /** * Public class Vehicle with 3 private parameters * and one public method. Plus a constructor with * 3 arguments. */ public class Vehicle { private String id; private String licensePlate; private VehicleInfo info; Vehicle(String id, String licensePlate, VehicleInfo info){ this.id = id; this.licensePlate = licensePlate; this.info = info; } public void print(){ System.out.println(&quot;Id: &quot; + this.id); System.out.println(&quot;License plate: &quot; + this.licensePlate); this.info.print(); } } . A simple class which has three parameters. As we explained in the previous class, we defined all of them as “private” without any getter and setter. | The same point about joining strings together for printing in the print function. | VehicleRegistry . Python version . class VehicleRegistry: def __init__(self): self.vehicle_info = { } self.add_vehicle_info(&quot;Tesla Model 3&quot;, True, 60000) self.add_vehicle_info(&quot;Volkswagen ID3&quot;, True, 35000) self.add_vehicle_info(&quot;BMW 5&quot;, False, 45000) self.add_vehicle_info(&quot;Tesla Model Y&quot;, True, 75000) def add_vehicle_info(self, brand, electric, catalogue_price): self.vehicle_info[brand] = VehicleInfo(brand, electric, catalogue_price) def generate_vehicle_id(self, length): return &#39;&#39;.join(random.choices(string.ascii_uppercase, k=length)) def generate_vehicle_license(self, id): return f&quot;{id[:2]}-{&#39;&#39;.join(random.choices(string.digits, k=2))}-{&#39;&#39;.join(random.choices(string.ascii_uppercase, k=2))}&quot; def create_vehicle(self, brand): id = self.generate_vehicle_id(12) license_plate = self.generate_vehicle_license(id) return Vehicle(id, license_plate, self.vehicle_info[brand]) . Java version . package edu.def.cac; import java.util.HashMap; import java.util.Random; public class VehicleRegistry { /** * We use HashMap in java when we want to have a data structure as shows Key -&gt; Value * here, the key is the car&#39;s brand and its is a VehicleInfo object */ HashMap&lt;String, VehicleInfo&gt; vehicleInfo = new HashMap&lt;&gt;(); VehicleRegistry(){ //Saturating the HashMap on constructor this.addVehicleInfo(&quot;Tesla Model 3&quot;, true, 60000); this.addVehicleInfo(&quot;Volkswagen ID3&quot;, true, 35000); this.addVehicleInfo(&quot;BMW 5&quot;, false, 45000); this.addVehicleInfo(&quot;Tesla Model Y&quot;, true, 75000); } public void addVehicleInfo(String brand, boolean electric, int cataloguePrice){ /*create an entry for the HashMap which the Key is String type and the Vale is a non-primary data type VehicleInfo */ this.vehicleInfo.put(brand, new VehicleInfo(brand, electric, cataloguePrice)); } public String generateVehicleId(int length){ return getSaltString(&quot;uppercase&quot;, length); } public String generateVehicleLicense(String id){ return id.substring(0, 2) + &quot;-&quot; + getSaltString(&quot;digits&quot;, 2) + &quot;-&quot; + getSaltString(&quot;uppercase&quot;, 2); } public Vehicle createVehicle(String brand){ String id = generateVehicleId(12); String licensePlate = generateVehicleLicense(id); return new Vehicle(id, licensePlate, vehicleInfo.get(brand)); } /** * As we dont have a simple function to arrange a random string on Java, we are implementing * this helper method to help us create one. * It acts like &quot;random.choices&quot; in Python * @param ascii * @return */ protected String getSaltString(String ascii, int length) { //char sets based on the incoming argument String SALTCHARS; switch (ascii){ case &quot;uppercase&quot;: SALTCHARS = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;; break; case &quot;lowercase&quot;: SALTCHARS = &quot;abcdefghijklmnopqrstuvwxyz&quot;; break; case &quot;digits&quot;: SALTCHARS = &quot;1234567890&quot;; break; default: SALTCHARS = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890&quot;; } StringBuilder salt = new StringBuilder(); Random rnd = new Random(); while (salt.length() &lt; length) { // length of the random string. int index = (int) (rnd.nextFloat() * SALTCHARS.length()); salt.append(SALTCHARS.charAt(index)); } return salt.toString(); } } . In this class, we are using vehicleInfo HashMap as an alternative data structure for Python’s dictionary. HashMap is a data structure which allows us to define a key for a specific value and get access to that value with the key in future (key -&gt; value). In this class, we use a car’s brand as a key and attach it to belonging vehicle information (value). As a result, we will be able to access each car’s brand information through key -&gt; value. In addition, this parameter is a private one. | ` `We initialized vehicleInfo with some data at the class construction VehicleRegistry. This isn’t a good and professional way to saturate a hash map, but it works in this example just for educational purposes. | The function addVehicleInfo is for adding new data to the vehicleInfo HashMap by getting three arguments. The first argument will be the key on the HashMap, and the others will be used to initialize an object from VehicleInfo class. As you can see, vehicleInfo.put(key, value) is a function to add an entry to the HashMap. | At the function generateVicleId, we see a significant difference between the Java version and the Python one. We need to define the getSaltString helper method to generate random strings based on the three categories of ASCII characters (uppercase, lowercase, digits). However, we already have a predefined function to do this in Python. In this function, we need to return a random string of uppercase characters with the size of length, which is the function’s argument. . | At generateVehicleLicense, we create a specific string format. By the substring() method, we can split a particular part of a string. It’s identical to Python’s string[start, end] method. | As we said before, getSaltString is a helper method to generate random strings based on specific size and type. You can find more here. | Application . Python version . class Application: def register_vehicle(self, brand: string): # create a registry instance registry = VehicleRegistry() vehicle = registry.create_vehicle(brand) # print out the vehicle information vehicle.print() . Java version . package edu.def.cac; public class Application { /** * to put all different components togather and create an application for a specific brand of car. * @param brand: main input to create an application. */ public void registerVehicle(String brand){ VehicleRegistry registry = new VehicleRegistry(); Vehicle vehicle = registry.createVehicle(brand); vehicle.print(); } } . This class, with a simple public function, is created to put all other classes and their method together to lunch an application. The only argument that the registerVehicle method needs is a car’s brand string. |",
            "url": "https://de-fellows.github.io/RexCoding/python/java/oop/2022/06/19/1-CohesionAndCoupling.html",
            "relUrl": "/python/java/oop/2022/06/19/1-CohesionAndCoupling.html",
            "date": " • Jun 19, 2022"
        }
        
    
  
    
        ,"post8": {
            "title": "Create Your First Social Media Site with Flask",
            "content": "Principles for Educators . 2. Make the game worth playing . Nowadays, the majority of students spend hours a day on social media. It is an extremely valuable communication tool that many rely on to spread information and the opportunity to connect with people worldwide. This blog will teach you how you can create and deploy your own website that will allow anyone on the world wide web to share posts - no matter their location. . Structuring Your Packages with Flask Blueprint . To minimize potential errors in your code and avoid long hours of fustration, it is important that programmers understand how to effectively organize their files in their directory. Flask Blueprint allows users to organize their application into small packages. . This is how we will be organizing our code: . Create a new folder on your computer. Lets name it FlaskWebPage. Open this folder in a code editor such as Visual Studio Code. | Within your directory, create a folder named webpage. | Within this folder, make a file named __ init__.py and another named models.py. | Within your webpage folder, create a folder named templates. This will be where we store the files that contain the HTML elements that describes the content and layout for each of our pages. | Create another folder within the webpage folder and name it static. This is where we will be storing user&#39;s profile pictures and our CSS file which will allow us to customize and style our website. This type of file is considered static because they do not change while our program is running. | Make three more folders in the webpage folder named, users (a module containing code to create, update, and validate the user&#39;s account), posts (a module containing code to allow users to create posts), and main (a module containing code to display the posts on the feed page of our website). | Within each the users, posts, and main files, make __ init__.py and routes.py files. __ init__.py file lets the application know that the file it is contained in is a module. routes.py file creates the different URLs for the different functions and pages on the website. | This is how your files should be structures. . ├── webpage │ ├── static │ ├── templates │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── routes.py │ ├── __init__.py │ ├── models.py . Implementing Blueprint . Within each module, we need to create a Blueprint instance. . In the main __ init__.py file, create a Blueprint instance with the following code: . from flask import Blueprint main = Blueprint(&#39;main&#39;, __name__) . Similarly, for the posts and users __ init__.py files, use the same code to create Blueprint instances, however, replace &quot;main&quot; with the module name. . Within posts __ init__.py file: . from flask import Blueprint posts = Blueprint(&#39;posts&#39;, __name__) . Within users __ init__.py file: . from flask import Blueprint user = Blueprint(&#39;user&#39;, __name__) . Open the webage __ init__.py&lt;/code&gt;&lt;/i&gt; file. We will be importing the blueprint instances we created from each module, then registering them with the following code:&lt;/h4&gt; from flask import Flask app = Flask(__name__) from webpage.users.routes import users from webpage.posts.routes import posts from webpage.main.routes import main app.register_blueprint(users) app.register_blueprint(posts) app.register_blueprint(main) . app = Flask(__ name__) is used in every Flask app in order to inherit the attributes and methods from the Flask class. . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Virtual Environment . It is important that we are programming in a virtual environment to avoid instally Python packages globally. This will save us some time and make deploying our flask application easier. . Steps: . Ensure the virtual environment package is installed on VSCode by typing in the terminal “pip install virtualenv”. | Create your virtual environment by typing “virtualenv env” | Activate your virtual environment with “env Scripts activate.bat” or for a MacBook “source env/bin/activate”. Ensure your virtual environment is activate when you install packages. This will be beneficial when creating your requirements.txt&lt;/code&gt;&lt;/i&gt; file when we cover Deploying your Website.&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ol&gt; Here is a list of packages you will need to install:BareNecessities==0.2.8 . bcrypt==3.2.2 blinker==1.4 cffi==1.15.0 click==8.1.3 colorama==0.4.5 dnspython==2.2.1 email-validator==1.2.1 Flask==2.1.2 Flask-Bcrypt==1.0.1 Flask-Login==0.6.1 Flask-Mail==0.9.1 Flask-SQLAlchemy==2.5.1 Flask-WTF==1.0.1 greenlet==1.1.2 gunicorn==20.1.0 idna==3.3 importlib-metadata==4.11.4 itsdangerous==2.1.2 Jinja2==3.1.2 Mail==2.1.0 MarkupSafe==2.1.1 Pillow==9.1.1 psycopg2==2.9.3 pycparser==2.21 SQLAlchemy==1.4.37 Werkzeug==2.1.2 WTForms==3.0.1 zipp==3.8.0 . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Templates (HTML) . Templates allow you to create the content and layout of the different pages of your website with its own HTML file. In this section, you will learn how to create a parent and child template. Throughout the blog, you will need to make a unique child template for every page on your website. . Within your templates folder, create three files: a file named layout.html, and a file named feed.html. . ├── webpage │ ├── static │ ├── templates │ │ ├── feed.html │ │ ├── layout.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── routes.py │ ├── __init__.py │ ├── models.py . Parent Template . The layout.html file will be the parent template, providing a base containing the common elements of our website. The other templates (child templates) will inherit these common elements. . This is the code we will be working with in our layout.html file: . &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;!-- Required meta tags --&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt; &lt;!-- Bootstrap CSS --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot; integrity=&quot;sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm&quot; crossorigin=&quot;anonymous&quot;&gt; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;{{ url_for(&#39;static&#39;, filename=&#39;main.css&#39;) }}&quot;&gt; {% if title %} &lt;title&gt;Flask Scoial Media- {{ title }}&lt;/title&gt; {% else %} &lt;title&gt;Flask Social Media&lt;/title&gt; {% endif %} &lt;/head&gt; &lt;body&gt; &lt;header class=&quot;site-header&quot;&gt; &lt;nav class=&quot;navbar navbar-expand-md navbar-dark bg-steel fixed-top&quot;&gt; &lt;div class=&quot;container&quot;&gt; &lt;a class=&quot;navbar-brand mr-4&quot; href=&quot;/&quot;&gt;Flask Social Media&lt;/a&gt; &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarToggle&quot; aria-controls=&quot;navbarToggle&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt; &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarToggle&quot;&gt; &lt;div class=&quot;navbar-nav mr-auto&quot;&gt; &lt;a class=&quot;nav-item nav-link&quot; href=&quot;{{ url_for(&#39;main.feed&#39;) }}&quot;&gt;Feed&lt;/a&gt; &lt;/div&gt; &lt;!-- Navbar Right Side --&gt; &lt;div class=&quot;navbar-nav&quot;&gt; {% if current_user.is_authenticated %} &lt;a class=&quot;nav-item nav-link&quot; href=&quot;{{ url_for(&#39;posts.new_post&#39;) }}&quot;&gt;New Post&lt;/a&gt; &lt;a class=&quot;nav-item nav-link&quot; href=&quot;{{ url_for(&#39;users.account&#39;) }}&quot;&gt;Account&lt;/a&gt; &lt;a class=&quot;nav-item nav-link&quot; href=&quot;{{ url_for(&#39;users.logout&#39;) }}&quot;&gt;Logout&lt;/a&gt; {% else %} &lt;a class=&quot;nav-item nav-link&quot; href=&quot;{{ url_for(&#39;users.login&#39;) }}&quot;&gt;Login&lt;/a&gt; &lt;a class=&quot;nav-item nav-link&quot; href=&quot;{{ url_for(&#39;users.register&#39;) }}&quot;&gt;Register&lt;/a&gt; {% endif %} &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/nav&gt; &lt;/header&gt; &lt;main role=&quot;main&quot; class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-8&quot;&gt; {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in messages %} &lt;div class=&quot;alert alert-{{ category }}&quot;&gt; {{ message }} &lt;/div&gt; {% endfor %} {% endif %} {% endwith %} {% block content %}{% endblock %} &lt;/div&gt; &lt;/div&gt; &lt;/main&gt; &lt;!-- Optional JavaScript --&gt; &lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt; &lt;script src=&quot;https://code.jquery.com/jquery-3.2.1.slim.min.js&quot; integrity=&quot;sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js&quot; integrity=&quot;sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js&quot; integrity=&quot;sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; . . Using Bootstrap for your templates, can make designing your web page quicker and easier. I used their Starter Template from their official website: Bootstrap website. . To link the CSS file that we will be creating in the Design Your Website (CSS) section, use link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&quot; to indicate that the location of our stylesheet will be in the static folder in the file main.css which we will be creating later on in blog. . div class=&#8221;alert alert-&#8221; will allow us to send out alerts to the user on our webpage every time the user successfully fills out a form such as signing up, logging in, creating posts, or updating their account. In our layout.html , we have to use get_flashed_messages() to return the category. Here is an example of an alert: . nav class=&#8221;navbar navbar-expand-md navbar-dark bg-steel fixed-top&#8221; creates a navigation bar at the top of our webpage. We can display the title of our site using class=&quot;navbar-brand mr-3&quot; href=&quot;/&quot;&gt;Flask Social Media. . On the left side of the navigation bar, we can add links to the home and about page by using div class=&#8221;navbar-nav mr-auto&#8221;. . On the right side of the navigation bar, we can add links to the login and register page by using div class=&#8221;navbar-nav&#8221;. . {% block content %}{% endblock %} is used for overriding specific parts of the layout.html template that will need to be unique to certain pages. This will need to be incorporated in every child template you create to ensure your website shows the relevant information for each page. . Child Template . First lets create our template for our feed page. This will be where users can scroll and read posts made by themselves and other users. . In your feed.html file, copy the following code: . {% extends &quot;layout.html&quot; %} {% block content %} {% for post in posts %} &lt;article class=&quot;media content-section&quot;&gt; &lt;img class=&quot;rounded-circle article-img&quot; src=&quot;{{ url_for(&#39;static&#39;, filename=&#39;profile_pics/&#39; + post.author.image_file) }}&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;div class=&quot;article-metadata&quot;&gt; &lt;a&gt; {{ post.author.username }}&lt;/a&gt; &lt;small class=&quot;text-muted&quot;&gt;{{ post.date_posted.strftime(&#39;%Y-%m-%d&#39;) }}&lt;/small&gt; &lt;/div&gt; &lt;h2&gt;&lt;a&gt;{{ post.title }}&lt;/a&gt;&lt;/h2&gt; &lt;p class=&quot;article-content&quot;&gt;{{ post.content }}&lt;/p&gt; &lt;/div&gt; &lt;/article&gt; {% endfor %} {% endblock content %} . In order to inherit from our parent template, use {% extends &quot;layout.html&quot; %}. . Like I mentioned in the Parent Template section, we will use {% block content %}{% endblock content %} to create the specific content on each page. . On our feed page, we will be displaying the posts. The code block {% for post in posts %} will retrieve information from a post object containing information about the author, the date the post was posted, the title, and the content that we will be covering later on in in the Databases (SQLAlchemy) section. . We can use Bootstrap to customize the shape of the user&#39;s profile picture that will be displayed on the posts using &quot;rounded-circle article-img&quot;. url_for(&#39;static&#39;, filename=&#39;profile_pics/&#39; + post.author.image_file) tells the program where to look to obtain the profile pictures. In this case, the user&#39;s profile pictures will be under the static&lt;/code&gt;&lt;/i&gt; folder, in a file named profile_pics&lt;/code&gt;&lt;/i&gt; which we will be creating in the Default Profile Picture section.&lt;/h4&gt; url_for&lt;/code&gt;&lt;/i&gt; is a really useful function that helps determine the exact location to route to. We will be seeing more of this throughout the blog.&lt;/h4&gt; . Secret Key . When using forms, it is ideal that we create a &#8220;secret key&#8221; to prevent hijacking of the web application. This is used to sign session cookies and protect against cookie data tampering. It is necessary to avoid sharing this key to keep your Flask application secure. . Update the webpage __ init.py file with the following code: . from flask import Flask from flask_sqlalchemy import SQLAlchemy app = Flask(__name__) app.config[&#39;SECRET_KEY&#39;] = &#39;5791628bb0b13ce0c676dfde280ba245&#39; from webpage.users.routes import users from webpage.posts.routes import posts from webpage.main.routes import main app.register_blueprint(users) app.register_blueprint(posts) app.register_blueprint(main) . Use app.config[&#39;SECRET_KEY&#39;] to implement your key. Your key can be anything you wish, however, it is important that your key is hard to guess. I would recommend using a random string generator to generate a long random string. . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Designing your Web Page (CSS) . To add custom style and format your HTML templates, you will need to create a Cascading Style Sheets (CSS). CSS is a style language considered static because there is no interaction with the code. . In your static folder, create a file named main.css&lt;/code&gt;&lt;/i&gt;.&lt;/h4&gt; ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── feed.html │ │ ├── layout.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── routes.py │ ├── __init__.py │ ├── models.py . CSS is a relatively straight forward language. . This is the code I used to design the webpage shown in this blog. Feel free to adjust the CSS code in the main.css&lt;/code&gt;&lt;/i&gt; file to personalize the theme of your website to your liking.&lt;/h4&gt; body { background: #E2C2B3; color: #fff; margin-top: 6rem; } h1, h2, h3, h4, h5, h6 { color: #ffff; } .bg-steel { background-color: #687477; } .site-header .navbar-nav .nav-link { color: #E2C2B3; } .site-header .navbar-nav .nav-link.active { font-weight: 100; } .content-section { padding: 4px 30px; background: #403234; border: 1px solid #dddddd; border-radius: 5px; margin-bottom: 20px; } .article-title { color: #ffff; } .article-content { white-space: pre-line; } .article-img { height: 100px; width: 100px; margin-right: 20px; } .article-metadata { padding-bottom: 5px; margin-bottom: 5px; border-bottom: 5px solid #687477 } .article-svg { width: 25px; height: 25px; vertical-align: middle; } .account-img { height: 125px; width: 125px; margin-right: 20px; margin-bottom: 16px; } .account-heading { font-size: 2rem; } . Common CSS Properties Description . background | Pick the background color or image, position, size, repeat (how the images are repeated), origin, clip (painting area), attachment (whether images are fixed or scrolls), initial (sets to default value), or whether to inherit from parent template | . color | Specify the text color | . font | Pick your desired font style, variant, weight, size and font-family | . padding | Specify how much space is needed on top, bottom, left, or right side of elements. | . border | Pick the type of border: dotted, dashed, solid, double, groove, ridge, inset, outset, no border, hidden border, mixed border. | . margin | Set different margins on the top, bottom, right, and left side | . text-decoration | Choose decorations like underline, overline, line-through, underline overline, as well as the color, style and thickness. | . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Databases(SQLAlchemy) . SQLAlchemy allows programmers to easily convert data stored in a database into objects. We will be using this database to store information about the user and create a one-to-many relationship between the user&#39;s account such as their username, email, and profile picture, as well as their posts. . First, we need to create a URI for the database to use. For development purposes, we will be using SQLite which is a lightweight, fast open SQL engine - this will have to be replaced when we deploy the website later on. Then we will use the &#8220;app&#8221; parameter to create a database instance. . Open the webage __ init__.py&lt;/code&gt;&lt;/i&gt; file. Update the code to the following:&lt;/h4&gt; from flask import Flask from flask_sqlalchemy import SQLAlchemy app = Flask(__name__) app.config[&#39;SECRET_KEY&#39;] = &#39;5791628bb0b13ce0c676dfde280ba245&#39; app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:///site.db&#39; db = SQLAlchemy(app) from webpage.users.routes import users from webpage.posts.routes import posts from webpage.main.routes import main app.register_blueprint(users) app.register_blueprint(posts) app.register_blueprint(main) . Now to create our datbases to save the user&#39;s account information and their posts, code the following in the webpage models.py file. . from datetime import datetime from webpage import db, login_manager from flask_login import UserMixin @login_manager.user_loader def load_user(user_id): return User.query.get(int(user_id)) class User(db.Model, UserMixin): id = db.Column(db.Integer, primary_key=True) username = db.Column(db.String(20), unique=True, nullable=False) email = db.Column(db.String(120), unique=True, nullable=False) image_file = db.Column(db.String(130), nullable=False, default=&#39;default.jpg&#39;) password = db.Column(db.String(60), nullable=False) posts = db.relationship(&#39;Post&#39;, backref=&#39;author&#39;, lazy=True) def __repr__(self): return f&quot;User(&#39;{self.username}&#39;, &#39;{self.email}&#39;, &#39;{self.image_file}&#39;)&quot; class Post(db.Model): id = db.Column(db.Integer, primary_key=True) title = db.Column(db.String(100), nullable=False) date_posted = db.Column(db.DateTime, nullable=False, default=datetime.utcnow) content = db.Column(db.Text, nullable=False) user_id = db.Column(db.Integer, db.ForeignKey(&#39;user.id&#39;), nullable=False) def __repr__(self): return f&quot;Post(&#39;{self.title}&#39;, &#39;{self.date_posted}&#39;)&quot; . In this file, we will be creating two databases. the first one will be the class User(db.Model) which will contain the user information, and the second one will be class Post(db.Model) which will store data about each post. class User(db.Model) will take in the UserMixin parameter which allows the program to incorporate the following properties: . is_authenticated() returns True if the user has provided valid credentials. | is_active() returns True if the user’s account is active. | is_anonymous() returns True if the current user is an anonymous user. | get_id() given a User instance, returns the unique ID for that object. | . To use this login_manager extension, we will have to tell the program how to find one of our users by their id. The &lt;code&gt;@login_manager&lt;/code&gt; is a key naming convention that identifies that this is the function specifying how to get a user by their id. load_user, takes the user_id as the parameter and gets the user using user.query.get from the database we will be creating next. . We imported db which will allow us to program the SQLAlchemy database and datetime. . 1. The class User(db.Model) is created first. . This object will create a table containing user information. An unique id will be given to our users so we will set primary_key=True. . The username will have db.string(17) because I set the maximum characters for the username to be 17. We also want each username to be unique, hence, unique=True. Each user is required to have a username so nullable=False. . The user&#8217;s profile image will be limited to 22 characters. A default image will be provided to those without profile images, therefore nullable=False. . To link the user with their own posts, we will need to use db.relationship to associate with our Post model which we will make in the next step. The function backref=&#8217;author&#8217; allows us to retrieve the user of the post. lazy loading allows us to retrieve every post from a single user. . def __repr__(self): represents the string from our User object in a printable representation. This will come in handy when displaying the posts to the feed page. . 2. Then we create class Post(db.Model). . Each post will need a title, therefore nullable=False. The title is also limited to 150 characters. . The posts will also show the time posted using db.DateTime which we imported earlier. The function datetime.utcnow will allow our program to determine the current time the post was posted. . The content will have the text and does not have to be unique. . We need our database to correlate the user.id to their post. The function db.ForeignKey allows the program to reference information from the user_id column (child table) to the Post column (parent table). . The printable representation of our post will show the title and the date posted. . Lastly, we need to create the database. . In your terminal, first type “python”. | Then type “from flaskblog import db”. | Finally type “db.create_all()”. | Since we are using SQLite, a site.db file will be created in our directory. . ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── feed.html │ │ ├── layout.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── routes.py │ ├── __init__.py │ ├── models.py │ ├── site.db . Now we have a database! . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Sign-up and Log-in . Every file related to creating, updating or validating a user&#39;s account will be found in the users module. Currently we have a __ init__.py and a routes.py file within users. We will also need to add a users forms.py file. . ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── feed.html │ │ ├── layout.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── __init__.py │ ├── models.py │ ├── site.db . WTForms . Within users forms.py file, we will use a function called WTForms - a handy Flask extension that allows programmers to easily validate forms and deploy security features. Perfect for sign-up and log-in pages! . from flask_wtf import FlaskForm from flask_wtf.file import FileField, FileAllowed from wtforms import StringField, PasswordField, SubmitField, BooleanField from wtforms.validators import DataRequired, Length, Email, EqualTo, ValidationError from webpage.models import User class RegistrationForm(FlaskForm): username = StringField(&#39;Username&#39;, validators=[DataRequired(), Length(min=5, max=17)]) email = StringField(&#39;Email&#39;, validators=[DataRequired(), Email()]) password = PasswordField(&#39;Password&#39;, validators=[DataRequired()]) confirm_password = PasswordField(&#39;Confirm Password&#39;, validators=[DataRequired(), EqualTo(&#39;password&#39;)]) submit = SubmitField(&#39;Sign Up&#39;) def validate_username(self, username): user = User.query.filter_by(username=username.data).first() if user: raise ValidationError(&#39;That username is taken. Please choose a different one.&#39;) def validate_email(self, email): user = User.query.filter_by(email=email.data).first() if user: raise ValidationError(&#39;That email is taken. Please choose a different one.&#39;) class LoginForm(FlaskForm): email = StringField(&#39;Email&#39;, validators=[DataRequired(), Email()]) password = PasswordField(&#39;Password&#39;, validators=[DataRequired()]) remember = BooleanField(&#39;Remember Me&#39;) submit = SubmitField(&#39;Login&#39;) class UpdateAccountForm(FlaskForm): username = StringField(&#39;Username&#39;, validators=[DataRequired(), Length(min=5, max=17)]) email = StringField(&#39;Email&#39;, validators=[DataRequired(), Email()]) picture = FileField(&#39;Update Profile Picture&#39;, validators=[FileAllowed([&#39;jpg&#39;, &#39;png&#39;])]) submit = SubmitField(&#39;Update&#39;) . The RegistrationForm Class will take in the necessary information from the user to create an account. . We will be using validators to create certain requirements for the user&#8217;s account. For example, validators=[DataRequired(), Length(min=5, max=17)] ensures usernames have a minimum of 5 characters and a maximum of 17. . We can also validate their email to ensure it is legitimate with Email(). We use the EqualTo validator for the password to ensure the password and the password confirmation are the same. . The user can then click &#39;Sign Up&#39; on the website to submit their form. &#39;Sign Up&#39; will be displayed as a button, which we will create using Bootstrap in our template register.html&lt;/code&gt;&lt;/i&gt; we will be creating later on in this section.&lt;/h4&gt; The def validate_username&lt;/code&gt;&lt;/i&gt; and def validate_email&lt;/code&gt;&lt;/i&gt; ensures that there are no duplicates within the database. User.query.filter_by&lt;/code&gt;&lt;/i&gt; is a helpful function that filters through the application&#39;s database to look for the relevant information. If user&lt;/code&gt;&lt;/i&gt; returns True, a ValidationError message will occur.&lt;/h4&gt; Similarly, we will create the LoginForm Class. Here we will be asking the user for their email and password to log-in. A remember field can be incorporated by using BooleanField which allows the user to pick between &#8220;true&#8221; or &#8220;false&#8221;. Then the user submits the form by pressing &#39;Login&#39;. . Finally, the UpdateAccountForm Class will take in a username and email with the same requirements from the RegistrationForm Class. This form will also allow users to update their profile picture only as a .jpg or .png file. . Routing . users routes.py&lt;/code&gt;&lt;/i&gt; will be used to route to different pages using the .route function. This function allows you to create a unique URL for each page. For example, we made the path to the sign up page “/register”. The URL 127.0.0.1:5000/about will route us here. We will be using render_template to allow the program to generate output from our HTML template files we created.&lt;/h3&gt; from flask import render_template, url_for, flash, redirect, request, Blueprint from flask_login import login_user, current_user, logout_user, login_required from webpage import db, bcrypt from webpage.models import User from webpage.users.forms import (RegistrationForm, LoginForm, UpdateAccountForm) from webpage.users.save_pics import save_picture users = Blueprint(&#39;users&#39;, __name__) @users.route(&quot;/register&quot;, methods=[&#39;GET&#39;, &#39;POST&#39;]) def register(): if current_user.is_authenticated: return redirect(url_for(&#39;main.feed&#39;)) form = RegistrationForm() if form.validate_on_submit(): hashed_password = bcrypt.generate_password_hash(form.password.data).decode(&#39;utf-8&#39;) user = User(username=form.username.data, email=form.email.data, password=hashed_password) db.session.add(user) db.session.commit() flash(&#39;Your account has been created!&#39;, &#39;success&#39;) return redirect(url_for(&#39;users.login&#39;)) return render_template(&#39;register.html&#39;, title=&#39;Register&#39;, form=form) @users.route(&quot;/login&quot;, methods=[&#39;GET&#39;, &#39;POST&#39;]) def login(): if current_user.is_authenticated: return redirect(url_for(&#39;main.feed&#39;)) form = LoginForm() if form.validate_on_submit(): user = User.query.filter_by(email=form.email.data).first() if user and bcrypt.check_password_hash(user.password, form.password.data): login_user(user, remember=form.remember.data) next_page = request.args.get(&#39;next&#39;) return redirect(next_page) if next_page else redirect(url_for(&#39;main.feed&#39;)) else: flash(&#39;Login Unsuccessful.&#39;, &#39;danger&#39;) return render_template(&#39;login.html&#39;, title=&#39;Login&#39;, form=form) @users.route(&quot;/logout&quot;) def logout(): logout_user() return redirect(url_for(&#39;main.feed&#39;)) @users.route(&quot;/account&quot;, methods=[&#39;GET&#39;, &#39;POST&#39;]) @login_required def account(): form = UpdateAccountForm() if form.validate_on_submit(): if form.picture.data: picture_file = save_picture(form.picture.data) current_user.image_file = picture_file current_user.username = form.username.data current_user.email = form.email.data db.session.commit() flash(&#39;Account updated!&#39;, &#39;success&#39;) return redirect(url_for(&#39;users.account&#39;)) elif request.method == &#39;GET&#39;: form.username.data = current_user.username form.email.data = current_user.email image_file = url_for(&#39;static&#39;, filename=&#39;profile_pics/&#39; + current_user.image_file) return render_template(&#39;account.html&#39;, title=&#39;Account&#39;, image_file=image_file, form=form) . The &#8216;GET&#8217; and &#8216;POST&#8217; requests are required to retrieve and send the user&#8217;s information from and to our web server. . form.validate_on_submit will indicate if the form is accepted by all the validator fields when submitted to determine where the webpage should reroute to. url_for will determine the exact location of the route. . flash allows us to generate message alerts using Bootstrap. This is used to inform the user if they have successfully logged in or if their login was unsuccessful. . When registering, a user is redirected to the feed page. The function to route to the feed page will be in the main&lt;/code&gt;&lt;/i&gt; folder hence &#39;main.feed&#39;. The routes.py&lt;/code&gt;&lt;/i&gt; file will also require access to the forms we previously created in the forms.py&lt;/code&gt;&lt;/i&gt;. if form.validate_on_submit() will check if the form is valid, then will start hashing using Bcrypt the password that the user inputed before saving it in the database. A flash message informing the user that their account has been created appears, then they are redirected to the login page.&lt;/h4&gt; Hashing is irreversible; unlike encryption and encoding, there is no way to de-hash a password. It is good practice to hash sensitive information like passwords incase of potential data leaks. The user&#39;s information and hashed password is added to the database - the actual password is never stored! . The login page will check whether the information that the user inputs on the form matched the database. user = User.query.filter_by(email=form.email.data).first() checks the email that the user inputs with the database to see if it exists. Then if user is true (email matches with the database), the program checks the password that the user inputted with the password that was remembered by the program (this password is the unhashed password that is not saved in the database, only remembered). If successful, user will be redirected to their feed, else, a flash message will appear. . flask_login provides an easy to use logout_user function. . To update your account, flask_login ensures that the user is logged in using &lt;code&gt;@login_required&lt;/code&gt;. Using the UpdateAccountForm() we created in the forms.py&lt;/code&gt;&lt;/i&gt; file will be used here to replace the original data with the newly inputted data. The account data will be immediately updatted in the account page.&lt;/h4&gt; To use Bcrypt and flask_login we will need to create instances with these functions in the webpage __ init__.py&lt;/code&gt;, similar to how we created instances for SQLAlchemy.&lt;/h3&gt; Update the code in webpage __ init__.py&lt;/code&gt; with the following:&lt;/h4&gt; from flask import Flask from flask_sqlalchemy import SQLAlchemy from flask_bcrypt import Bcrypt from flask_login import LoginManager app = Flask(__name__) app.config[&#39;SECRET_KEY&#39;] = &#39;5791628bb0b13ce0c676dfde280ba245&#39; app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:///site.db&#39; db = SQLAlchemy(app) bcrypt = Bcrypt(app) login_manager = LoginManager(app) from webpage.users.routes import users from webpage.posts.routes import posts from webpage.main.routes import main app.register_blueprint(users) app.register_blueprint(posts) app.register_blueprint(main) . Saving Profile Pictures . We will also need another file in our users&lt;/code&gt;&lt;/i&gt; file in order to save the profile pictures. Create a save_pics.py&lt;/code&gt;&lt;/i&gt; file.&lt;/h3&gt; ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── feed.html │ │ ├── layout.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db . Import the following code: . import os import secrets from PIL import Image from webpage import app def save_picture(form_picture): random_hex = secrets.token_hex(10) _, f_ext = os.path.splitext(form_picture.filename) picture_fn = random_hex + f_ext picture_path = os.path.join(app.root_path, &#39;static/profile_pics&#39;, picture_fn) output_size = (130, 130) i = Image.open(form_picture) i.thumbnail(output_size) i.save(picture_path) return picture_fn . To avoid saving pictures with the same name, we can import secrets and use the secrets.token_hex() function to generate a random hex. . We need to make sure the file extension is the same when it is saved. in order to determine the file extension we can use os and the split.text function. The final picture name that will be stored will be the random hex with the picture extension. This is this saved to the profile_pic file within the static folder. . Before the image is saved, we also need to resize it. Using Image programmers can open and resize the image to a certain size. The program will resize the image to the output_size before saving. . Now we have to create templates for our log-in and register pages. . Within templates&lt;/code&gt;&lt;/i&gt;, create a file named login.html&lt;/code&gt;&lt;/i&gt; and register.html&lt;/code&gt;&lt;/i&gt;.&lt;/h4&gt; ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db . Copy the following code into register.html&lt;/code&gt;&lt;/i&gt;&lt;/strong&gt;:&lt;/h4&gt; . {% extends &quot;layout.html&quot; %} {% block content %} &lt;div class=&quot;content-section&quot;&gt; &lt;form method=&quot;POST&quot; action=&quot;&quot;&gt; {{ form.hidden_tag() }} &lt;fieldset class=&quot;form-group&quot;&gt; &lt;legend class=&quot;border-bottom mb-4&quot;&gt;Join Today&lt;/legend&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.username.label(class=&quot;form-control-label&quot;) }} {% if form.username.errors %} {{ form.username(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.username.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.username(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.email.label(class=&quot;form-control-label&quot;) }} {% if form.email.errors %} {{ form.email(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.email.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.email(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.password.label(class=&quot;form-control-label&quot;) }} {% if form.password.errors %} {{ form.password(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.password.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.password(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.confirm_password.label(class=&quot;form-control-label&quot;) }} {% if form.confirm_password.errors %} {{ form.confirm_password(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.confirm_password.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.confirm_password(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;/fieldset&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.submit(class=&quot;btn btn-outline-info&quot;) }} &lt;/div&gt; &lt;/form&gt; &lt;/div&gt; &lt;div class=&quot;border-top pt-3&quot;&gt; &lt;/div&gt; {% endblock content %} . . form.hidden _tag() works with the secret key to add protection against CSRF attacks. . We need to create a div class=&#8221;form-group&#8221;&gt; for each of our variables. . Username, email, and password will use the Bootstrap class form-control-label to create a text box for the user the type in the information. . The submit variable will use btn btn-outline-info to create a button that the user can press to submit the form. . When there is an error in the form, we will need the program to run a conditional. For example, if there is an error in the username, the condition {% if form.username.errors %} will be true. This will result in the error variable from the for loop to print. . Copy the following code into login.html&lt;/code&gt;&lt;/i&gt;&lt;/strong&gt;:&lt;/h4&gt; . {% extends &quot;layout.html&quot; %} {% block content %} &lt;div class=&quot;content-section&quot;&gt; &lt;form method=&quot;POST&quot; action=&quot;&quot;&gt; {{ form.hidden_tag() }} &lt;fieldset class=&quot;form-group&quot;&gt; &lt;legend class=&quot;border-bottom mb-4&quot;&gt;Log In&lt;/legend&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.email.label(class=&quot;form-control-label&quot;) }} {% if form.email.errors %} {{ form.email(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.email.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.email(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.password.label(class=&quot;form-control-label&quot;) }} {% if form.password.errors %} {{ form.password(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.password.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.password(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-check&quot;&gt; {{ form.remember(class=&quot;form-check-input&quot;) }} {{ form.remember.label(class=&quot;form-check-label&quot;) }} &lt;/div&gt; &lt;/fieldset&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.submit(class=&quot;btn btn-outline-info&quot;) }} &lt;/div&gt; &lt;/form&gt; &lt;/div&gt; &lt;div class=&quot;border-top pt-3&quot;&gt; &lt;/div&gt; {% endblock content %} . . This file uses similar functions to the register.html file with slight variation. . The legend is now &#8220;Log in&#8221; instead of &#8220;Signup&#8221;. . We do not need the confirm password form group. . We will need div class=&#8221;form-check&#8221; for our &#8220;Remember Me&#8221; function which will allow the user to check a box if they would like to be remembered . Lastly, lets create a template to allow users to easily update their account information. . Within templates&lt;/code&gt;&lt;/i&gt;, create a file named account.html&lt;/code&gt;&lt;/i&gt; and register.html&lt;/code&gt;&lt;/i&gt;.&lt;/h4&gt; ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── account.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db . Copy the following code into account.html&lt;/code&gt;&lt;/i&gt;&lt;/strong&gt;:&lt;/h4&gt; . {% extends &quot;layout.html&quot; %} {% block content %} &lt;div class=&quot;content-section&quot;&gt; &lt;div class=&quot;media&quot;&gt; &lt;img class=&quot;rounded-circle account-img&quot; src=&quot;{{ image_file }}&quot;&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h2 class=&quot;account-heading&quot;&gt;{{ current_user.username }}&lt;/h2&gt; &lt;p class=&quot;text-secondary&quot;&gt;{{ current_user.email }}&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;form method=&quot;POST&quot; action=&quot;&quot; enctype=&quot;multipart/form-data&quot;&gt; {{ form.hidden_tag() }} &lt;fieldset class=&quot;form-group&quot;&gt; &lt;legend class=&quot;border-bottom mb-4&quot;&gt;Account Info&lt;/legend&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.username.label(class=&quot;form-control-label&quot;) }} {% if form.username.errors %} {{ form.username(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.username.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.username(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.email.label(class=&quot;form-control-label&quot;) }} {% if form.email.errors %} {{ form.email(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.email.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.email(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.picture.label() }} {{ form.picture(class=&quot;form-control-file&quot;) }} {% if form.picture.errors %} {% for error in form.picture.errors %} &lt;span class=&quot;text-danger&quot;&gt;{{ error }}&lt;/span&gt;&lt;/br&gt; {% endfor %} {% endif %} &lt;/div&gt; &lt;/fieldset&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.submit(class=&quot;btn btn-outline-info&quot;) }} &lt;/div&gt; &lt;/form&gt; &lt;/div&gt; {% endblock content %} . . This template uses the same bootstrap functions we have seen in the other templates. . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Creating Posts . In this section, we will work on the files within our posts&lt;/code&gt;&lt;/i&gt; module to allow users to create posts on the website. Lets add a forms.py&lt;/code&gt;&lt;/i&gt; to this module.&lt;/h3&gt; ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── account.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db . We will be using WTForms once again for our posts&lt;/code&gt;&lt;/i&gt; forms.py&lt;/code&gt;&lt;/i&gt;.&lt;/h3&gt; from flask_wtf import FlaskForm from wtforms import StringField, SubmitField, TextAreaField from wtforms.validators import DataRequired class PostForm(FlaskForm): title = StringField(&#39;Title&#39;, validators=[DataRequired()]) content = TextAreaField(&#39;Content&#39;, validators=[DataRequired()]) submit = SubmitField(&#39;Post&#39;) . A title and content is required for our post form hence validators=[DataRequired()]. StringField is used for a shorter string of characters, perfect for the title. TextAreaField is for a larger amount of text, great for the content section. We will also be creating a submit button on this page when we create our templates. . Now lets work on the posts&lt;/code&gt;&lt;/i&gt; routes.py&lt;/code&gt;&lt;/i&gt; file.&lt;/h3&gt; from flask import (render_template, url_for, flash, redirect, request, Blueprint) from flask_login import current_user, login_required from webpage import db from webpage.models import Post from webpage.posts.forms import PostForm posts = Blueprint(&#39;posts&#39;, __name__) @posts.route(&quot;/post/new&quot;, methods=[&#39;GET&#39;, &#39;POST&#39;]) @login_required def new_post(): form = PostForm() if form.validate_on_submit(): post = Post(title=form.title.data, content=form.content.data, author=current_user) db.session.add(post) db.session.commit() flash(&#39;Your post has been created!&#39;, &#39;success&#39;) return redirect(url_for(&#39;main.feed&#39;)) return render_template(&#39;create_post.html&#39;, title=&#39;New Post&#39;, form=form, legend=&#39;New Post&#39;) . To create a new post, a user must be logged in. This function &lt;code&gt;@login_required&lt;/code&gt; only allows logged in users to use the /post/new route. This route uses the form we just created and validates the user inputs before the post is added to the database. . A flash alert is shown when the post is created then the user is redirected to the feed page. . Now we will be creating the create_post.html file this route will render from. . Create a new template called create_post.html&lt;/code&gt;&lt;/i&gt;.&lt;/h4&gt; ├── webpage │ ├── static │ │ ├── main.css │ ├── templates │ │ ├── account.html │ │ ├── create_post.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db . Similar to the register.html&lt;/code&gt;&lt;/i&gt; and login.html&lt;/code&gt;&lt;/i&gt; templates, the create_post.html&lt;/code&gt;&lt;/i&gt; template will be formatting the form with textboxes and buttons where needed using the following code:&lt;/h4&gt; . {% extends &quot;layout.html&quot; %} {% block content %} &lt;div class=&quot;content-section&quot;&gt; &lt;form method=&quot;POST&quot; action=&quot;&quot;&gt; {{ form.hidden_tag() }} &lt;fieldset class=&quot;form-group&quot;&gt; &lt;legend class=&quot;border-bottom mb-4&quot;&gt;{{ legend }}&lt;/legend&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.title.label(class=&quot;form-control-label&quot;) }} {% if form.title.errors %} {{ form.title(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.title.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.title(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.content.label(class=&quot;form-control-label&quot;) }} {% if form.content.errors %} {{ form.content(class=&quot;form-control form-control-lg is-invalid&quot;) }} &lt;div class=&quot;invalid-feedback&quot;&gt; {% for error in form.content.errors %} &lt;span&gt;{{ error }}&lt;/span&gt; {% endfor %} &lt;/div&gt; {% else %} {{ form.content(class=&quot;form-control form-control-lg&quot;) }} {% endif %} &lt;/div&gt; &lt;/fieldset&gt; &lt;div class=&quot;form-group&quot;&gt; {{ form.submit(class=&quot;btn btn-outline-info&quot;) }} &lt;/div&gt; &lt;/form&gt; &lt;/div&gt; {% endblock content %} . . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Displaying Posts on the Feed Page . The feed page will display the posts created by the user. The code required to make this page will be in the main&lt;/code&gt;&lt;/i&gt; module.&lt;/h3&gt; In the main routes.py&lt;/code&gt;&lt;/i&gt; file, copy the following code:&lt;/h4&gt; from flask import render_template, Blueprint from webpage.models import Post main = Blueprint(&#39;main&#39;, __name__) @main.route(&quot;/&quot;) @main.route(&quot;/feed&quot;) def feed(): posts = Post.query.order_by(Post.date_posted.desc()) return render_template(&#39;feed.html&#39;, posts=posts) . The feed function searches for the posts within the database and orders them by the date posted. Newer posts will appear at the top of the feed. Earlier in the blog, we created the feed.html&lt;/code&gt;&lt;/i&gt; template in the Child Template section which this function will render from.&lt;/h4&gt; We already created the template for our feed page in the Child Template. . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Default Profile Picture . New users or users without a profile picture, will be automatically given a default profile picture. . Since profile pictures will not alter the code as the application is running, the file we will create to save these pictures will be in the static folder. Name it profile_pics. Within this file, upload a default image. Make sure this image is named default as shown below: . ├── webpage │ ├── static │ │ ├── main.css │ │ ├── profile_pics │ │ │ ├── default.jpg │ ├── templates │ │ ├── account.html │ │ ├── create_post.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db . Here is an example default image used in the website shown in this blog: . ![title](img/default.jpg) . Running Your Application . While developing your program, you will need to run your code to ensure your application runs smoothly before it is deployed. . Create an app.py&lt;/code&gt;&lt;/i&gt; file outside of the webpage&lt;/code&gt;&lt;/i&gt; folder.&lt;/h4&gt; ├── webpage │ ├── static │ │ ├── main.css │ │ ├── profile_pics │ │ │ ├── default.jpg │ ├── templates │ │ ├── account.html │ │ ├── create_post.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db ├── app.py . Import the following code into this file: . from webpage import app if __name__ == &#39;__main__&#39;: app.run(debug=True) . The only purpose of the ap.py&lt;/code&gt;&lt;/i&gt; is to run the code. The file grabs the app&lt;/code&gt;&lt;/i&gt; variable from webpage __ init__.py&lt;/code&gt;&lt;/i&gt; and runs it. The app&lt;/code&gt;&lt;/i&gt; variable must be inside the __ init__.py&lt;/code&gt;&lt;/i&gt; since this is where we are initializing the application.&lt;/h4&gt; Launching Your Site . To run the application, type &#8220;python run.py&#8221; into the terminal. Click on the http://127.0.0.1:5000 link or paste it into your browser and your website should open! . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Deploying Your Website . In this section, I will be explaining how to deploy your Flask application onto the World Wide Web for free so that anyone with internet is able to access it. I will be using Heruko&#39;s &quot;Free and Hobby&quot; package, however, you can also upgrade to a paid package for more web functions. . Steps: . Download Heroku Toolbelt CLI using this link | Once installed, open your computer&#39;s command prompt terminal and make sure you are in your FlaskWebPage&lt;/code&gt;&lt;/i&gt; directory and that your virtual environment is active. This is what your terminal should say: (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt; . &lt;/li&gt; We will need to install gunicornpip install Gunicorn (a Python Web Server Gateway Interface (WSGI) HTTP server) and Psycopg 2 (a PostgreSQL database for Python). In the terminal type &quot;pip install gunicorn&quot;.(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;pip install gunicorn Once Gunicorn is installed, type &quot;pip install psycopg2&quot;. (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;pip install psycopg2 . | Next we will have to create a file with the required packages that Heroku will need to download in order to use the different functions in our application. Create a new file called requirements.txt&lt;/code&gt;&lt;/i&gt;.&lt;/p&gt; ├── webpage │ ├── static │ │ ├── main.css │ │ ├── profile_pics │ │ │ ├── default.jpg │ ├── templates │ │ ├── account.html │ │ ├── create_post.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db ├── app.py ├── requirements.txt . Type &quot;pip freeze&quot; into the terminal: . (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;pip install psycopg2 Copy all the requirements into the requirements.txt&lt;/code&gt;&lt;/i&gt; file.&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; Now we have to tell Heroku what kind of app we are running. Create a new file called &quot;Procfile&quot;. . ├── webpage │ ├── static │ │ ├── main.css │ │ ├── profile_pics │ │ │ ├── default.jpg │ ├── templates │ │ ├── account.html │ │ ├── create_post.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db ├── app.py ├── Procfile ├── requirements.txt . A Procfile tells Heroku what kind of app we are running. Type the following into the Procfile: . web: gunicorn app:app . This implies that the application is a web app using the gunicorn webserver and our app is called &quot;app&quot; since we named it app.py. . | Create an account on the Heroku website, then type &quot;heroku login&quot; into the command prompt. . (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;heroku login This will open up the Heroku login page. . | After logging in, we can now create a unique domain for our web server. Type &quot;heroku create&quot; then the name of what you want to call your app. For example, &quot;heroku create flaskmediapage&quot; was typed into the command prompt: . (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;heroku create flaskmediapage The terminal will inform you whether or not that domain name is taken. If the domain name is not taken, a URL to your website is created and should look similar to this: https://flaskmediapage.herokuapp.com/ . | The database we currently have is an SQLite database which was great during development of our app, however, is unable to run over a network. In order to deploy the app, we need to switch to a PostgreSQL database. To create a database with heroku, type &quot;heroku addons:create heroku-postgresql:hobby-dev --app flasksocialmedia&quot; into the terminal. . (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;heroku addons:create heroku-postgresql:hobby-dev --app flaskmediapage Ensure the last word of this command is the name of your app you chose from step 7. Now you have a free empty database. . | Now we have to alter our code to make sure our application is using the PostgreSQL database. First we need to get the URL for database. Type this into your command prompt: &quot;heroku config --app flaskmediapage&quot;. . (env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;heroku config --app flaskmediapage This should create a URL similar to this: postgres://baeiyrmyxoecvu:c38f07af1eb3ad0da3e952189097972948241444bafe16ebfe86227aa089e8f1@ec2-52-206-182-219.compute-1.amazonaws.com:5432/des45gq4vda2q Now copy this URL and paste it into the webpage __ init__.py&lt;/code&gt;&lt;/i&gt; file, replacing the SQLite link we initially had. Add &quot;ql&quot; after &quot;postgres&quot; to indicate that it is an SQLAlchemy database Your code should look like this: from flask import Flask from flask_sqlalchemy import SQLAlchemy from flask_bcrypt import Bcrypt from flask_login import LoginManager&lt;/p&gt; &lt;/blockquote&gt; &lt;/li&gt; &lt;/ol&gt; app = Flask(name) app.config[&#39;SECRET_KEY&#39;] = &#39;5791628bb0b13ce0c676dfde280ba245&#39; app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;postgresql://baeiyrmyxoecvu:c38f07af1eb3ad0da3e952189097972948241444bafe16ebfe86227aa089e8f1@ec2-52-206-182-219.compute-1.amazonaws.com:5432/des45gq4vda2q&#39; db = SQLAlchemy(app) bcrypt = Bcrypt(app) login_manager = LoginManager(app) . from webpage.users.routes import users from webpage.posts.routes import posts from webpage.main.routes import main . app.register_blueprint(users) app.register_blueprint(posts) app.register_blueprint(main) . 10. We will be pushing our application onto Heroku using Github repositories. * Create a &lt;code&gt;&lt;i&gt;.gitignore&lt;/code&gt;&lt;/i&gt; file. bash ├── webpage │ ├── static │ │ ├── main.css │ │ ├── profile_pics │ │ │ ├── default.jpg │ ├── templates │ │ ├── account.html │ │ ├── create_post.html │ │ ├── feed.html │ │ ├── layout.html │ │ ├── login.html │ │ ├── register.html │ ├── main │ │ ├── __init__.py │ │ ├── routes.py │ ├── posts │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ ├── users │ │ ├── __init__.py │ │ ├── forms.py │ │ ├── routes.py │ │ ├── save_pics.py │ ├── __init__.py │ ├── models.py │ ├── site.db ├── .gitignore ├── app.py ├── Procfile ├── requirements.txt . Paste the following code: . # Byte-compiled / optimized / DLL files __pycache__/ *.py[cod] *$py.class # C extensions *.so # Distribution / packaging .Python build/ develop-eggs/ dist/ downloads/ eggs/ .eggs/ lib/ lib64/ parts/ sdist/ var/ wheels/ share/python-wheels/ *.egg-info/ .installed.cfg *.egg MANIFEST # PyInstaller # Usually these files are written by a python script from a template # before PyInstaller builds the exe, so as to inject date/other infos into it. *.manifest *.spec # Installer logs pip-log.txt pip-delete-this-directory.txt # Unit test / coverage reports htmlcov/ .tox/ .nox/ .coverage .coverage.* .cache nosetests.xml coverage.xml *.cover *.py,cover .hypothesis/ .pytest_cache/ cover/ # Translations *.mo *.pot # Django stuff: *.log local_settings.py db.sqlite3 db.sqlite3-journal # Flask stuff: instance/ .webassets-cache # Scrapy stuff: .scrapy # Sphinx documentation docs/_build/ # PyBuilder .pybuilder/ target/ # Jupyter Notebook .ipynb_checkpoints # IPython profile_default/ ipython_config.py # pyenv # For a library or package, you might want to ignore these files since the code is # intended to run in multiple environments; otherwise, check them in: # .python-version # pipenv # According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control. # However, in case of collaboration, if having platform-specific dependencies or dependencies # having no cross-platform support, pipenv may install dependencies that don&#39;t work, or not # install all needed dependencies. #Pipfile.lock # poetry # Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control. # This is especially recommended for binary packages to ensure reproducibility, and is more # commonly ignored for libraries. # https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control #poetry.lock # pdm # Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control. #pdm.lock # pdm stores project-wide configurations in .pdm.toml, but it is recommended to not include it # in version control. # https://pdm.fming.dev/#use-with-ide .pdm.toml # PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm __pypackages__/ # Celery stuff celerybeat-schedule celerybeat.pid # SageMath parsed files *.sage.py # Environments .env .venv env/ venv/ ENV/ env.bak/ venv.bak/ # Spyder project settings .spyderproject .spyproject # Rope project settings .ropeproject # mkdocs documentation /site # mypy .mypy_cache/ .dmypy.json dmypy.json # Pyre type checker .pyre/ # pytype static type analyzer .pytype/ # Cython debug symbols cython_debug/ # PyCharm # JetBrains specific template is maintained in a separate JetBrains.gitignore that can # be found at https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore # and can be added to the global gitignore or merged into this file. For a more nuclear # option (not recommended) you can uncomment the following to ignore the entire idea folder. #.idea/ . This file tells Git which files to not commit. . Type &quot;git init&quot; into the command prompt to initialize your repository.(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;git init . | &quot;git add -A&quot; collects all the files.(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;git add -A . | &quot;git commit -m &quot;initial commit&quot;&quot; commits the files into the repository.(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;git commit -m &quot;initial commit&quot; . | &quot;git push heroku master&quot; pushes the repository onto Heroku.(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;git push heroku master . | . The last step is to migrate the PostgreSQL database, similar to what we did with SQLite. | Type &quot;heroku run python&quot; in the command prompt.(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;heroku run python . | Now we will import our database: . &gt;&gt;&gt; from webpage import db . | Then we will create the database:&gt;&gt;&gt;&gt; db.create_all() . | Exit out of the python terminal:&gt;&gt;&gt; exit() . | . Now you should have your own fully functioning social media page! . You can paste the URL you are given from step 7 into your browser or use the following command to open your web server:&gt;(env) C: Users jenni OneDrive Desktop FlaskWebPage&gt;heroku open . &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Sources . Schafer, C. (2018, May 4). Python flask tutorial: Full-featured web app part 1 - getting started. YouTube. Retrieved June 26, 2022, from https://www.youtube.com/watch?v=MwZwr5Tvyxo&amp;amp;list=PL-osiE80TeTs4UjLw5MM6OjgkjFeUxCYH | Walker, R. (n.d.). Education at bat: Seven principles for educators. Harvard Graduate School of Education. Retrieved June 26, 2022, from https://www.gse.harvard.edu/news/uk/09/01/education-bat-seven-principles-educators | Mark Otto, J. T. (n.d.). Bootstrap. Bootstrap · The most popular HTML, CSS, and JS library in the world. Retrieved June 26, 2022, from https://getbootstrap.com/ | Real Python. (2021, February 6). Use a flask blueprint to architect your applications. Real Python. Retrieved June 27, 2022, from https://realpython.com/flask-blueprint/ | Jemastock. (2019, April 17). Thumb up icon vector image on vectorstock. VectorStock. Retrieved June 27, 2022, from https://www.vectorstock.com/royalty-free-vector/thumb-up-icon-vector-24957601 | CoreyMSchafer. (n.d.). Code_snippets/python/flask_blog at master · coreymschafer/code_snippets. GitHub. Retrieved June 27, 2022, from https://github.com/CoreyMSchafer/code_snippets/tree/master/Python/Flask_Blog | Github. (2021, December 11). Gitignore/jetbrains.gitignore at main · github/gitignore. GitHub. Retrieved June 27, 2022, from https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore | Codemy.com. (2022, January 14). Deploy flask app with database on Heroku for webhosting - flask fridays #39. YouTube. Retrieved June 27, 2022, from https://www.youtube.com/watch?v=SiCAIRc0pEI | &lt;/div&gt; . | . | | . . . . . . | .",
            "url": "https://de-fellows.github.io/RexCoding/2022/06/18/flask-media.html",
            "relUrl": "/2022/06/18/flask-media.html",
            "date": " • Jun 18, 2022"
        }
        
    
  
    
        ,"post9": {
            "title": "Go, Go, Gadget!",
            "content": "Project Scope . Project Goals . Gain a better understanding of computer hardware by using a Raspberry Pi 4. | Learn methods of collecting data using electronic sensors. | Compare temperature and humidity data from several different sensors. | Implement a web application to express data in a clear and meaningful way. | . Procedure . Initialize Raspberry Pi 4 with Raspbian OS. Connect to mouse, keyboard and monitor. | Connect temperature-humidity sensors to Raspberry Pi 4: DHT11 | Grove Begin and test data collection. | . | Generate graphs using collected data. Compare temperature and humidity data across both sensors. | Display data on webpage accessible from within the University of Calgary network. | Making Learning Whole Paradigm . This project focuses on Principle 1 from Making Learning Whole: How Seven Principles of Teaching Can Transform Education: Play the Whole Game . What Does This Mean? . Students already have most of the skills needed to complete the project | This project will demonstrate a practical application of coding skills, instead of a theoretical application | Students can complete the project feeling more confident about their ability to apply theoretical skills to a real-life problem | . Connecting Concepts . FAQ . Q: How can this project be applied to Digital Engineering curriculum? . A: This work can be used as a project or large-scale assignment for Digital Engineering students. . Q: Who should do this project? . A: Students with proficient knowledge in Python and some experience with Matplotlib, Flask and HTML. . Q: Why should I do this project? . A: One of the best ways to learn is by doing. You will boost your self-confidence by proving to yourself that you can use what you already know to make something new and useful. You may be surprised what you learn along the way. Remember: No matter how hard the project seems, there is light at the end of the tunnel! . . Phase 1: Initializing the Raspberry Pi . You will need: . A computer | A microSD adapter (if your computer does not have a microSD port) | Internet access | A microSD card (preferably 32 GB or less) | A Raspberry Pi 4 Model B | A USB-C power cable (with an on/off switch is best) | A Mouse with USB Cable | A Keyboard with USB Cable | A Monitor | A Micro HDMI Cable or Adapter | . Estimated Time Required: 2-3 Hours . 1.1: A Brief Introduction . In Phase 1 we need to get the Raspberry Pi 4 up and running. Unlike the computers in your phone, laptop or smartwatch, Raspberry Pi computers do not come with a built-in Operating System (OS). This means you need to do it yourself, by putting the OS on a microSD card using your own computer and then inserting the microSD into the Raspberry Pi. . There are several ways to do this. For a Raspberry Pi 4, you can use the New Out of Box Software (NOOBS) method, or the Raspberry Pi Imager method. We will be using the latter. . It is important to have some sort of an adapter for your microSD card, since most laptops or computers do not have that kind of port. Some options are a microSD to USB adapter or a microSD to SD card adapter. The important part is that you have some way of connecting the microSD to your computer. I am using an ADATA microReader, because it is what I had on hand. . The content in Sections 1.1 to 1.5 is based on the video The New Method to Setup Raspberry Pi (2022 Update) by Refactored on YouTube (https://www.youtube.com/watch?v=jRKgEXiMtns). . 1.2: Checking the File Format . Raspberry Pi’s require your microSD card to be in FAT32 file format. This is the default format for SD cards with 32GB or less storage capacity. . If your microSD card is 32GB or less, congratulations! You can move on to section 1.3. . If your microSD card is greater than 32GB, you will need to convert it to FAT32. Both Windows and Mac have options for this that can be found with a simple Google search. Once this is completed, move on to section 1.3. . 1.3: Flashing the microSD Card . In the Raspberry Pi world, &quot;flashing the SD card&quot; means writing the OS image to the SD card. We will be doing this using Raspberry Pi Imager to install the Raspberry Pi OS (formerly Raspbian). . Follow these steps: . Go to the official Raspberry Pi website: https://www.raspberrypi.org/ | . Navigate to the Software page. It should be under Computers &gt; Software. | . Under &quot;Install Raspberry Pi OS using Raspberry Pi Imager&quot;, download the version that works on your computer (Windows, macOS or Ubuntu). I&#39;m using the Windows option. | . Find the downloaded file in your File Explorer (or Finder on Mac) and open it. If it asks if you want to allow it to make changes to your device, click Yes. | . When the Raspberry Pi Imager pop-up window appears, click Install. You may want to close all other applications that are currently running on your computer. | . When the Installation is complete, uncheck the &quot;Run Raspberry Pi Imager&quot; button and click Finish. | . Now search for &quot;Raspberry Pi Imager&quot; on your computer. On Windows, it should pop up as shown here. Click Open. If the pop-up window asks if you would like Raspberry Pi Imager to make changes to your device, click Yes. | . Tip: If you&#39;re interested in keeping your file system organized like I am, you can find where the application is stored by clicking Open File Location. . Connect your microSD card to your computer using the adapter of your choice. | Identify the name of the drive (the microSD card) you just connected using your File Explorer or Finder. On my computer, it is the D:/ drive but this may be a different letter for you. The important part is that it is not the drive that all of your computer files are stored on (my C:/ drive). | . In Raspberry Pi Imager, we now need to select the Operating System we want and where we want to store it. | . For the Operating System choose the Raspberry Pi OS (32-bit) option. . . For the Storage choose the drive you just inserted (for me, the D:/ drive). . __WARNING:__ DO NOT CHOOSE A DRIVE YOU ARE NOT 100% CERTAIN ABOUT. This will overwrite the drive, which is IRREVERSIBLE. If you are unsure about which Storage option to choose, ask a friend, professor or TA for help. A Note About Advanced Settings: These settings are found under the gear wheel button. I chose to keep all buttons checked off except for the two at the bottom - Eject media when finished and Enable telemetry (not pictured). These settings can be changed after the OS is &quot;flashed&quot; onto the microSD card. . When you are satisfied with your Operating System, Storage and Advanced Settings choices, click Write. Make sure your computer is plugged in to a power source for this since it might take a while. Mine took a little over 30 minutes to write. Note that the adapter and microSD card will automatically be ejected when it is done. | 1.4: Powering Up the Raspberry Pi . Now we need to connect all the bits and bobs to our Raspberry Pi. The main challenge here is making sure you have the right cable for the job. Here are the ports we can use, courtesy of the official Raspberry Pi website: . . Here&#39;s my setup: . . . USB-C Power Cable | Monitor Connected via Micro HDMI Cable | Keyboard and Mouse connected via USB cable in the USB 2 ports | Micro SD Card (inserted into the slot on the underside of the Raspberry Pi)Using a USB-C power cable with an on/off switch makes it much easier to turn your Raspberry Pi on or off. Without a switch, you will be constantly unplugging and plugging the USB-C back in, since they do not have a built-in power button. . | 1.5:Navigating the Startup Menu . When you plug the power into your Raspberry Pi, it automatically turns on. There is no built-in power button on your Raspberry Pi, so it will turn on if power is supplied to it. If your microSD card has been inserted into the Raspberry Pi, a Startup Menu will appear as shown below. . Click Next to begin the setup process. . . Set your language, time zone and keyboard. If you are doing this from Calgary, AB and you need an English keyboard, select the options shown here. . Click Next to move on. . . Choose a username and password. This will be your user account on the Raspberry Pi. . Make sure you write the username and password down, since you will need them later. . Click Next to create your account. . . If there is no black border between the Raspberry Pi desktop and your monitor, it is possible that the monitor is slightly cutting off the display. . In this case, click the button shown in the image to reduce the desktop size. . It may take several seconds for this to take effect. You may also need to continue through the setup pages before the changes take effect. . Click Next to continue. If you change your mind, you can click Back to return to this page. . . Select the WiFi network you want to connect to and click Next to connect and input the WiFi password. . Or, click Skip to continue without connecting to WiFi. . . Click Next to check and update the software. . This may take a while. My updates took a little longer than ten minutes. . . Click Restart to make the new settings take effect. . If the Raspberry Pi does not appear to be turning back on, try unplugging the power, waiting a couple seconds, and plugging it back in. . If that doesn’t work, try doing the same thing with both the power and the Micro HDMI cables. . . Congratulations! You have successfully set up your Raspberry Pi 4. . . 1.6:Connecting via SSH . There are a few main ways to access your Raspberry Pi. We just completed the first method – plugging in a monitor, mouse and keyboard to use the Raspberry Pi like a home computer. Another popular way to use your Raspberry Pi is through a Secure Shell (SSH) connection. Here’s what you need to know about SSH: . It allows you to run the terminal (command line interface) on your Raspberry Pi from the terminal on your own computer | You can also share files between the Raspberry Pi and your own computer | Both the Raspberry Pi and your own computer must be connected to the same network | You need to know the IP address of the Raspberry Pi on that network | You need to know the username and password from your Raspberry Pi user account we created in section 1.5 | You won’t need to plug all of the cables and gadgets into your Raspberry Pi, only the power cableSSH can be very useful if you want your Raspberry Pi to control something remotely, like a sensor or robot. It removes the desktop we saw in 1.5, so there is no need for a screen or a Graphical User Interface (GUI). . | . The content in Section 1.6 is based on the article SSH:Remote control your Raspberry Pi by Russell Barnes in The MagPi Magazine (https://magpi.raspberrypi.com/articles/ssh-remote-control-raspberry-pi). Let’s set up our SSH connection! With the setup from section 1.5, follow these steps: . Get the IP address of your Raspberry Pi on that network. . Make sure your Raspberry Pi is on the same network (WiFi or Wired LAN) as your computer. To check this, go to the top right corner of the desktop and click the WiFi button. | Open a Terminal. You can do this by clicking the terminal button in the top left corner of the desktop or by pressing Ctrl + Alt + T on the Raspberry Pi’s keyboard. | In the terminal, there are two ways to find the IP address: . (Easiest Method) Type hostname -I and hit Enter to get the IP address on that network. Shown below, the IP address is 192.168.1.138. This will be a different address on each network. . . OR . | Type ifconfig and hit Enter. The number underneath “wlan0” and beside “inet” is the Raspberry Pi’s IP address on that particular network. Shown below, we get the same the IP address (192.168.1.138). . . If you are frequently using the Raspberry Pi under the same network (for example, at your house), write down this IP address since you will be using it often. . | . | . | Enable SSH on the Raspberry Pi. . In the terminal, type sudo raspi-config and hit Enter. This will take you to the Configuration Tool. | . . On the Configuration Tool, use the up and down arrows to select Interface Options. Press Enter. | . . Use the up and down arrows to select SSH. Press Enter. | . . Select Yes and hit Enter to enable SSH on the Raspberry Pi. | . . Press Enter. | . . On the Configuration Tool, use the Tab key to access the &quot;Select&quot; and &quot;Finish&quot; buttons at the bottom. Use the left and right arrow keys to select Finish and hit Enter. | . . | Activate SSH Client (Windows). . This step is not needed for Linux or macOS. | In Windows 10, you can use SSH without having to download anything, but you need to activate it first. | On your computer, search for and Open “Manage Optional Features”. | . . Click Add a feature. | . . Search for OpenSSH Server (may also be called OpenSSH Client). Install it. | . . | Open a Terminal/Command Prompt on your computer and type in ssh [username]@[IP] and press Enter. For example, since my username is “christina” and the Raspberry Pi IP address in the Makerspace is 192.168.1.48, I type in ssh christina@192.168.1.48. If this is your first time using SSH, it may say that the authenticity cannot be established and it will ask, “Are you sure you want to continue connecting?” Type yes and hit Enter. You will then need to enter your password for the Raspberry Pi that we wrote down in Section 1.5. Note that the password will __not__ appear on the screen as you are typing it. . | If you want to end the SSH connection, type exit into the terminal and hit Enter. . | The Raspberry Pi terminal uses Linux commands. An easy guide to Linux commands can be found on the SSE Tech Support website under M2Z &gt; Learning Resources &gt; Programming Skills and Tools &gt; Linux Terminal (https://schulich.libguides.com/c.php?g=721481).&gt; Troubleshooting and Problem Solving: While trying to connect via SSH, I had the following problems:- My laptop was connected to a different network than the Raspberry Pi, so the SSH connection was refused- I entered the wrong username into the terminal (shown in red), so it didn’t recognize the password I had written downOnce I solved these problems, I had success connecting (shown in blue).If you are having difficulty connecting, look for the problems listed above. You can also double-check that your IP address is correct and that the power to the Raspberry Pi is on. If these do not work, try using PuTTY to connect (see the article link in the green box at the beginning of this Section). . . Phase 2: Connecting the Sensors . You will need: . A computer | A Raspberry Pi 4 Model B with microSD card and OS already installed (Phase 1) | A USB-C power cable (with an on/off switch is best) | A Grove Base HAT for Raspberry Pi with included Screws and Spacers (Seeed brand) | A Grove Temperature &amp; Humidity Sensor with included Ribbon Cable (Seeed brand) | A DHT11 Temperature &amp; Humidity Sensor | 3 Female-to-Male electrical wires (should be compatible with a breadboard) | A Solderless Breadboard | Small Phillips-Head Screwdriver (size 0) | . Estimated Time Required: 3 Hours . 2.1: Connecting the Grove Base HAT . The Grove Base HAT for Raspberry Pi should include the Base HAT (a nifty way to connect sensors to your Raspberry Pi), four spacers and eight screws. The unit is called a HAT (Hardware Attached on Top) because it sits on top of the Raspberry Pi! . . The content in Section 2.1 is based on the article How to mount a Grove Base Hat for Raspberry Pi by Gerald Venzl (https://geraldonit.com/2020/01/12/how-to-mount-a-grove-base-hat-for-raspberry-pi/). To connect the Grove Base HAT to the Raspberry Pi, follow these steps: . Using your small Phillips-head screwdriver, attach the spacers to the Grove Base HAT as shown below. | . Carefully press the Grove Base HAT onto the GPIO pins of the Raspberry Pi using the black ports on the underside of the HAT. Be careful not to bend the GPIO pins. Then, use the remaining four screws to attach the HAT to the Raspberry Pi, as shown below. | . Install the Seeed studio provided grove.py software, using one of two methods. Note: Only Method 1 worked for my setup. | Method 1: Git Clone Method, Successful . Connect to the Raspberry Pi using SSH | In the Terminal, type git clone https://github.com/Seeed-Studio/grove.py and hit Enter | Type cd grove.py into the terminal and hit Enter | Type sudo pip3 install . and wait for it to install (this may take a minute) | . . The git clone method can also be found on the Seeed Studio webpage for the Grove Base HAT (https://wiki.seeedstudio.com/Grove_Base_Hat_for_Raspberry_Pi/). Method 2: Curl Method, Unsuccessful . Connect to the Raspberry Pi using SSH | In the Terminal, type sudo apt update and hit Enter (this line was not successful for me) | Then, type sudo apt install -y curl and hit Enter | If needed, you can see the version of curl by typing curl --version and hitting Enter | Then, type curl -sL https://github.com/Seeed-Studio/grove.py/raw/master/install.sh | sudo bash -s – | . . . . After grove.py is installed, you can type grove_ into the Terminal and hit Tab. This allows you to see the various modules you can use with your Internet of Things (IOT) devices. | 2.2: Connecting the Grove Temperature and Humidity Sensor . Even though it is not obvious from the packaging, the Grove Temperature and Humidity Sensor Version 2.0 is a DHT20 sensor. You may find this information useful during research. Your package should look something like this: . . The content in Section 2.2 is based on the article How to use a Grove Temperature and Humidity Sensor Pro with a Raspberry Pi by Gerald Venzl (https://geraldonit.com/2020/01/19/how-to-use-a-grove-temperature-and-humidity-sensor-pro-with-a-raspberry-pi/).&gt; Using Secure Copy (SCP):In this section, we need to transfer files from our personal computer to the Raspberry Pi. We can do this using Secure Copy (SCP).Since we already enabled SSH, SCP is also enabled.Here’s what to do:1. Make sure your personal computer is on the same network as the Raspberry Pi, just like you would do for an SSH connection.2. In the Command Prompt on your computer, navigate to the folder that contains the file you want to transfer. On Windows, you can do this using the cd and dir commands.3. From that location, type into the terminal: scp filename.txt username@[IP]:folder/4. You will then need to input the password of your Raspberry Pi.For example, if we needed to save a file called test_code.py to the “Code” folder on the Raspberry Pi at the IP address 192.168.1.138, the line would look like this:scp test_code.py christina@192.168.1.138:Code/Note that the folder you specify is the location you want to save the file to on the Raspberry Pi. The folder is the file path relative to the “Home” folder on the Raspberry Pi.&gt; You can learn more about Secure Copying with the Raspberry Pi here (https://howchoo.com/pi/how-to-transfer-files-to-the-raspberry-pi). To connect the Raspberry Pi to the Grove Temperature and Humidity Sensor, we need to do the following: . Install needed packages: . Connect to the Raspberry Pi via SSH | Install the seeed-python-dht package: Type pip3 install seeed-python-dht into the Raspberry Pi terminal and hit Enter | Install the python-smbus package: Type sudo apt-get install -y python smbus into the Raspberry Pi terminal and hit Enter. Note: This may not work as the package has become obsolete | . . Install the i2c-tools package: Type sudo apt-get install -y i2c-tools into the Raspberry Pi terminal and hit Enter | . . | Make a folder to put our test code into called “Code”: . If you type ls into the terminal, it lists all of the files and folders under the “Home” directory | Type mkdir Code in the terminal to create a folder called “Code” under the “Home” directory | We can confirm that the folder was created using ls again | . . | Put some test code onto the Raspberry Pi: . On your personal computer, create a Python script that will be used to test if the sensor is properly connected. I called mine “i2c_grove_test.py” and I used the code here, from user ultracold on the Raspberry Pi Stack Exchange: https://raspberrypi.stackexchange.com/questions/133457/how-can-rpi4b-use-python-to-talk-to-the-i2c-dht20-sht20-temperature-and-humidi | In the Raspberry Pi Terminal, type exit and hit Enter to end the SSH connection | Using Secure Copy (SCP), copy this new file into the “Code” file of the Raspberry Pi. Do this by navigating to the directory containing “i2c_grove_test.py” in your command prompt, and then typing the line: | . scp i2c_grove_test.py username@[IP]:Code/ . For example, mine was: . scp i2c_grove_test.py christina@192.168.1.138:Code/ . | Plug the sensor in: . If you are still connected to the Raspberry Pi via SSH, type exit to end the connection | Power off the Raspberry Pi. Since we will be plugging things into it, it’s a good idea to unplug the power cable as well | Using the ribbon cable that comes with the Grove Temperature and Humidity Sensor, plug the sensor into the first I2C port of the Grove Base HAT (labelled on the official pinout below) | . . | Power on the Raspberry Pi and reconnect via SSH . | Enable the use of the I2C ports: . In the Raspberry Pi terminal, type sudo raspi-config and hit Enter | . . Like you did in Section 1.6, choose Interface Options and hit Enter | . . Now, instead of choosing SSH we will now choose I2C (option I5 below). Navigate through the menus and enable the I2C ports | . . | Now comes an interesting part. We need to know the I2C address of our sensor so our code can talk to it. But how do we do this? We use the line i2cdetect -y 1 in our Raspberry Pi terminal. With the sensor attached, your output should look something like this: . . Note that there are two numbers that show up: 08 and 38. This means that the Raspberry Pi recognizes two sensors, one with the address 0x08 and the other with the address 0x38. . The “0x” part that we add on to the number just means the address is a hexadecimal code. . You may be wondering how we can tell which number is the address of our sensor. Simple! . Exit the SSH connection and power off and unplug your Raspberry Pi | When the power cable is unplugged, unplug the Grove sensor | Plug the power cable back in and power on the Raspberry Pi | Run the I2C detection code again | . You should get something like this: . . Notice how we don’t get the 0x38 address when the sensor isn’t plugged in? This means that 0x38 is the I2C address of the sensor when plugged in to the first I2C port. . | A Few Notes About I2C Addresses:- There is no guarantee that the sensor will have the same I2C address if you plug it into one of the other I2C ports. Make sure you use the same port every time or check the I2C address again.- Don’t worry if you don’t get the same numbers as I did above. The important part is finding the address for your sensor.- The purpose of the 0x08 I2C address is somewhat unclear. It may be a master or default I2C address. Either way, you may see it used in code to test if the I2C connection is set up properly. This is shown in the i2c_grove_test.py code below (lines 12-14), where “Initialization Error” is printed if there is no 0x08 present: . # User ultracold import time import smbus address = 0x38 #Put your device&#39;s address here i2cbus = smbus.SMBus(1) time.sleep(0.5) data = i2cbus.read_i2c_block_data(address,0x71,1) if (data[0] | 0x08) == 0: print(&#39;Initialization error&#39;) i2cbus.write_i2c_block_data(address,0xac,[0x33,0x00]) time.sleep(0.1) data = i2cbus.read_i2c_block_data(address,0x71,7) Traw = ((data[3] &amp; 0xf) &lt;&lt; 16) + (data[4] &lt;&lt; 8) + data[5] temperature = 200*float(Traw)/2**20 - 50 Hraw = ((data[3] &amp; 0xf0) &gt;&gt; 4) + (data[1] &lt;&lt; 12) + (data[2] &lt;&lt; 4) humidity = 100*float(Hraw)/2**20 print(temperature) print(humidity) . Modify your test code if necessary: . In the i2c_grove_test.py code above, you need to make sure that the default address (0x08) and sensor address (0x38) are included in the code. If you have different addresses in your setup, use those. | You may also want to change the print statements. Right now, it will only print the temperature and humidity values but it is not obvious to a user which number is which. I recommend changing them to something like: . print(“Temperature: ”, temperature) . print(“Humidity: ”, humidity) . | On the Raspberry Pi terminal, you can use the command nano to access and modify files using the GNU Nano text editor. . | Navigate to the location of the test file by using cd (change directory) to get to the “Code” folder. The line should be cd Code. Then, hit Enter. | Next, type nano i2c_grove_test.py and hit Enter. This will allow you to edit the file and move around the lines of code using arrow keys. | There are commands at the bottom of the screen that tell you what to do (shown below). Note that “^X” means Ctrl + X. The file will ask you if you want to overwrite (save your changes) before editing. Select Yes. | . . | Finally, run the test code! . In the Raspberry Pi terminal, navigate to the “Code” folder that contains the i2c_grove_test.py file (same command as before, use cd Code). | Then, type python3 i2c_grove_test.py and hit Enter. This will run the file, which will look something like this: | . . Troubleshooting:- If the Python script will not run, check for errors in your code. If this does not solve the problem, it may help to make the first line of the code #!/usr/bin/python3 since this tells the system to use Python3 as the interpreter directly.- If the temperature and humidity values are all zeros, this is a sign that the code is not actually talking to the sensor. Check that you have the right I2C addresses and, if necessary, unplug the power and unplug/plug in the sensor to the Grove Base HAT again. . 2.3: Connecting the ASAIR DHT11 Sensor . | Now that we have successfully connected one temperature and humidity sensor to the Raspberry Pi, we will connect a sensor of a different type that does the same thing. This will be the ASAIR DHT11 sensor, which also collects temperature and humidity data from the environment. . Here’s the key difference: We don’t have a ribbon cable and a port like last time. This sensor needs to be manually connected to the Raspberry Pi’s General-Purpose Input/Output (GPIO) pins using wires and possibly a breadboard. . Your DHT11 should look like the one below. When researching these sensors, pay close attention to the information below: . . Be Aware!While all of these sensors look pretty much the same, researching the wrong sensor will set you back. Here are some things to look for:- Number of Pins – Does it have three pins coming out of the bottom or four?- Brand – Is there a brand name visible anywhere on the sensor?- The Letter S – If there is an “S” on one side of the sensor, it means the pin closest to it is the signal pin. This will be useful when researching pinouts.- Small LED – Some sensors come with a small LED on the left side that lights up if you have wired it to power correctly. The sensor shown here does not have an LED. The small component above the “S” is a resistor, so don’t expect it to light up!&gt; The content in Section 2.3 is based on the Seeed Studio grove.py documentation:https://github.com/Seeed-Studio/grove.py/blob/master/doc/README.md . Find the correct pinout for your DHT11 Sensor: | - A __pinout__ is a diagram that tells you what each pin does on an electrical device. - Pay close attention to the bullet points in the blue box above; we already know that our sensor has the __signal pin on the left__. - Three pins to look for: - __Common Collector Voltage (VCC):__ The power supply pin, or positive (+) pin. You can use anywhere from 3.3V to 5V with the DHT11. - __Sensor, Signal or Data:__ The pin that sends the data to the Raspberry Pi. If an “S” is present on the DHT11, it is the pin closest to the “S”. - __Ground (GND):__ The ground pin, or negative (-) pin. Typically connected using a black-coloured wire. - Here’s a good pinout to use: ![DHT11 Pinout](Go-Go-Gadget-Images/dht11_pinout.png) . DHT11 pinout reference:https://components101.com/sensors/dht11-temperature-sensor . Find the correct pinout for the Raspberry Pi 4 Model B GPIO pins: | - We will need to connect the DHT11 to the __GPIO pins__ of the Raspberry Pi - We put the Grove Base HAT on top of the Raspberry Pi’s GPIO pins, so now we need to use the Grove Base HAT’s GPIO pins - The Grove Base HAT has the __same pinout__ as the Raspberry Pi beneath it - __Important Note:__ Each GPIO pin has both a __pin number__ and a __name__. Test codes use the name. - Here’s a good pinout to use: ![Raspberry Pi and Grove Base HAT Pinout](Go-Go-Gadget-Images/raspi_pinout.png) . Raspberry Pi 4 GPIO pinout reference:https://linuxhint.com/gpio-pinout-raspberry-pi/ . Wire the sensor to the Raspberry Pi’s GPIO Pins. Use one of two methods, depending on the wires you have available: | Method 1: (Easiest) Using three female-female wires . Wire each sensor pin directly to its GPIO pin destination: Attach one female end of each wire to the pins on the sensor | Attach the other female end of each wire to the correct GPIO pin on the Raspberry Pi | . | You can use the two pinout sketches above to determine which pins should be connected to each other | Your setup should look something like this: | . . Method 2: Using three male-female wires . Put the sensor into the solderless breadboard. It should be inserted into one of the lettered rows, such as the “a” row | Put the male end of each wire into the breadboard. Keep in mind: Each sensor pin is connected to all of the breadboard holes in the same column (numbered on the breadboard) on that side of the breadboard | In other words, you can plug the wire in anywhere inside the coloured box shown on the breadboard in the sketch below | You may need to stagger the wires on the breadboard; plug them in so that they are in the correct (numbered) column but are not in the same (lettered) row | . | Attach the female end of each wire to the correct GPIO pin on the Raspberry Pi | Your setup should look something like this: | . . Gather the test code: | Gather the test code from the reference below, under “Temperature &amp; Humidity Sensor (DHT11)”Find the test code in the Seeed Studio grove.py documentation:https://github.com/Seeed-Studio/grove.py/blob/master/doc/README.md . | Modify the code slightly so that it matches the code below: | . # Based on code from &quot;Temperature &amp; Humidity Sensor (DHT11)&quot; section here: https://github.com/Seeed-Studio/grove.py/blob/master/doc/README.md import time from seeed_dht import DHT dht11 = DHT(&quot;11&quot;, 4) # Type, GPIO pin for signal cable while True: humi, temp = dht11.read() print(&#39;DHT{0}, humidity {1:.1f}%, temperature {2:.1f}*&#39;.format(dht11.dht_type, humi, temp)) # print(f&quot;Temp: {temp}&quot;) time.sleep(1) . Use Secure Copy (SCP) to copy it into the “Code” folder on the Raspberry Pi | . Run the test code: | Turn your Raspberry Pi on | Connect to the Raspberry Pi via SSH | Navigate to the “Code” folder using cd Code in the terminal | Run the test code by typing python3 filename.py into the terminal | . Your DHT11 is successfully connected if it gives you non-zero values for temperature and humidity. . Sensor Accuracy:The DHT11 can only give values with an accuracy of zero decimal places. You may notice that the test code prints values that end in “.0” - this is because the data has been formatted. . . Phase 3: Making Sense of the Data . You will need: . A computer | The Raspberry Pi 4 Setup with DHT11 and DHT20 Sensors (from Phase 2) | . Estimated Time Required: 3 Hours . 3.1: Installing Extra Libraries . The code for Phase 3 will require us to install some extra libraries: Pandas, which will allow us to easily store the data in different forms, and Matplotlib, which will allow us to create graphs of the data. Follow the steps below: . Connect to the Raspberry Pi via SSH. | Install Pandas by typing sudo apt-get install python3-pandas into the Terminal and hitting Enter. If a message appears about disk space and it asks you if you want to continue, type Y for &quot;Yes&quot; and hit Enter. | . Install Matplotlib by typing sudo apt install python3-matplotlib into the Terminal and hitting Enter. | . We will also use the Time and Datetime libraries, but these come built-in and we don’t need to install them. . 3.2: Writing the Data Collection Code . Now, we need to write the code that will collect the temperature and humidity data. I called my script “T_H_data_collector”. . I’m a big fan of laying out what I want a script to do before I start writing it. Here is what the code should do: . Gather data from the DHT11 sensor | Gather data from the DHT20 sensor | Store all data in a CSV file | CSV file should be added to when new data is gathered and not overwrite old data | Generate an exception if a sensor is not responding | . To allow us to see the data in real time as the code runs, it would also be a good idea to: . Print each line of data to the terminal when it is collected | . In essence, I combined the previous scripts used to test each sensor and then added the exception handling and data storage code. Here’s my code, but you should try to generate a similar result on your own: . # Current Version: v2-3, June 19, 2022 # References: # DHT11 data collection code is from grove.py documentation: https://github.com/Seeed-Studio/grove.py/blob/master/doc/README.md # DHT20 data collection code is from user ultracold on StackExchange: https://raspberrypi.stackexchange.com/questions/133457/how-can-rpi4b-use-python-to-talk-to-the-i2c-dht20-sht20-temperature-and-humidi # Instructions: # Run via Raspberry Pi terminal using command: python3 T_H_data_collector_v1.py # Stop code using Ctrl + C or Command + C # Changes from v2-2: # - Added an if-else statement so that the header of the DataFrame is not written to the CSV file every single time # - Removed import of csv library (no longer needed) import time import pandas as pd from datetime import datetime, date import smbus from seeed_dht import DHT import os.path # Exception class will stop the code if we cannot connect to either sensor class ConnectionError(Exception): &quot;&quot;&quot;Exception raised when a sensor is not connected or responding to test code.&quot;&quot;&quot; pass # Using a function to write each line of the CSV file containing temperature and humidity data def write_line(): &quot;&quot;&quot; Write a line of data to a CSV file. Data is collected by one DHT11 and one DHT20 temperature and humidity sensor. Each line contains: current date, current time, dht11_temp, dht11_humi, dht20_temp, dht20_humi. - Arguments: None - Returns: None &quot;&quot;&quot; # Let&#39;s get data from the DHT11 sensor dht11 = DHT(&quot;11&quot;, 4) # Type, GPIO pin for signal cable # Make sure DHT11 can connect. If not, raise ConnectionError try: dht11_humi, dht11_temp = dht11.read() except: raise ConnectionError(&quot;DHT11 Sensor is not responding. Please check connection.&quot;) # Let&#39;s get data from the DHT20 sensor address = 0x38 # Put your device&#39;s address here i2cbus = smbus.SMBus(1) time.sleep(0.5) # Check that I2C connection was initialized. If not, raise ConncectionError data = i2cbus.read_i2c_block_data(address,0x71,1) if (data[0] | 0x08) == 0: raise ConnectionError(&quot;Initialization Error. Please check connection.&quot;) i2cbus.write_i2c_block_data(address,0xac,[0x33,0x00]) time.sleep(0.1) # Make sure DHT20 can connect. If not, raise ConnectionError try: data = i2cbus.read_i2c_block_data(address,0x71,7) except: raise ConnectionError(&quot;DHT20 Sensor is not responding. Please check connection.&quot;) # Format the DHT20 data so it makes sense to us Traw = ((data[3] &amp; 0xf) &lt;&lt; 16) + (data[4] &lt;&lt; 8) + data[5] dht20_temp = 200*float(Traw)/2**20 - 50 Hraw = ((data[3] &amp; 0xf0) &gt;&gt; 4) + (data[1] &lt;&lt; 12) + (data[2] &lt;&lt; 4) dht20_humi = 100*float(Hraw)/2**20 # list of date, time --&gt; Need to be converted into list format dates = [] dates.append(date.today()) times = [] times.append(datetime.now().strftime(&quot;%H:%M:%S&quot;)) # Save the dictionary of lists into a Pandas DataFrame dict = {&quot;Date&quot;: dates, &quot;Time&quot;: times, &quot;DHT11 Temp&quot;: dht11_temp, &quot;DHT11 Humi&quot;: dht11_humi, &quot;DHT20 Temp&quot;: dht20_temp, &quot;DHT20 Humi&quot;: dht20_humi} df = pd.DataFrame(dict) # Print current line of data to the terminal print(df.iloc[0]) # Write data to CSV file. # If the file already exists, append to the file without the header &quot;Date, Time, DHT11 Temp, ...&quot;. # If the file does not already exist, a new file will be created and the header &quot;Date, Time, DHT11 Temp, ...&quot; will be written to the file along with the data. if os.path.exists(&quot;DHT_data.csv&quot;): with open(&quot;DHT_data.csv&quot;, &quot;a&quot;, newline=&quot;&quot;) as file: # &quot;a&quot; ensures you append to the CSV, not overwrite it df.to_csv(file, index=False, header=False) else: with open(&quot;DHT_data.csv&quot;, &quot;a&quot;, newline=&quot;&quot;) as file: df.to_csv(file, index=False) if __name__ == &quot;__main__&quot;: while True: write_line() . I had to try several different versions of the code to get the result I wanted. The general procedure of how I collected the data is: . Get data from sensors . | Format data as needed . | Store data in a list (of length 1) . | Combine all lists into a dictionary containing the Date, Time, DHT11 Temp, DHT11 Humi, DHT20 Temp, and DHT20 Humi for that instant. There is only one data point per category. . | Write the data to the CSV file “DHT_data.csv”: . If the file already exists, append to the file without the header &quot;Date, Time, DHT11 Temp, DHT11 Humi, DHT20 Temp, DHT20 Humi&quot;. . | If the file does not already exist, a new file will be created and the header &quot;Date, Time, DHT11 Temp, ...&quot; will be written to the file along with the data. . Try It Yourself: Try to make the code above more efficient or simpler; there are many different ways to write data to a CSV file, and the method used above could be improved. . 3.3: Writing the Statistics and Graphing Code . | . | In another file, I wrote the code used to process the data and represent it in a meaningful way. I called this file “data_stats_graphs.py”. Whenever I needed to import this code into another file, I used the line import data_stats_graphs as dsg. . The code achieves two main goals: . Graph the data: Graph the values collected by both sensors and shade in the difference between these values. Create two graphs – one for temperature and one for humidity – and save each as a PNG file. . | Give a meaningful statistic on the data: Calculate the average percent difference between the values from two sensors for both temperature and humidity data. . | The overall structure of the code is explained in this infographic: . . Here is the code: . # FINAL VERSION -- Currently in Use on R.Pi (June 20, 2022) import matplotlib.pyplot as plt import pandas as pd def get_data(filename: str): &quot;&quot;&quot; Gather all data from the CSV file containing DHT11 and DHT20 temperature and humidity data. Sort data into lists. Arguments: - filename: (str) Name of CSV file containing DHT11 and DHT20 data Returns: - labels: (list of strings) List containing date, time information of the form &quot;Date, Time&quot; - dht11_temp: (list of floats) List containing DHT11 temperature data - dht11_humi: (list of floats) List containing DHT11 humidity data - dht20_temp: (list of floats) List containing DHT20 temperature data - dht20_humi: (list of floats) List containing DHT20 humidity data &quot;&quot;&quot; # Set up all data as lists df = pd.read_csv(filename) datelabels = df.iloc[:,0] timelabels = df.iloc[:,1] # Get labels for the x-axis of the graphs; has the form &quot;Date, Time&quot; labels = [] for i in range(len(datelabels)): labels.append(f&quot;{datelabels[i]}, {timelabels[i]}&quot;) # Get lists for temperature data dht11_temp = pd.DataFrame(df.iloc[:,2]) dht20_temp = pd.DataFrame(df.iloc[:,4]) # Get lists for humidity data dht11_humi = pd.DataFrame(df.iloc[:,3]) dht20_humi = pd.DataFrame(df.iloc[:,5]) return labels, dht11_temp, dht11_humi, dht20_temp, dht20_humi def line_graph_temp(filename: str): &quot;&quot;&quot; Generates a PNG image of a Matplotlib graph for the DHT11 and DHT20 temperature data. Graph is a scatterplot with lines connecting discrete data points. Region between sets of data is shaded. Arguments: - filename: (str) Name of CSV file containing data Returns: None &quot;&quot;&quot; # Get all date-time labels and temp, humi data labels, dht11_temp, dht11_humi, dht20_temp, dht20_humi = get_data(filename) # Convert DataFrames to List format dht11_temp_list = list(dht11_temp.iloc[:,0]) dht11_humi_list = list(dht11_humi.iloc[:,0]) dht20_temp_list = list(dht20_temp.iloc[:,0]) dht20_humi_list = list(dht20_humi.iloc[:,0]) # Create figure object fig1 = plt.figure() # Plot as a continuous line with dots at each data point plt.plot(labels, dht11_temp_list, &#39;-o&#39;, label=&#39;DHT11 Sensor&#39;, color=&#39;dodgerblue&#39;) plt.plot(labels, dht20_temp_list, &#39;-o&#39;, label=&#39;DHT20 Sensor&#39;, color=&#39;red&#39;) # Fill between the curves plt.fill_between(labels, dht11_temp_list, dht20_temp_list, color=&#39;thistle&#39;) # Set axis labels, title and legend plt.xlabel(&#39;Date, Time Recorded&#39;) plt.ylabel(&#39;Temperature (Degrees Celsius)&#39;) plt.title(&#39;Comparing Temperature Readings of Two Electronic Sensors&#39;) plt.legend() # Rotate text on x-axis plt.xticks(rotation = 90) # Save as PNG fig1.savefig(&#39;static/line_graph_temp.png&#39;, bbox_inches=&#39;tight&#39;) def line_graph_humi(filename: str): &quot;&quot;&quot; Generates a PNG image of a Matplotlib graph for the DHT11 and DHT20 humidity data. Graph is a scatterplot with lines connecting discrete data points. Region between sets of data is shaded. Arguments: - filename: (str) Name of CSV file containing data Returns: None &quot;&quot;&quot; # Get all date-time labels and temp, humi data labels, dht11_temp, dht11_humi, dht20_temp, dht20_humi = get_data(filename) # Convert DataFrames to List format dht11_temp_list = list(dht11_temp.iloc[:,0]) dht11_humi_list = list(dht11_humi.iloc[:,0]) dht20_temp_list = list(dht20_temp.iloc[:,0]) dht20_humi_list = list(dht20_humi.iloc[:,0]) # Create figure object fig2 = plt.figure() # Plot as a continuous line with dots at each data point plt.plot(labels, dht11_humi_list, &#39;-o&#39;, label=&#39;DHT11 Sensor&#39;, color=&#39;dodgerblue&#39;) plt.plot(labels, dht20_humi_list, &#39;-o&#39;, label=&#39;DHT20 Sensor&#39;, color=&#39;red&#39;) # Fill between the curves plt.fill_between(labels, dht11_humi_list, dht20_humi_list, color=&#39;thistle&#39;) # Set axis labels, title and legend plt.xlabel(&#39;Date, Time Recorded&#39;) plt.ylabel(&#39;Relative Humidity (%)&#39;) plt.title(&#39;Comparing Relative Humidity Readings of Two Electronic Sensors&#39;) plt.legend() # Rotate text on x-axis plt.xticks(rotation = 90) # Save as PNG fig2.savefig(&#39;static/line_graph_humi.png&#39;, bbox_inches=&#39;tight&#39;) def avg_percent_diff_temp(filename:str): &quot;&quot;&quot; Finds the average percent difference between all DHT11 and DHT20 temperature data. Arguments: - filename: (str) Name of CSV file containing data Returns: - average: (float) Average percent difference between all DHT11 and DHT20 temperature data - avg_statement: (str) String containing statement about calculated average, for display purposes &quot;&quot;&quot; # Get all date-time labels and temp, humi data labels, dht11_temp, dht11_humi, dht20_temp, dht20_humi = get_data(filename) # Calculate the percent difference between each data point rects = [] for i in range(len(dht11_temp)): calc = (abs(float(dht11_temp.iloc[i,0]) - float(dht20_temp.iloc[i,0]))) / ((float(dht11_temp.iloc[i,0]) + float(dht20_temp.iloc[i,0])) / 2) * 100 rects.append(calc) # Find average of all percent differences and round to 3 decimal places average = round((sum(rects) / len(rects)), 3) # Create an easy-to-print statement summarizing the result # avg_statement = f&quot;Average Percent Difference Between DHT11 and DHT20 Sensors (Temperature): {average}%&quot; return average def avg_percent_diff_humi(filename:str): &quot;&quot;&quot; Finds the average percent difference between all DHT11 and DHT20 humidity data. Arguments: - filename: (str) Name of CSV file containing data Returns: - average: (float) Average percent difference between all DHT11 and DHT20 humidity data - avg_statement: (str) String containing statement about calculated average, for display purposes &quot;&quot;&quot; # Get all date-time labels and temp, humi data labels, dht11_temp, dht11_humi, dht20_temp, dht20_humi = get_data(filename) # Calculate the percent difference between each data point rects = [] for i in range(len(dht11_humi)): calc = (abs(float(dht11_humi.iloc[i,0]) - float(dht20_humi.iloc[i,0]))) / ((float(dht11_humi.iloc[i,0]) + float(dht20_humi.iloc[i,0])) / 2) * 100 rects.append(calc) # Find average of all percent differences and round to 3 decimal places average = round((sum(rects) / len(rects)), 3) # Create an easy-to-print statement summarizing the result # avg_statement = f&quot;Average Percent Difference Between DHT11 and DHT20 Sensors (Temperature): {average}%&quot; return average filename = &quot;DHT_data.csv&quot; . Observations:- The data used in this code is stored in several Pandas DataFrames. However, you need to convert the data to list format for the graphing functions because the data needs to be one-dimensional.- Pandas.DataFrame.iloc was a very useful tool for selecting specific rows or columns of Pandas DataFrame data. See the documentation for more details: https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iloc.html . . Phase 4: Putting it All Together . We have finally reached the part of this project where we can see our work and share it with others! This involves implementing a web application that we can use to show our new statistics and graphs over a network. . A web application is an application software (i.e. Gmail, Google Docs, Microsoft Office 365, etc.) that runs on a network (for example, your Wi-Fi network at home). . This is also sometimes called a web server, which is a different, but related, concept. Web servers can accept and fulfill HTTP GET and POST requests while also representing static data. Static data might be images, files, or text – generally things that don’t regularly change. . Web applications are a way to represent both static and dynamic data. Dynamic data changes over time, and the web app can be used to reflect these changes in real time. . For the purpose of this section, we will use “web application” and “web server” interchangeably. . 4.1: Structure of Files . It is important to use the organization of files as shown below. The functions of many of these files will be explained in the remainder of Phase 4. . . 4.2: Installing Flask . We will use the Flask library to implement our web app. Flask may already be installed on the Raspberry Pi, but we need to be sure. Follow the steps below: . Connect to the Raspberry Pi via SSH. . | In the Terminal, type sudo pip3 install flask and hit Enter. . | If Flask was already installed, the Raspberry Pi will tell you so. . 4.3: Setting Up the Flask App . I wrote my web application in a file called “web_server.py”. You can use this code (below) as a starting point: . from flask import Flask, render_template import data_stats_graphs as dsg app = Flask(__name__) # Static Route: # if someone requests the root route, execute the following (i.e. what the page shows when nothing or / is typed in the address bar after localhost:5000) @app.route(&quot;/&quot;) def index(): # Generate PNG Graphs for the Data dsg.line_graph_temp(dsg.filename) dsg.line_graph_humi(dsg.filename) # Template Method: return render_template(&#39;index.html&#39;, t_avg_percent_diff=dsg.avg_percent_diff_temp(dsg.filename), h_avg_percent_diff=dsg.avg_percent_diff_humi(dsg.filename)) # Have the HTML code ready as a template and ask flask to read it back to the user # Templates separate the HTML from the logic and allow you to easily adjust content if __name__ == &quot;__main__&quot;: app.debug = True # When we run the server, will run debug mode. Will automatically relaunch server when we change the code! app.run(host=&quot;0.0.0.0&quot;) # Tells web server to listen on all network interfaces. Allows web server to be viewed by other devices on the same network. . Here is a quick breakdown of what is happening, in case you aren’t familiar with Flask apps: . app = Flask(__name__) . Initializing the Flask app. . @app.route(&quot;/&quot;) def index(): ... . The default (root) route for the web server. When you access the web server using http://[IP Address]:[Port #] or http://[IP Address]:[Port #]/, whatever page we put inside of the index() function will show up. . dsg.line_graph_temp(dsg.filename) dsg.line_graph_humi(dsg.filename) . Create the PNG graphs of the data using the data_stats_graphs.py file we created in Phase 3. These PNGs will be saved to the destination we specified in each line_graph_temp() or line_graph_humi() function (the “static” folder). . return render_template(&#39;index.html&#39;, t_avg_percent_diff=dsg.avg_percent_diff_temp(dsg.filename), h_avg_percent_diff=dsg.avg_percent_diff_humi(dsg.filename)) # Have the HTML code ready as a template and ask flask to read it back to the user # Templates separate the HTML from the logic and allow you to easily adjust content . This part looks more complicated than it is. If we only had return render_template(&#39;index.html&#39;), this would load the HTML page onto the screen when the root route is accessed. All of the statements after this, like t_avg_percent_diff=dsg.avg_percent_diff_temp(dsg.filename) is just a way to load Python data into the HTML page. These lines are written in the form variable_name_in_HTML_page=python_variable. . if __name__ == &quot;__main__&quot;: app.debug = True # When we run the server, will run debug mode. Will automatically relaunch server when we change the code! app.run(host=&quot;0.0.0.0&quot;) # Tells web server to listen on all network interfaces. Allows web server to be viewed by other devices on the same network. . Run the web server when we run the code. Also run debug mode, which will automatically reload the server when we make changes to the code. This lets us see changes without constantly killing the server and running it again. . We also choose the “host” to be “0.0.0.0”. This tells the web server to listen on all network interfaces, so if we run this code on the Raspberry Pi and then type http://[IP Address of Raspberry Pi]:5000 into the URL bar of a browser (Chrome, Microsoft Edge, Firefox, etc.) of a different computer on the same network, our web server will show up. . If we didn’t include the “host” and instead used the line app.run(), the web server would only be available locally. This means that it could only be accessed on the same computer running the code. It would show up under the IP address 127.0.0.1, which allows the computer to connect and communicate with itself. This is also known as localhost, and we would need to type http://localhost:5000 into the URL of a browser to see the web server. . You may be wondering what the “5000” is. This is the default port number – a computer networking endpoint. You can change the port number if you like; instructions can be found in the Flask documentation. . If this seems confusing, I like to think of the IP addresses and port numbers this way: The IP address is like the name of your street and the port number is like your house number. If someone wanted to go to your house, they would need both to find it. So if one computer wants to “talk” to another, it needs both the IP address of the other computer and the port number to use. It’s not a perfect analogy, but it helped me understand concepts that can seem very abstract. . 4.4: Creating the HTML Page . The HTML page is what will be displayed when we access the web app, and we will use HTML code to make this happen. I did this in a file called “index.html”, which is loaded into the web app using the return render_template(…) line from web_server.py. The code is found below: . &lt;!-- Author: Christina Kampel --&gt; &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Go, Go, Gadget!&lt;/title&gt; &lt;!-- Information we want to show on the App Tab --&gt; &lt;style&gt; .column{ width:50%; float:left; } .row::after{ content: &quot;&quot;; clear: both; display: table; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Go, Go, Gadget!&lt;/h1&gt; &lt;h2&gt;Raspberry Pi Weather Stations for the Absolute Beginner&lt;/h2&gt; &lt;p&gt;Christina Kampel&lt;br&gt; Digital Engineering Fellowship&lt;br&gt; University of Calgary&lt;br&gt; Spring 2022&lt;br&gt; &lt;/p&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;column&quot;&gt; &lt;img src=&quot;/static/line_graph_temp.png&quot; alt=&quot;Line Graph of Temperature Data&quot; style=&quot;float:left; width:100%&quot;&gt; &lt;/div&gt; &lt;div class=&quot;column&quot;&gt; &lt;img src=&quot;/static/line_graph_humi.png&quot; alt=&quot;Line Graph of Relative Humidity Data&quot; style=&quot;float:left; width:100%&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;p&gt; Average Percent Difference Between DHT11 and DHT20 Sensors (Temperature): &lt;b&gt;{{ t_avg_percent_diff }}&lt;/b&gt;%&lt;br&gt; Average Percent Difference Between DHT11 and DHT20 Sensors (Relative Humidity)): &lt;b&gt;{{ h_avg_percent_diff }}&lt;/b&gt;%&lt;br&gt; &lt;/p&gt; &lt;/body&gt; &lt;/html&gt; . Some key points to note: . The content within the &lt;title&gt; tag appears on the tab of the browser you are using to view the page. . | The content within the &lt;style&gt; tag is used to format the two graphs on the same line, side-by-side. Without this content, the images appear one after the other on two separate lines. . | The content within the &lt;style&gt; tag is written in CSS (Cascading Style Sheet) format. CSS files are often a separate file that is linked within the HTML file and used to format the HTML page (layouts, colours, fonts, etc.). More information about CSS files is available online. . | . Now that we have completed all of our project goals, make sure you Secure Copy the files onto the Raspberry Pi and organize them in the structure shown in 4.1. You are now ready to use your Raspberry Pi Weather Station! . 4.5: Running the Raspberry Pi Weather Station . To show off all your hard work, follow the steps below! . Ensure your personal computer and the Raspberry Pi are on the same network. . | Connect to the Raspberry Pi via SSH. . | If needed, gather data from your DHT11 and DHT20 sensors, run the T_H_data_collector.py file on the Raspberry Pi. The Raspberry Pi should be connected to both sensors. . | Start the web application by running the web_server.py file on the Raspberry Pi. . | View the web application by opening a web browser on your personal computer and typing http://[IP Address of Raspberry Pi]:5000/ into the address bar. The web page, graphs, and statistics will appear! . | . Thank You For Reading! . I hope you enjoyed this project as much as I did. If you are curious about other projects you can try with a Raspberry Pi, I highly recommend reading the inspiration for this project: Creative Projects with Raspberry Pi by Kirsten Kearney and Will Freeman (ISBN: 978-1-4197-2500-5). . . Image Sources . Raspberry Pi 4 Model B Image: https://www.raspberrypi.com/products/raspberry-pi-4-model-b/ . | Grove Base HAT Pinout: https://wiki.seeedstudio.com/Grove_Base_Hat_for_Raspberry_Pi/ . | DHT11 Image: https://components101.com/sensors/dht11-temperature-sensor . | . .",
            "url": "https://de-fellows.github.io/RexCoding/python/raspberry%20pi/matplotlib/graphing%20data/temperature%20and%20humidity/data%20sensors/dht11/dht20/grove%20base%20hat/flask/html/2022/06/18/Go-Go-Gadget.html",
            "relUrl": "/python/raspberry%20pi/matplotlib/graphing%20data/temperature%20and%20humidity/data%20sensors/dht11/dht20/grove%20base%20hat/flask/html/2022/06/18/Go-Go-Gadget.html",
            "date": " • Jun 18, 2022"
        }
        
    
  
    
        ,"post10": {
            "title": "Federated Learning (Data Scientist)",
            "content": "Published by by Leo Wei . Before reading the rest of this blog, make sure you have the Federated Learning (Data Owner) open side by side. . Table of Contents: . What is federated learning? Tools that made federated learning possible | . | Installation | Pysyft Duet (Data scientist) Duet Basics | MNIST with Duet Part 1: Connect to Remote Duet Server | Part 2: Setting up Model and Data | Part 3: Training | Part 4: Inference | . | . | Where to next | . What is federated learning? . In the world of evergrowing data in every industry, data is becoming more scarce due to security and privacy reasons. This makes our jobs as data scientists harder as companies and institutions are holding onto their data for security and competitive reasons. Nowadays, a lot of important data are sensitive personal information, things like health, and happiness, etc. Our ability to solve problems is limited because we can&#39;t access the existing data. . Federated learning is a machine learning setting where multiple clients(data owners) can come together and solve a machine learning problem, under the coordination of a central server(data scientist). Each data owner&#39;s data is stored locally, and will not be access without direct permission. Instead of traditionally training on one machine locally, the network is sent to all clients and trained on multiple clients simultaneously. After training, the machine learning model would aggregate the model updates from the trained model from the clients. . There are many situations in which federated learning can be used to solve problems. One use case of this is in the healthcare industry: Breast cancer is a something that is faced by 1 in 8 woman. It is actually very treatable if it is detected early enough in a mammogram. However, this is where the problem lies. In detection, there is a 1 in 4 chance that the radiologist will give false positive or false negative, and with AI, the detection accuracy is even worse with the accuracy being 1 in 3 false positive or false negative. This is most likely due to our models not having enough training data, the amount of training data we have is less than &lt;0.1% of the world&#39;s mammography images. These data we need are stored across thousands of organizations, and acquiring data from each organization is extremely difficult as some organizations will protect patients&#39; privacy not mentioning the bureaucracy involved in signing contracts and risk management with thousands of different companies and organizations. . Federated learning could tackle this problem by having a massive federated data network, each data center(hospital, research center, etc) would act as a client. We, the data scientist is able to send our machine learning model to each client, and have the client train the model locally, and finally update the global model by exchanging the weighted average of the weights. (FedAvg Algorithm) . . Advantages of federated learning . Data never leaves the owner&#39;s device, privacy of sensitive data is stored. | Federated learning allows devices like cell phones to train collectively, thus saving computation and memory on the server, data scientist&#39;s side. | Data owners are more comfortable with sharing their data, and leading to better machine learning models. | . Limitations of federated learning . Communication, latency is often the bottleneck for federated learning. | Variability in client hardware, it is often the case that after each round of training, the server will have to wait for the slower devices to report back with their trained weights. These stragglers often slow down the network, often times, the network just drop the stragglers, but is that a good approach? Does that mean the model will cater more towards people with faster phones? | . Tools that made federated learning possible . 1. Remote execution . Remote execution is a core tool used in federated learning. Instead of downloading the data from the clients and then performing machine learning on it, remote execution allows you to use the client&#39;s data without their data leaving their devices. . 2. Search and example data . If we are executing functions remotely, how can we do data science without seeing the data? With tools such as sample data, we can feature engineer the data without actually seeing the full data. We can request from the data owners to allow us to see a small sub sample of the data in order for us to get a better understanding of the data. . 3. Differential privacy . How do we query again a database without revealing too much information about its privacy data? Our goal is to achieve perfect privacy, meaning that the output of our query is the same between this database and any identical database with one row removed or replaced. However, achieving this is incredibly difficult and the way in which we attempt to achieve this is by adding a certain level of noise to the data. . 4. Secure multi-party computation . The idea of secure multi-party computation is that multiple people can combine their private inputs to compute a function, without revealing their inputs to each other. . In the following example, we will look at one of the most popular library for federated learning Pysyft. Developed by openmined, pysyft was developed with the goal of secure and private machine learning. The Pysyft library is meant for you to write code that is capable of computing on data not owned on your local machine. In the following demo, we will be exploring the tool of remote execution. . Installation . Before we dive into federated learning, let&#39;s install the necessary packages. . 1. Install Conda environment . conda create --name duet python=3.8 Don&#39;t forget to activate your environment conda activate duet . 2. Install necessary packages . Inside your folder, create a txt file named &#39;requirements.txt&#39; Then copy and past the following inside the txt file numpy aiortc cryptography dataclasses dpcontracts flask forbiddenfruit&gt;=0.1.3 loguru matplotlib nest_asyncio packaging pandas protobuf pydagogy PyNaCl requests scikit-learn seaborn sqlitedict statsmodels typeguard typing-extensions # backport to older python 3 websockets jupyter Jinja2&lt;3.0 Afterwards, we can install the requirements by running the following command . pip install -r requirements.txt . 3. Install Pysyft . pip install syft==0.5.0 . If you have errors . ImportError: cannot import name &#39;soft_unicode&#39; from &#39;markupsafe&#39; Resolve this by python -m pip install markupsafe==2.0.1 | If you have the warning of CrytographyDeprecationWarning, you can ignore it for now. | . Pysyft Duet (Data Scientist) . A peer-to-peer tool developed on top of the PySyft. It allows the data owner to expose their data to the data scientist, and the data scientist can manipulate the data through a zero-knowledge access mechanism. As data owners, you have the right to decide whether to allow the manipulation of data, you can deny or approve requests from the data scientists. As data scientists, you can develop new insights and train your model using the data owned by the data owners. . Duet was used to demonstrate federated learning with PySyft without being deployed in the PyGrid ecosystem. . To start, both the data owner and the data scientist will have to talk to one of the open grid network nodes hosted on AWS by OpenMined. The node will introduce the service to each other behind a firewall and help them connect peer to peer. . | The data owner need to first connect initiate and launch the duet server. . | With the server ID, the data scientist can join the duet session. This will give the data scientist a duet client id. . | The data owner will then need to enter the client id to complete the setup process. . | If all goes well, the data scientist and the data owner should be connected now. . | Duet Basics . As the Data Scientist, you want to perform data science on data that is sitting in the Data Owner&#39;s Duet server in their Notebook. . In order to do this, we must run the code that the Data Owner sends us, which importantly includes their Duet Session ID. The code will look like this, importantly with their real Server ID. . import syft as sy duet = sy.duet(&#39;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;) This will create a direct connection from my notebook to the remote Duet server. Once the connection is established all traffic is sent directly between the two nodes. . Copy and paste the code or Server ID that the Data Owner gives you and run it in the cell below. It will return your Client ID which you must send to the Data Owner to enter into Duet so it can pair your notebooks. . Make sure that the network_url you use is chosen from https://raw.githubusercontent.com/OpenMined/OpenGridNodes/master/network_address . Step 2. Establish Connection with Data Owner . import syft as sy duet = sy.join_duet(&quot;00eec93acc58f144d78a365705d42223&quot;, network_url=&quot;http://ec2-18-218-7-180.us-east-2.compute.amazonaws.com:5000/&quot;) . 🎤 🎸 ♪♪♪ Joining Duet ♫♫♫ 🎻 🎹 ♫♫♫ &gt; DISCLAIMER: Duet is an experimental feature currently in beta. ♫♫♫ &gt; Use at your own risk. &gt; ❤️ Love Duet? Please consider supporting our community! &gt; https://github.com/sponsors/OpenMined ♫♫♫ &gt; Punching through firewall to OpenGrid Network Node at: ♫♫♫ &gt; http://ec2-18-218-7-180.us-east-2.compute.amazonaws.com:5000/ ♫♫♫ &gt; ♫♫♫ &gt; ...waiting for response from OpenGrid Network... ♫♫♫ &gt; DONE! ♫♫♫ &gt; STEP 1: Send the following Duet Client ID to your duet partner! ♫♫♫ &gt; Duet Client ID: 3406364123dfde0c6e7394b2167a9ef9 ♫♫♫ &gt; ...waiting for partner to connect... . /opt/anaconda3/envs/duet/lib/python3.9/site-packages/aiortc/rtcdtlstransport.py:211: CryptographyDeprecationWarning: This version of cryptography contains a temporary pyOpenSSL fallback path. Upgrade pyOpenSSL now. _openssl_assert(lib.SSL_CTX_use_certificate(ctx, self._cert._x509) == 1) # type: ignore /opt/anaconda3/envs/duet/lib/python3.9/site-packages/aiortc/rtcdtlstransport.py:186: CryptographyDeprecationWarning: This version of cryptography contains a temporary pyOpenSSL fallback path. Upgrade pyOpenSSL now. value=certificate_digest(self._cert._x509), # type: ignore . ♫♫♫ &gt; CONNECTED! . The duet variable is your reference to remote operations including supported libraries like torch. . Step 3. Go to Data Owner Notebook &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Step 4. Let&#39;s Search and Create Pointer to Data . We can search for available data with their meta data(tags, decription and object type) with the following: . duet.store.pandas . ID Tags Description object_type . 0 &lt;UID: 2550b41ead684a24ac87a5dced4c5c6d&gt; | [grades] | This is a list of the grades of 6 people | &lt;class &#39;torch.Tensor&#39;&gt; | . We can create a pointer to the data in the duet store. Note that this is the reference to the data, not the actual data. . data_ptr = duet.store[0] . Now, let&#39;s do some computation remotely . average_grade = data_ptr.float().mean() . After we have done the computation, let&#39;s try and get the result from the data owner&#39;s server. . try: average_grade.get() except Exception: print(Exception) . [2022-06-19T16:37:24.260967-0600][CRITICAL][logger]][15013] You do not have permission to .get() Object with ID: &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt;Please submit a request. . &lt;class &#39;Exception&#39;&gt; . Looks like we need to request for permission from the data owner. We can do this by using the .request with your reasoning inside. . average_grade.request(reason = &quot;please, I need it&quot;) . Step 5. Go to Data Owner Notebook &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Step 6. Let&#39;s try to get data from Data Owner . try: average_grade.get() except Exception: print(Exception) . [2022-06-19T16:37:35.877293-0600][CRITICAL][logger]][15013] You do not have permission to .get() Object with ID: &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt;Please submit a request. . &lt;class &#39;Exception&#39;&gt; . Looks like our request didn&#39;t go through, let&#39;s create a new request with a better reasoning. . average_grade.request( reason = &quot;I am a data scientist and I need to know the average of the students&#39; grades for my analysis&quot; ) . Step 7. Go to Data Owner Notebook &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Step 8. Get Result Data . We can check if there are still outstanding requests by running the following block . duet.requests.pandas . . Looks like our request went through, now let&#39;s get the data . avg = average_grade.get() print(avg) . tensor(81.1667) . Step 9. Go to Data Owner Notebook &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; Step 10. Machine Learning with Duet MNIST . MNIST with Duet . Part 1: Connect to Remote Duet Server (Done above) . Part 2: Setting up Model and Data . import torch import torchvision . Note that here, instead of traditionally inheriting from the nn.Module, we inherit from sy.Module, and we also need to pass in a variable called torch_ref when we constuct this network, the torch_ref will be used internally for any calls that would normally be to torch. . class SyNet(sy.Module): def __init__(self, torch_ref): super(SyNet, self).__init__(torch_ref=torch_ref) self.conv1 = self.torch_ref.nn.Conv2d(1, 32, 3, 1) self.conv2 = self.torch_ref.nn.Conv2d(32, 64, 3, 1) self.dropout1 = self.torch_ref.nn.Dropout2d(0.25) self.dropout2 = self.torch_ref.nn.Dropout2d(0.5) self.fc1 = self.torch_ref.nn.Linear(9216, 128) self.fc2 = self.torch_ref.nn.Linear(128, 10) def forward(self, x): x = self.conv1(x) x = self.torch_ref.nn.functional.relu(x) x = self.conv2(x) x = self.torch_ref.nn.functional.relu(x) x = self.torch_ref.nn.functional.max_pool2d(x, 2) x = self.dropout1(x) x = self.torch_ref.flatten(x, 1) x = self.fc1(x) x = self.torch_ref.nn.functional.relu(x) x = self.dropout2(x) x = self.fc2(x) output = self.torch_ref.nn.functional.log_softmax(x, dim=1) return output . local_model = SyNet(torch) . args = { &quot;batch_size&quot;: 64, &quot;test_batch_size&quot;: 1000, &quot;epochs&quot;: 3, &quot;lr&quot;: 0.01, &quot;gamma&quot;: 0.7, &quot;no_cuda&quot;: False, &quot;dry_run&quot;: False, &quot;seed&quot;: 42, &quot;log_interval&quot;: 10, &quot;save_model&quot;: True, } . Now we can send our local model to our partner&#39;s Duet server . model = local_model.send(duet) . We can create an alias for our partner&#39;s torch called remote_torch, we do this so we can refer to the local torch as torch and any operations we want to do remotely as remote_torch. Remeber that the return values from remote_torch are Pointers, not the actual objects themselves. Keep in mind that you cannot mix the pointers with local torch objects. . remote_torch = duet.torch . has_cuda = False has_cuda_ptr = remote_torch.cuda.is_available() has_cuda = bool(has_cuda_ptr.get( request_block=True, reason=&quot;To run test and inference locally&quot;, timeout_secs=20, # change to something slower )) print(has_cuda) use_cuda = not args[&quot;no_cuda&quot;] and has_cuda # now we can set the seed remote_torch.manual_seed(args[&quot;seed&quot;]) device = remote_torch.device(&quot;cuda&quot; if use_cuda else &quot;cpu&quot;) print(f&quot;Data Owner device is {device.type.get()}&quot;) . False Data Owner device is cpu . if has_cuda: model.cuda(device) else: model.cpu() . Get parameters, setup an optimizer and scheduler just like you would do in Pytorch . params = model.parameters() . optimizer = remote_torch.optim.Adadelta(params, lr=args[&quot;lr&quot;]) . scheduler = remote_torch.optim.lr_scheduler.StepLR(optimizer, step_size=1, gamma=args[&quot;gamma&quot;]) . Next we need a training loop so we can improve our remote model. Since we want to train on remote data we should first check if the model is remote since we will be using remote_torch in this function. To check if a model is local or remote simply use the .is_local attribute. . def train(model, torch_ref, train_loader, optimizer, epoch, args, train_data_length): # + 0.5 lets us math.ceil without the import train_batches = round((train_data_length / args[&quot;batch_size&quot;]) + 0.5) print(f&quot;&gt; Running train in {train_batches} batches&quot;) if model.is_local: print(&quot;Training requires remote model&quot;) return model.train() for batch_idx, data in enumerate(train_loader): data_ptr, target_ptr = data[0], data[1] optimizer.zero_grad() output = model(data_ptr) loss = torch_ref.nn.functional.nll_loss(output, target_ptr) loss.backward() optimizer.step() loss_item = loss.item() train_loss = duet.python.Float(0) # create a remote Float we can use for summation train_loss += loss_item if batch_idx % args[&quot;log_interval&quot;] == 0: local_loss = None local_loss = loss_item.get( reason=&quot;To evaluate training progress&quot;, request_block=True, timeout_secs=5 ) if local_loss is not None: print(&quot;Train Epoch: {} {} Loss: {:.4}&quot;.format(epoch, batch_idx, local_loss)) else: print(&quot;Train Epoch: {} {} ?&quot;.format(epoch, batch_idx)) if batch_idx &gt;= train_batches - 1: print(&quot;batch_idx &gt;= train_batches, breaking&quot;) break if args[&quot;dry_run&quot;]: break . def test_local(model, torch_ref, test_loader, test_data_length): # download remote model if not model.is_local: local_model = model.get( request_block=True, reason=&quot;test evaluation&quot;, timeout_secs=5 ) else: local_model = model # + 0.5 lets us math.ceil without the import test_batches = round((test_data_length / args[&quot;test_batch_size&quot;]) + 0.5) print(f&quot;&gt; Running test_local in {test_batches} batches&quot;) local_model.eval() test_loss = 0.0 correct = 0.0 with torch_ref.no_grad(): for batch_idx, (data, target) in enumerate(test_loader): output = local_model(data) iter_loss = torch_ref.nn.functional.nll_loss(output, target, reduction=&quot;sum&quot;).item() test_loss = test_loss + iter_loss pred = output.argmax(dim=1) total = pred.eq(target).sum().item() correct += total if args[&quot;dry_run&quot;]: break if batch_idx &gt;= test_batches - 1: print(&quot;batch_idx &gt;= test_batches, breaking&quot;) break accuracy = correct / test_data_length print(f&quot;Test Set Accuracy: {100 * accuracy}%&quot;) . local_transform_1 = torchvision.transforms.ToTensor() # this converts PIL images to Tensors local_transform_2 = torchvision.transforms.Normalize(0.1307, 0.3081) # this normalizes the dataset # compose our transforms local_transforms = torchvision.transforms.Compose([local_transform_1, local_transform_2]) from syft.util import get_root_data_path # we will configure the test set here locally since we want to know if our Data Owner&#39;s # private training dataset will help us reach new SOTA results for our benchmark test set test_kwargs = { &quot;batch_size&quot;: args[&quot;test_batch_size&quot;], } test_data = torchvision.datasets.MNIST(str(get_root_data_path()), train=False, download=True, transform=local_transforms) test_loader = torch.utils.data.DataLoader(test_data,**test_kwargs) test_data_length = len(test_loader.dataset) print(test_data_length) . 10000 . remote_torchvision = duet.torchvision transform_1 = remote_torchvision.transforms.ToTensor() # this converts PIL images to Tensors transform_2 = remote_torchvision.transforms.Normalize(0.1307, 0.3081) # this normalizes the dataset remote_list = duet.python.List() # create a remote list to add the transforms to remote_list.append(transform_1) remote_list.append(transform_2) # compose our transforms transforms = remote_torchvision.transforms.Compose(remote_list) # The DO has kindly let us initialise a DataLoader for their training set train_kwargs = { &quot;batch_size&quot;: args[&quot;batch_size&quot;], } train_data_ptr = remote_torchvision.datasets.MNIST(str(get_root_data_path()), train=True, download=True, transform=transforms) train_loader_ptr = remote_torch.utils.data.DataLoader(train_data_ptr,**train_kwargs) . # so we can pass that to our training loop and know when to stop def get_train_length(train_data_ptr): train_data_length = len(train_data_ptr) return train_data_length try: if train_data_length is None: train_data_length = get_train_length(train_data_ptr) except NameError: train_data_length = get_train_length(train_data_ptr) print(f&quot;Training Dataset size is: {train_data_length}&quot;) . Training Dataset size is: 60000 . Part 3: Training . import time #args[&quot;dry_run&quot;] = True # comment to do a full train print(&quot;Starting Training&quot;) for epoch in range(1, args[&quot;epochs&quot;] + 1): epoch_start = time.time() print(f&quot;Epoch: {epoch}&quot;) # remote training on model with remote_torch train(model, remote_torch, train_loader_ptr, optimizer, epoch, args, train_data_length) # local testing on model with local torch test_local(model, torch, test_loader, test_data_length) scheduler.step() epoch_end = time.time() print(f&quot;Epoch time: {int(epoch_end - epoch_start)} seconds&quot;) if args[&quot;dry_run&quot;]: break print(&quot;Finished Training&quot;) . if args[&quot;save_model&quot;]: model.get( request_block=True, reason=&quot;test evaluation&quot;, timeout_secs=5 ).save(&quot;./duet_mnist.pt&quot;) . Part 4: Inference . Now we can use our model to do inference either remotely or locally. . import matplotlib.pyplot as plt def draw_image_and_label(image, label): fig = plt.figure() plt.tight_layout() plt.imshow(image, cmap=&quot;gray&quot;, interpolation=&quot;none&quot;) plt.title(&quot;Ground Truth: {}&quot;.format(label)) def prep_for_inference(image): image_batch = image.unsqueeze(0).unsqueeze(0) image_batch = image_batch * 1.0 return image_batch . def classify_local(image, model): if not model.is_local: print(&quot;model is remote try .get()&quot;) return -1, torch.Tensor([-1]) image_tensor = torch.Tensor(prep_for_inference(image)) output = model(image_tensor) preds = torch.exp(output) local_y = preds local_y = local_y.squeeze() pos = local_y == max(local_y) index = torch.nonzero(pos, as_tuple=False) class_num = index.squeeze() return class_num, local_y . def classify_remote(image, model): if model.is_local: print(&quot;model is local try .send()&quot;) return -1, remote_torch.Tensor([-1]) image_tensor_ptr = remote_torch.Tensor(prep_for_inference(image)) output = model(image_tensor_ptr) preds = remote_torch.exp(output) preds_result = preds.get( request_block=True, reason=&quot;To see a real world example of inference&quot;, timeout_secs=10 ) if preds_result is None: print(&quot;No permission to do inference, request again&quot;) return -1, torch.Tensor([-1]) else: # now we have the local tensor we can use local torch local_y = torch.Tensor(preds_result) local_y = local_y.squeeze() pos = local_y == max(local_y) index = torch.nonzero(pos, as_tuple=False) class_num = index.squeeze() return class_num, local_y . import random total_images = test_data_length # 10000 index = random.randint(0, total_images) print(&quot;Random Test Image:&quot;, index) count = 0 batch = index // test_kwargs[&quot;batch_size&quot;] batch_index = index % int(total_images / len(test_loader)) for tensor_ptr in test_loader: data, target = tensor_ptr[0], tensor_ptr[1] if batch == count: break count += 1 print(f&quot;Displaying {index} == {batch_index} in Batch: {batch}/{len(test_loader)}&quot;) if batch_index &gt; len(data): batch_index = 0 image_1 = data[batch_index].reshape((28, 28)) label_1 = target[batch_index] draw_image_and_label(image_1, label_1) . Random Test Image: 1192 Displaying 1192 == 192 in Batch: 1/10 . class_num, preds = classify_remote(image_1, model) print(f&quot;Prediction: {class_num} Ground Truth: {label_1}&quot;) print(preds) . Prediction: 4 Ground Truth: 9 tensor([1.3907e-04, 5.6652e-04, 2.7458e-04, 4.1249e-03, 7.1542e-01, 3.2733e-03, 2.5919e-03, 2.5418e-02, 2.2922e-02, 2.2527e-01], grad_fn=&lt;SqueezeBackward0&gt;) . local_model = model.get( request_block=True, reason=&quot;To run test and inference locally&quot;, timeout_secs=5, ) . class_num, preds = classify_local(image_1, local_model) print(f&quot;Prediction: {class_num} Ground Truth: {label_1}&quot;) # here we can see the actual output print(preds) . Prediction: 4 Ground Truth: 9 tensor([0.0020, 0.0041, 0.0078, 0.0385, 0.2883, 0.1381, 0.0244, 0.0568, 0.2300, 0.2100], grad_fn=&lt;SqueezeBackward0&gt;) . from PIL import Image, ImageEnhance import PIL.ImageOps import os def classify_url_image(image_url): filename = os.path.basename(image_url) os.system(f&#39;curl -O {image_url}&#39;) im = Image.open(filename) im = PIL.ImageOps.invert(im) # im = im.resize((28,28), Image.ANTIALIAS) im = im.convert(&#39;LA&#39;) enhancer = ImageEnhance.Brightness(im) im = enhancer.enhance(3) print(im.size) fig = plt.figure() plt.tight_layout() plt.imshow(im, cmap=&quot;gray&quot;, interpolation=&quot;none&quot;) # classify local class_num, preds = classify_local(image_1, local_model) print(f&quot;Prediction: {class_num}&quot;) print(preds) . image_url = &quot;https://raw.githubusercontent.com/kensanata/numbers/master/0018_CHXX/0/number-100.png&quot; classify_url_image(image_url) . % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0 . (89, 93) Prediction: 4 tensor([0.0007, 0.0016, 0.0049, 0.0291, 0.4118, 0.0332, 0.0071, 0.0289, 0.0928, 0.3899], grad_fn=&lt;SqueezeBackward0&gt;) . 100 4655 100 4655 0 0 3819 0 0:00:01 0:00:01 --:--:-- 3840 . Where to go next? . https://courses.openmined.org/ OpenMined(PySyft). This is where I learned most of the federated learning material, and they have a great series on private AI technologies. Highly recommend. . | https://flower.dev/ Flower Another federated learning framework. . | https://www.tensorflow.org/federated Tensorflow Federated. Integrates very nicely with Tensorflow. | . Acknowledgement . I would like to use this last section by thanking the support of my professor Yves Pauchard, and the DE Followship group. As well as the OpenMined Organization for innovating and building technology for the future, their work has inspired me to pursue more research and learning in the field of federated learning and I am extremely thankful. . &lt;/div&gt; .",
            "url": "https://de-fellows.github.io/RexCoding/2022/06/09/MNIST_Data_Scientist.html",
            "relUrl": "/2022/06/09/MNIST_Data_Scientist.html",
            "date": " • Jun 9, 2022"
        }
        
    
  
    
        ,"post11": {
            "title": "Federated Learning (Data Owner)",
            "content": "Published by by Leo Wei . Before reading the rest of this blog, make sure you have the Federated Learning (Data Scientist) open side by side. . Pysyft Duet (Data Owner) . As a data owner, you want someone else to perform data science on data that you own, and you also want to protect this data by not give them the entirety of your data. To do this, we can load our data into our local duet server. To begin the process, you must launch a Duet session and help your Duet partner (data scientist) connect to this server. . Duet Basics . Make sure that the network_url you use is chosen from https://raw.githubusercontent.com/OpenMined/OpenGridNodes/master/network_address . Step 1. Initiate Duet Connection . import syft as sy duet = sy.launch_duet(network_url=&quot;http://ec2-18-218-7-180.us-east-2.compute.amazonaws.com:5000&quot;) . 🎤 🎸 ♪♪♪ Starting Duet ♫♫♫ 🎻 🎹 ♫♫♫ &gt; DISCLAIMER: Duet is an experimental feature currently in beta. ♫♫♫ &gt; Use at your own risk. &gt; ❤️ Love Duet? Please consider supporting our community! &gt; https://github.com/sponsors/OpenMined ♫♫♫ &gt; Punching through firewall to OpenGrid Network Node at: ♫♫♫ &gt; http://ec2-18-218-7-180.us-east-2.compute.amazonaws.com:5000 ♫♫♫ &gt; ♫♫♫ &gt; ...waiting for response from OpenGrid Network... ♫♫♫ &gt; DONE! ♫♫♫ &gt; Duet Server ID: 00eec93acc58f144d78a365705d42223 ♫♫♫ &gt; STEP 1: Send the following code to your Duet Partner! import syft as sy duet = sy.duet(&#34;00eec93acc58f144d78a365705d42223&#34;) ♫♫♫ &gt; STEP 2: Ask your partner for their Client ID and enter it below! ♫♫♫ &gt; Duet Partner&#39;s Client ID: 3406364123dfde0c6e7394b2167a9ef9 ♫♫♫ &gt; Connecting... . /opt/anaconda3/envs/duet/lib/python3.9/site-packages/aiortc/rtcdtlstransport.py:211: CryptographyDeprecationWarning: This version of cryptography contains a temporary pyOpenSSL fallback path. Upgrade pyOpenSSL now. _openssl_assert(lib.SSL_CTX_use_certificate(ctx, self._cert._x509) == 1) # type: ignore /opt/anaconda3/envs/duet/lib/python3.9/site-packages/aiortc/rtcdtlstransport.py:186: CryptographyDeprecationWarning: This version of cryptography contains a temporary pyOpenSSL fallback path. Upgrade pyOpenSSL now. value=certificate_digest(self._cert._x509), # type: ignore . ♫♫♫ &gt; CONNECTED! ♫♫♫ &gt; DUET LIVE STATUS * Objects: 18 Requests: 0 Messages: 159124 Request Handlers: 1 . Step 2. Go to Data Scientist Notebook . After we have established connection between the data owner and the data scientist. Let&#39;s upload some data to the Duet server . Step 3. Create Data and Upload to Duet Server . import torch as th . grade_data = th.tensor([98, 78, 83, 88, 67, 73]) grade_data = grade_data.tag(&quot;grades&quot;) grade_data = grade_data.describe(&quot;This is a list of the grades of 6 people&quot;) . # server, note that the data is still on the owner&#39;s machine and cannot be viewed or access # without the permission from the data owner grade_data_pointer = grade_data.send(duet, pointable = True) . [2022-06-19T16:37:24.257117-0600][CRITICAL][logger]][15016] You do not have permission to .get() Object with ID: &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt;Please submit a request. [2022-06-19T16:37:24.258016-0600][CRITICAL][logger]][15016] You do not have permission to .get() Object with ID: &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt;Please submit a request. . Step 4. Go to Data Scientist Notebook . Step 5. Check for Requests from Data Scientist . duet.requests.pandas . Requested Object&#39;s tags Reason Request ID Requested Object&#39;s ID Requested Object&#39;s type . 0 [grades, float, mean] | please, I need it | &lt;UID: 16cb1d6c39024a87acf1a29dd1f3d9d7&gt; | &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt; | | . duet.requests[0].deny() . [2022-06-19T16:37:35.873523-0600][CRITICAL][logger]][15016] You do not have permission to .get() Object with ID: &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt;Please submit a request. [2022-06-19T16:37:35.874204-0600][CRITICAL][logger]][15016] You do not have permission to .get() Object with ID: &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt;Please submit a request. . Step 6. Go to Data Scientist Notebook . Step 7. Request Handling . duet.requests.pandas . Requested Object&#39;s tags Reason Request ID Requested Object&#39;s ID Requested Object&#39;s type . 0 [grades, float, mean] | I am a data scientist and I need to know the a... | &lt;UID: 1faa4d8b428748f3840271919a750a5b&gt; | &lt;UID: 0e6d0efcb06441db9d958e2006f5cbc8&gt; | | . duet.requests[0].request_description . &#34;I am a data scientist and I need to know the average of the students&#39; grades for my analysis&#34; . duet.requests[0].accept() . Step 8. Go to Data Scientist Notebook . Step 9. Getting MNIST Data and Make Add Request Handlers . MNIST with Duet . Part 1: Launch a Duet Server and Connect (Done above) . Part 2: Get data . from syft.util import get_root_data_path import torchvision torchvision.datasets.MNIST(get_root_data_path(), train=True, download=True, transform = torchvision.transforms.Compose([torchvision.transforms.ToTensor(), torchvision.transforms.Normalize((0.1307,), (0.3081,))])) torchvision.datasets.MNIST(get_root_data_path(), train=False, download=True, transform = torchvision.transforms.Compose([torchvision.transforms.ToTensor(), torchvision.transforms.Normalize((0.1307,), (0.3081,))])) . Dataset MNIST Number of datapoints: 10000 Root location: /Users/leowei/.syft/data Split: Test StandardTransform Transform: Compose( ToTensor() Normalize(mean=(0.1307,), std=(0.3081,)) ) . Part 2: Add Request Handlers . duet.requests.pandas . . duet.store.pandas # duet.requests.add_handler(action = &quot;deny&quot;) . ID Tags Description object_type . 0 &lt;UID: 2550b41ead684a24ac87a5dced4c5c6d&gt; | [grades] | This is a list of the grades of 6 people | &lt;class &#39;torch.Tensor&#39;&gt; | . duet.requests.add_handler(action=&quot;accept&quot;) . /opt/anaconda3/envs/duet/lib/python3.9/site-packages/syft/lib/torch/uppercase_tensor.py:30: UserWarning: The .grad attribute of a Tensor that is not a leaf Tensor is being accessed. Its .grad attribute won&#39;t be populated during autograd.backward(). If you indeed want the gradient for a non-leaf Tensor, use .retain_grad() on the non-leaf Tensor. If you access the non-leaf Tensor by mistake, make sure you access the leaf Tensor instead. See github.com/pytorch/pytorch/pull/30531 for more informations. grad = getattr(obj, &#34;grad&#34;, None) . We have done everything on the data owner&#39;s side, the rest is continued on the data scientist&#39;s notebook Step 10. Go to Data Scientist Notebook .",
            "url": "https://de-fellows.github.io/RexCoding/2022/06/09/MNIST_Data_Owner.html",
            "relUrl": "/2022/06/09/MNIST_Data_Owner.html",
            "date": " • Jun 9, 2022"
        }
        
    
  
    
        ,"post12": {
            "title": "Reinforcement Learning for Engineers in a Hurry",
            "content": "What is Reinforcement Learning? . Reinforcement Learning (RL) in the context of Machine Learning (ML) is one of the three fundamental ML paradigms. . . To properly answer this question, we first need to dive into the different aspects of RL. . Herein, we will use certain terminology to discuss the nature of RL. It is crucial to understand their meanings and how they distinguish RL from the other branches of ML. To get things started, we will present the notion of an agent existing in an environment. . An environment in the relevant context refers to a space - not necessarily a physical one - that exists and can be interacted with. Interactions with such an environment are called actions and should produce some sort of response that can be percieved by anything existing in that environment. . An agent exists in an environment and is able to percieve it, meaning that any response that the environment produces can be experienced by the agent. More specifically, an intelligent agent (IA) is one who takes non-random actions based on feedback from an environment. This feedback comes in the form of two notions, state and reward, which we will discuss more later. An IA takes said actions in order to reach some desirable end result. They may exhibit learning by adjusting their actions over time, or memory by using past experiences in an environment to adjust their current actions. . Putting these concepts together, RL involves an agent learning to take actions in an environment to reach some goal. . Making a Move . For the purpose of RL, it is necessary to have actions performed in a controlled and measurable manner so that we may use information produced by the environment for the benefit of learning. This is where our step function comes into play. A step function can be thought of as the process of taking an action, and recieving a response. It is best summarized in a diagram. . . We see the aforementioned terms state and reward appearing in this flowchart. The state of the environment embodies some variable that describes the environment and changes over time. For example, humidity may be a state variable of the atmosphere. The reward is some feedback from the environment that characterizes the action taken by the agent. A desirable action outcome recieves a positive reward, while an undesireable outcome recieves a negative reward. . An agent chooses to take an action A on the environment at time t based on the current state S at that same time t. The current action A applied on the environment results in a new state produced at time t+1. As we &#39;take a step,&#39; The new state becomes the current, producing a certain action. The cycle repeats, each being called a step. This results in a continuous feedback loop that allows the agent to exist meaningfully. . Decisions, Decisions . The pertinent question still remains, how does an IA make decisions, or learn to do so? Noteably in the previous section, we had little to say about the reward aspect of the flowchart. This reward is what teaches our IA to make certain decisions. . The &#39;brain&#39; of the IA is the policy network. In essence, this is a mathematical function that takes a set of inputs and maps them to an output space. This function has parameters that can be changed to produce different outputs for a given input set. We can exploit this relationship if we are able to determine how to tune these parameters such that the mapping function always leads our IA to the best output based on its inputs. This is the concept of learning. . More specifically, in RL an IA learns to tune these parameters so that it always makes the best choice for a given environment state. The notion of &#39;best&#39; is where our reward comes in. If an IA recieves a positive reward for an action performed due to an input state, we tune the policy network&#39;s parameters such that the IA is a bit more likely to produce the same action the next time that state comes around. If an IA recieves a negative reward (penalty), we do the opposite and tune so that it is less likely to repeat this behaviour. . The &#39;tuning&#39; process is a vastly complex topic that need not be explained here to grasp the idea of RL. It suffices to know why this tuning happens and how it affects the IA&#39;s behaviour. . The Brain . For the purpose of this tutorial, we will use a Neural Network (NN) as the policy network for our IA. . . Neural networks reflect the way that biological brains are designed (in a very simplified manner, that is). Once again, NNs are realtively complex and will not be explained here, but it suffices to know that they fit the role of a policy network. The NN has tunable parameters (weights, biases), an input layer (for our state) and an output layer (for our action). The weights and biases will be varied according to the reward recieved during learning. . Putting the Pieces Together . All in all, we end up with a diagram that looks like the following. . . The NN takes actions based on the state. When learning, the reward updates the parameters of the NN. . Something to note is that when the agent is not learning, the rewards are out the picture. Rewards are only present when learning, and otherwise, our agent is only able to see the state of the environment. . Training an Intelligent Agent . We will be working in Python, using Keras/Tensorflow as our backbone as well as a reinforcement learning API, Keras-RL. Additionally, to simplify the creation of an environment we will be leveraging OpenAI Gym 1 which presents many simple environments with states, steps, actions, rewards and such already integrated. . 0. Getting Things Ready . First, we need to install any dependencies that we may not already have. . #!pip install numpy #!pip install gym #!pip install pygame #!pip install tensorflow==2.5.0 #!pip install keras #!pip install keras-rl2 #!pip install nnv . . 1. Testing the Environment . We make the necessary imports to get started with the design of our environment. . import gym import random import warnings . . Next, we can start setting up our environment as follows. . env = gym.make(&quot;CartPole-v1&quot;) . For the purpose of this demonstration, I have chosen a simple game as the environment. The CartPole game runs on PyGame, and has the user attempt to balance a leaning pole on a moving cart. . . Let&#39;s learn a bit about our environment. What are the sizes of our state and action spaces? . states = env.observation_space.shape[0] actions = env.action_space.n print(states,actions) . 4 2 . As we can see, our environment has 4 states and 2 possible actions. A bit of digging into the OpenAI Gym documentation and we are able to figure out what these actually are. . . The 4 states are the cart position and velocity, and pole angle and angular velocity. We can see the various boundaries for each of these states in the above tables. For context, the cart position is calculated from the origin and its velocity is the the difference in its position per step. Similarly, the pole angle is measured from the normal to the cart axis and the angular velocity is the change in this angle per step. These 4 states will serve as the input into our policy network. . . Now is probably a good time to mention that a step does not necessarily have to coincide with a unit of real time. As such, velocity in the above states does not involve change per unit time but rather change per step. . . The 2 actions that we can take involve moving the cart in either the positive or negative x direction ([1,0] respectively). These represent the output of our policy network. . Looking into the documentation, the game is bounded by certain rules. We recieve a +1 reward (score) for each step in which the pole is still upright. Upright implies that the pole is within the angle range [-0.2095,0.2095]. The game terminates at a max score of 500, when the pole is no longer upright, or when the cart position exits the limits [-2.4, 2.4] - whichever condition is reached first. . Now, we will attempt to test our environment with a random agent - one which does not have a policy network and makes decisions randomly. . def RandomAgentTest(environment,episodes): total = 0 #Running summation of the score in each game run for episode in range(1, episodes+1): #Run game &#39;episode&#39; number of times state = environment.reset() #reset game environment to the base state done = False #variable holds boolean corresponding to whether game episode is complete or not score = 0 #current episode score, resets to 0 while not done: environment.render() #start our environment action = random.choice([0,1]) #Choose a random action from action space. 1 -&gt; move right, 0 -&gt; move left n_state, reward, done, info = environment.step(action) #Take random action score+=reward #Add reward to cumulative score print(&#39;Episode:{} Score:{}&#39;.format(episode, score)) total = total + score print(&#39;&#39;) print(&#39;Mean score over&#39;,episodes,&#39;episodes --&gt; &#39;,total/episodes) . . RandomAgentTest(env,10) . Episode:1 Score:20.0 Episode:2 Score:14.0 Episode:3 Score:19.0 Episode:4 Score:14.0 Episode:5 Score:17.0 Episode:6 Score:34.0 Episode:7 Score:20.0 Episode:8 Score:43.0 Episode:9 Score:14.0 Episode:10 Score:29.0 Mean score over 10 episodes --&gt; 22.4 . As a frame of reference, this game has a maximum score of 500. As we can see, random actions give a very poor score. . . Now, we will design a policy network for our agent to give it the ability to learn. . 2. Adding Intelligence - Keras NN Model . First, we need to import the necessary resources. . import numpy as np from tensorflow.keras.models import Sequential from tensorflow.keras.layers import Dense, Flatten from tensorflow.keras.optimizers import SGD from rl.agents import DQNAgent from rl.policy import EpsGreedyQPolicy from rl.memory import SequentialMemory . . Our RL model need not be too complex, as the game that is being tackled is relatively simple. We need the input of the network to accept our 4 states, and we need an output of 2 actions. The action with the higher activation at the network&#39;s output is the action that the agent will perform. . For the hidden (inner) layers of the NN, we will have two dense (fully connected) layers. Each layer will have 12 neurons, with ReLU activation between layers (to prevent the layers from collapsing into a linear function). . model = Sequential() model.add(Flatten(input_shape=(1,states))) #&#39;states&#39; variable holds the number of states of the environment (4 inputs) model.add(Dense(12,activation=&#39;relu&#39;)) #dense -&gt; fully connected layer, relu activation between layers. 12 neurons. model.add(Dense(12, activation=&#39;relu&#39;)) model.add(Dense(actions, activation=&#39;linear&#39;)) #&#39;actions&#39; variable holds the number of actions of the environment (2 outputs) model.summary() . Model: &#34;sequential&#34; _________________________________________________________________ Layer (type) Output Shape Param # ================================================================= flatten (Flatten) (None, 4) 0 _________________________________________________________________ dense (Dense) (None, 12) 60 _________________________________________________________________ dense_1 (Dense) (None, 12) 156 _________________________________________________________________ dense_2 (Dense) (None, 2) 26 ================================================================= Total params: 242 Trainable params: 242 Non-trainable params: 0 _________________________________________________________________ . For a visual representation of the above NN: . from nnv import NNV layers = [ {&quot;title&quot;:&quot;input n(states)&quot;, &quot;units&quot;: states, &quot;color&quot;: &quot;darkBlue&quot;,&quot;edges_color&quot;:&quot;red&quot;}, {&quot;title&quot;:&quot;hidden 1 n(relu)&quot;, &quot;units&quot;: 12, &quot;edges_color&quot;:&quot;black&quot;}, {&quot;title&quot;:&quot;hidden 2 n(relu)&quot;, &quot;units&quot;: 12, &quot;edges_color&quot;:&quot;red&quot;}, {&quot;title&quot;:&quot;output n(actions)&quot;, &quot;units&quot;: actions,&quot;color&quot;: &quot;darkBlue&quot;}, ] NNV(layers).render() . . (&lt;Figure size 432x288 with 1 Axes&gt;, &lt;AxesSubplot:&gt;) . 3. Training our Model/Agent . Now that we are at the training stage, we will expain some key topics necessary to having a general understanding of the process. . 3A. Preparation . i) Replay Memory . Replay memory is essentially a catalogue of past states and actions kept when training our agent. 2 Keras-RL provides a convenient class for storing this information, which can be used as follows. . memory = SequentialMemory(limit=50000, window_length=1) . The &#39;limit&#39; hyperparameter specifies the size of memory made available during training. When we surpass 50000 experiences, the oldest will be replaced by the newest. . This begs the question - why do we need memory when training? . When we train our IA, it easy to build sequential correlation between actions and states. In simpler terms, if we train our agent on states as they come with time (sequentially), we run the risk of teaching our agent to perform actions soleley based on time, rather than information recieved from the environment. As such, we sample batches of experiences from our memory at random when training our agent as to break this correlation. 2 . A great analogy here would be a comparison between 2 hypothetical students taking a multiple choice math exam. Student A gets hold of the answer key, and decides to remember the answer to every question based on its number in order. Student B decides to study the content, and learn how to answer each question based on what is asked. Student A here reflects training our agent without memory, relying solely on the sequential order of the questions to know the corresponding answer. Student B understands what each question presents, and represents training with memory. . ii) Policy . Policy in Keras-RL defines the strategy we use to train our NN. We will be using a simple ε-greedy policy which seeks to balance exploration and exploitation. 2 . policy = EpsGreedyQPolicy(eps=0.3) . The &#39;eps&#39; hyperparameter controls the probability of exploration, and therefore eps=0.3 implies a 30% probability of exploration. . Exploration involves the agent taking random actions in its environment, allowing it to find new &#39;paths&#39; of actions that it can take to optimize the reward. . Exploitation involves the agent taking actions with the highest expected reward, allowing it to follow &#39;paths&#39; of actions that yielded greater reward in previous episodes. . iii) Deep Q-Network Agent . We will now put these concepts into play during our training. . agent = DQNAgent(model=model, memory=memory, policy=policy ,nb_actions=actions, nb_steps_warmup=1000) . First, we must create our agent object with references to our model, memory, and policy as seen above. We can define the number of actions that our agent can take through the &#39;nb_actions&#39; parameter. Furthermore, the parameter &#39;nb_steps_warmup&#39; allows us to define how many steps our agent should take before we begin to sample from memory for training. . In terms of our optimizer, we will be using Stochastic Gradient Descent (SGD). SGD is the agorithm responsible for adjusting the weights inside of our neural network, details of which we will not go into. Learning Rate (learning_rate) is a hyperparameter that influences the optimization of our NN weights. For a performance metric, we will use mean squared error (mse). . agent.compile(SGD(learning_rate=1e-3), metrics=[&#39;mse&#39;]) . 3B. Training . The next step involves the training of our agent. We will call our .fit() method, which initiates this training. To this method we pass our environment, and give a limit to the number of steps for which we will train. Additionally, we set visualize to False so that our environment is not visible while training, as this would slow down the process. . warnings.filterwarnings(&quot;ignore&quot;, category=DeprecationWarning) warnings.filterwarnings(&quot;ignore&quot;, category=UserWarning) #Suppressing Deprecation &amp; User Warnings agent.fit(env, nb_steps=30000, visualize=False, verbose=1) . Training for 30000 steps ... Interval 1 (0 steps performed) 10000/10000 [==============================] - 70s 7ms/step - reward: 1.0000 179 episodes - episode_reward: 55.531 [9.000, 240.000] - loss: 17.322 - mse: 7884.326 - mean_q: 125.991 Interval 2 (10000 steps performed) 10000/10000 [==============================] - ETA: 0s - reward: 1.000 - 74s 7ms/step - reward: 1.0000 101 episodes - episode_reward: 99.168 [11.000, 327.000] - loss: 18.144 - mse: 7978.776 - mean_q: 126.132 Interval 3 (20000 steps performed) 10000/10000 [==============================] - 74s 7ms/step - reward: 1.0000 done, took 218.268 seconds . &lt;tensorflow.python.keras.callbacks.History at 0x221943ec2b0&gt; . Now that we have our trained agent, we can test our agent&#39;s performance inside of the environment and compare it to our random agent at the beginning of this tutorial. . n_test_episodes = 20 scores = agent.test(env, nb_episodes=n_test_episodes, visualize=0) print(&#39;&#39;) print(&#39;Mean score over&#39;,n_test_episodes,&#39;is &gt; &#39;, np.mean(scores.history[&#39;episode_reward&#39;])) . Testing for 20 episodes ... Episode 1: reward: 227.000, steps: 227 Episode 2: reward: 200.000, steps: 200 Episode 3: reward: 213.000, steps: 213 Episode 4: reward: 196.000, steps: 196 Episode 5: reward: 204.000, steps: 204 Episode 6: reward: 206.000, steps: 206 Episode 7: reward: 204.000, steps: 204 Episode 8: reward: 210.000, steps: 210 Episode 9: reward: 207.000, steps: 207 Episode 10: reward: 210.000, steps: 210 Episode 11: reward: 190.000, steps: 190 Episode 12: reward: 207.000, steps: 207 Episode 13: reward: 225.000, steps: 225 Episode 14: reward: 211.000, steps: 211 Episode 15: reward: 194.000, steps: 194 Episode 16: reward: 193.000, steps: 193 Episode 17: reward: 219.000, steps: 219 Episode 18: reward: 208.000, steps: 208 Episode 19: reward: 200.000, steps: 200 Episode 20: reward: 218.000, steps: 218 Mean score over 20 is &gt; 207.1 . RandomAgentTest(env,20) . Episode:1 Score:12.0 Episode:2 Score:17.0 Episode:3 Score:20.0 Episode:4 Score:62.0 Episode:5 Score:25.0 Episode:6 Score:17.0 Episode:7 Score:30.0 Episode:8 Score:20.0 Episode:9 Score:19.0 Episode:10 Score:15.0 Episode:11 Score:13.0 Episode:12 Score:26.0 Episode:13 Score:27.0 Episode:14 Score:27.0 Episode:15 Score:48.0 Episode:16 Score:15.0 Episode:17 Score:16.0 Episode:18 Score:81.0 Episode:19 Score:18.0 Episode:20 Score:20.0 Mean score over 20 episodes --&gt; 26.4 . If we observe the above output cells, we can see that our trained agent averaged a score of 207.1 over 20 episodes, while our random agent averaged 26.4 - a huge difference! . We can see how our IA performs on a single run of the game below. . agent.test(env, nb_episodes=1, visualize=1) . Testing for 1 episodes ... Episode 1: reward: 210.000, steps: 210 . &lt;tensorflow.python.keras.callbacks.History at 0x22190bc3e50&gt; . . Note the ability of the agent to keep the pole balanced for a significantly longer period of time when contrasted to the random agent. This difference reflects the fact that we now have an agent with some hint of useful decision making. . Wrapping Up . It is with some caution that we can say that our trained agent is now &#39;smart enough&#39; to play this game. . As we can infer, RL has numerous applications that extend from such a simplistic environment and can find usefulness in a large scope of fields. It is a field with diverse reach that finds a place for itself in a modern world concerned with automation. Simple environments like the one presented here can serve as an analogue to more real-world problems. Having given this introduction, I implore the reader to further their knowledge into Reinforcement Learning. . Hopefully this read has made you wonder how you can apply RL to other tasks similar to the one presented here. A great stepping stone would be to look into the OpenAI Gym Documentation and explore the environemnets available its users, which range from Atari game recreations to simple 3D locomotion simulations. Try your hand at creating an agent to traverse these environments and along the way explore the various tweaks that can be applied during training to maximize your score! . 1. OpenAI Gym Documentation ↩ . 2. Reinforcement Learning: An Introduction, Second Edition by Richard S. Sutton and Andrew G. Bartow ↩ .",
            "url": "https://de-fellows.github.io/RexCoding/machine%20learning/reinforcement%20learning/neural%20networks/2022/05/31/Reinforcement-Learning.html",
            "relUrl": "/machine%20learning/reinforcement%20learning/neural%20networks/2022/05/31/Reinforcement-Learning.html",
            "date": " • May 31, 2022"
        }
        
    
  
    
        ,"post13": {
            "title": "Fastpages Notebook Blog Post",
            "content": "About . This notebook is a demonstration of some of capabilities of fastpages with notebooks. . With fastpages you can save your jupyter notebooks into the _notebooks folder at the root of your repository, and they will be automatically be converted to Jekyll compliant blog posts! . Front Matter . The first cell in your Jupyter Notebook or markdown blog post contains front matter. Front matter is metadata that can turn on/off options in your Notebook. It is formatted like this: . # &quot;My Title&quot; &gt; &quot;Awesome summary&quot; - toc:true- branch: master - badges: true - comments: true - author: Hamel Husain &amp; Jeremy Howard - categories: [fastpages, jupyter] . Setting toc: true will automatically generate a table of contents | Setting badges: true will automatically include GitHub and Google Colab links to your notebook. | Setting comments: true will enable commenting on your blog post, powered by utterances. | . The title and description need to be enclosed in double quotes only if they include special characters such as a colon. More details and options for front matter can be viewed on the front matter section of the README. . Markdown Shortcuts . A #hide comment at the top of any code cell will hide both the input and output of that cell in your blog post. . A #hide_input comment at the top of any code cell will only hide the input of that cell. . The comment #hide_input was used to hide the code that produced this. . put a #collapse-hide flag at the top of any cell if you want to hide that cell by default, but give the reader the option to show it: . import pandas as pd import altair as alt . . put a #collapse-show flag at the top of any cell if you want to show that cell by default, but give the reader the option to hide it: . cars = &#39;https://vega.github.io/vega-datasets/data/cars.json&#39; movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; sp500 = &#39;https://vega.github.io/vega-datasets/data/sp500.csv&#39; stocks = &#39;https://vega.github.io/vega-datasets/data/stocks.csv&#39; flights = &#39;https://vega.github.io/vega-datasets/data/flights-5k.json&#39; . . place a #collapse-output flag at the top of any cell if you want to put the output under a collapsable element that is closed by default, but give the reader the option to open it: . print(&#39;The comment #collapse-output was used to collapse the output of this cell by default but you can expand it.&#39;) . The comment #collapse-output was used to collapse the output of this cell by default but you can expand it. . . Interactive Charts With Altair . Charts made with Altair remain interactive. Example charts taken from this repo, specifically this notebook. . Example 1: DropDown . # use specific hard-wired values as the initial selected values selection = alt.selection_single( name=&#39;Select&#39;, fields=[&#39;Major_Genre&#39;, &#39;MPAA_Rating&#39;], init={&#39;Major_Genre&#39;: &#39;Drama&#39;, &#39;MPAA_Rating&#39;: &#39;R&#39;}, bind={&#39;Major_Genre&#39;: alt.binding_select(options=genres), &#39;MPAA_Rating&#39;: alt.binding_radio(options=mpaa)} ) # scatter plot, modify opacity based on selection alt.Chart(df).mark_circle().add_selection( selection ).encode( x=&#39;Rotten_Tomatoes_Rating:Q&#39;, y=&#39;IMDB_Rating:Q&#39;, tooltip=&#39;Title:N&#39;, opacity=alt.condition(selection, alt.value(0.75), alt.value(0.05)) ) . Example 2: Tooltips . alt.Chart(df).mark_circle().add_selection( alt.selection_interval(bind=&#39;scales&#39;, encodings=[&#39;x&#39;]) ).encode( alt.X(&#39;Rotten_Tomatoes_Rating&#39;, type=&#39;quantitative&#39;), alt.Y(&#39;IMDB_Rating&#39;, type=&#39;quantitative&#39;, axis=alt.Axis(minExtent=30)), # y=alt.Y(&#39;IMDB_Rating:Q&#39;, ), # use min extent to stabilize axis title placement tooltip=[&#39;Title:N&#39;, &#39;Release_Date:N&#39;, &#39;IMDB_Rating:Q&#39;, &#39;Rotten_Tomatoes_Rating:Q&#39;] ).properties( width=500, height=400 ) . Example 3: More Tooltips . label = alt.selection_single( encodings=[&#39;x&#39;], # limit selection to x-axis value on=&#39;mouseover&#39;, # select on mouseover events nearest=True, # select data point nearest the cursor empty=&#39;none&#39; # empty selection includes no data points ) # define our base line chart of stock prices base = alt.Chart().mark_line().encode( alt.X(&#39;date:T&#39;), alt.Y(&#39;price:Q&#39;, scale=alt.Scale(type=&#39;log&#39;)), alt.Color(&#39;symbol:N&#39;) ) alt.layer( base, # base line chart # add a rule mark to serve as a guide line alt.Chart().mark_rule(color=&#39;#aaa&#39;).encode( x=&#39;date:T&#39; ).transform_filter(label), # add circle marks for selected time points, hide unselected points base.mark_circle().encode( opacity=alt.condition(label, alt.value(1), alt.value(0)) ).add_selection(label), # add white stroked text to provide a legible background for labels base.mark_text(align=&#39;left&#39;, dx=5, dy=-5, stroke=&#39;white&#39;, strokeWidth=2).encode( text=&#39;price:Q&#39; ).transform_filter(label), # add text labels for stock prices base.mark_text(align=&#39;left&#39;, dx=5, dy=-5).encode( text=&#39;price:Q&#39; ).transform_filter(label), data=stocks ).properties( width=500, height=400 ) . Data Tables . You can display tables per the usual way in your blog: . df[[&#39;Title&#39;, &#39;Worldwide_Gross&#39;, &#39;Production_Budget&#39;, &#39;Distributor&#39;, &#39;MPAA_Rating&#39;, &#39;IMDB_Rating&#39;, &#39;Rotten_Tomatoes_Rating&#39;]].head() . Title Worldwide_Gross Production_Budget Distributor MPAA_Rating IMDB_Rating Rotten_Tomatoes_Rating . 0 The Land Girls | 146083.0 | 8000000.0 | Gramercy | R | 6.1 | NaN | . 1 First Love, Last Rites | 10876.0 | 300000.0 | Strand | R | 6.9 | NaN | . 2 I Married a Strange Person | 203134.0 | 250000.0 | Lionsgate | None | 6.8 | NaN | . 3 Let&#39;s Talk About Sex | 373615.0 | 300000.0 | Fine Line | None | NaN | 13.0 | . 4 Slam | 1087521.0 | 1000000.0 | Trimark | R | 3.4 | 62.0 | . Images . Local Images . You can reference local images and they will be copied and rendered on your blog automatically. You can include these with the following markdown syntax: . ![](my_icons/fastai_logo.png) . . Remote Images . Remote images can be included with the following markdown syntax: . ![](https://image.flaticon.com/icons/svg/36/36686.svg) . . Animated Gifs . Animated Gifs work, too! . ![](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif) . . Captions . You can include captions with markdown images like this: . ![](https://www.fast.ai/images/fastai_paper/show_batch.png &quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot;) . . Other Elements . GitHub Flavored Emojis . Typing I give this post two :+1:! will render this: . I give this post two :+1:! . Tweetcards . Typing &gt; twitter: https://twitter.com/jakevdp/status/1204765621767901185?s=20 will render this: Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 . Youtube Videos . Typing &gt; youtube: https://youtu.be/XfoYk_Z5AkI will render this: . Boxes / Callouts . Typing &gt; Warning: There will be no second warning! will render this: . Warning: There will be no second warning! . Typing &gt; Important: Pay attention! It&#39;s important. will render this: . Important: Pay attention! It&#8217;s important. . Typing &gt; Tip: This is my tip. will render this: . Tip: This is my tip. . Typing &gt; Note: Take note of this. will render this: . Note: Take note of this. . Typing &gt; Note: A doc link to [an example website: fast.ai](https://www.fast.ai/) should also work fine. will render in the docs: . Note: A doc link to an example website: fast.ai should also work fine. . Footnotes . You can have footnotes in notebooks, however the syntax is different compared to markdown documents. This guide provides more detail about this syntax, which looks like this: . For example, here is a footnote {% fn 1 %}. And another {% fn 2 %} {{ &#39;This is the footnote.&#39; | fndetail: 1 }} {{ &#39;This is the other footnote. You can even have a [link](www.github.com)!&#39; | fndetail: 2 }} . For example, here is a footnote 1. . And another 2 . 1. This is the footnote.↩ . 2. This is the other footnote. You can even have a link!↩ .",
            "url": "https://de-fellows.github.io/RexCoding/jupyter/2020/02/20/test.html",
            "relUrl": "/jupyter/2020/02/20/test.html",
            "date": " • Feb 20, 2020"
        }
        
    
  
    
        ,"post14": {
            "title": "An Example Markdown Post",
            "content": "Example Markdown Post . Basic setup . Jekyll requires blog post files to be named according to the following format: . YEAR-MONTH-DAY-filename.md . Where YEAR is a four-digit number, MONTH and DAY are both two-digit numbers, and filename is whatever file name you choose, to remind yourself what this post is about. .md is the file extension for markdown files. . The first line of the file should start with a single hash character, then a space, then your title. This is how you create a “level 1 heading” in markdown. Then you can create level 2, 3, etc headings as you wish but repeating the hash character, such as you see in the line ## File names above. . Basic formatting . You can use italics, bold, code font text, and create links. Here’s a footnote 1. Here’s a horizontal rule: . . Lists . Here’s a list: . item 1 | item 2 | . And a numbered list: . item 1 | item 2 | Boxes and stuff . This is a quotation . . You can include alert boxes …and… . . You can include info boxes Images . . Code . You can format text and code per usual . General preformatted text: . # Do a thing do_thing() . Python code and output: . # Prints &#39;2&#39; print(1+1) . 2 . Formatting text as shell commands: . echo &quot;hello world&quot; ./some_script.sh --option &quot;value&quot; wget https://example.com/cat_photo1.png . Formatting text as YAML: . key: value - another_key: &quot;another value&quot; . Tables . Column 1 Column 2 . A thing | Another thing | . Tweetcards . Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 Footnotes . This is the footnote. &#8617; . |",
            "url": "https://de-fellows.github.io/RexCoding/markdown/2020/01/14/test-markdown-post.html",
            "relUrl": "/markdown/2020/01/14/test-markdown-post.html",
            "date": " • Jan 14, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "This website is powered by fastpages 1. . a blogging platform that natively supports Jupyter notebooks in addition to other formats. &#8617; . |",
          "url": "https://de-fellows.github.io/RexCoding/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page10": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://de-fellows.github.io/RexCoding/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}